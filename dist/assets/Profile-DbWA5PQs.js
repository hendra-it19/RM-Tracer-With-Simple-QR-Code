import{u as N,a as w,r as l,j as a}from"./index-D6bRFg2V.js";import{U as v}from"./user-eTdLHY9p.js";import{S as h}from"./save-DYa_dW1x.js";import{L as P}from"./lock-Dhhljkhx.js";const E=()=>{const{profile:n,updateProfile:f,updatePassword:x}=N(),{success:o,error:r}=w(),[d,j]=l.useState(n?.nama||""),[y,k]=l.useState(""),[i,c]=l.useState(""),[m,u]=l.useState(""),[p,t]=l.useState(!1),b=async s=>{if(s.preventDefault(),!d.trim()){r("Nama tidak boleh kosong");return}t(!0);try{const{error:e}=await f({nama:d});if(e)throw e;o("Profil berhasil diperbarui")}catch(e){r("Gagal memperbarui profil"),console.error(e)}t(!1)},g=async s=>{if(s.preventDefault(),i.length<6){r("Password baru minimal 6 karakter");return}if(i!==m){r("Konfirmasi password tidak cocok");return}t(!0);try{const{error:e}=await x(i);if(e)throw e;o("Password berhasil diperbarui"),c(""),u("")}catch(e){r(e.message||"Gagal memperbarui password"),console.error(e)}t(!1)};return a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"page-header",children:a.jsxs("div",{children:[a.jsx("h1",{className:"page-title",children:"Profil Saya"}),a.jsx("p",{className:"page-subtitle",children:"Kelola informasi akun dan keamanan"})]})}),a.jsx("div",{className:"page-content",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-lg",children:[a.jsxs("div",{className:"card",children:[a.jsx("div",{className:"card-header",children:a.jsxs("h3",{className:"card-title flex items-center gap-sm",children:[a.jsx(v,{size:20}),"Informasi Akun"]})}),a.jsx("div",{className:"card-body",children:a.jsxs("form",{onSubmit:b,children:[a.jsxs("div",{className:"form-group",children:[a.jsx("label",{className:"form-label",children:"Email"}),a.jsx("input",{type:"email",className:"form-input",value:n?.email||"Loading...",disabled:!0,style:{backgroundColor:"var(--gray-50)",cursor:"not-allowed"}}),a.jsx("p",{className:"form-hint",children:"Email tidak dapat diubah"})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{className:"form-label",children:"Nama Lengkap"}),a.jsx("input",{type:"text",className:"form-input",value:d,onChange:s=>j(s.target.value),placeholder:"Nama lengkap Anda",required:!0})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{className:"form-label",children:"Role"}),a.jsx("span",{className:"badge badge-primary inline-flex",children:n?.role?.toUpperCase()})]}),a.jsxs("button",{type:"submit",className:"btn btn-primary w-full mt-md",disabled:p,children:[a.jsx(h,{size:18}),"Simpan Perubahan"]})]})})]}),a.jsxs("div",{className:"card",children:[a.jsx("div",{className:"card-header",children:a.jsxs("h3",{className:"card-title flex items-center gap-sm",children:[a.jsx(P,{size:20}),"Ganti Password"]})}),a.jsx("div",{className:"card-body",children:a.jsxs("form",{onSubmit:g,children:[a.jsxs("div",{className:"form-group",children:[a.jsx("label",{className:"form-label",children:"Password Baru"}),a.jsx("input",{type:"password",className:"form-input",value:i,onChange:s=>c(s.target.value),placeholder:"Minimal 6 karakter",minLength:6,required:!0})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{className:"form-label",children:"Konfirmasi Password Baru"}),a.jsx("input",{type:"password",className:"form-input",value:m,onChange:s=>u(s.target.value),placeholder:"Ulangi password baru",minLength:6,required:!0})]}),a.jsx("div",{className:"alert alert-info mt-md",children:a.jsx("p",{className:"text-sm",children:"Pastikan password baru Anda aman dan mudah diingat."})}),a.jsxs("button",{type:"submit",className:"btn btn-primary w-full mt-md",disabled:p,children:[a.jsx(h,{size:18}),"Update Password"]})]})})]})]})})]})};export{E as default};
