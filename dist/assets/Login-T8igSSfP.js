import{c as j,r as i,u as b,a as v,b as y,j as e,A as k}from"./index-D6bRFg2V.js";import{Q as w}from"./qr-code-BHaPqPtL.js";import{M as N}from"./mail-Bz7n7yue.js";import{L as E}from"./lock-Dhhljkhx.js";import{E as S}from"./eye-CBDBdVMq.js";const L=j("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]),I=()=>{const[r,u]=i.useState(""),[o,g]=i.useState(""),[l,x]=i.useState(!1),[t,c]=i.useState(!1),[m,n]=i.useState(""),{signIn:h}=b(),{error:p}=v();y();const f=async a=>{if(a.preventDefault(),n(""),!r||!o){n("Email dan password harus diisi"),p("Email dan password harus diisi");return}console.log("[Login] Attempting login for:",r),c(!0);const{data:M,error:d}=await h(r,o);if(c(!1),d){console.error("[Login] Login failed:",d);let s=d.message;s.includes("Invalid login credentials")?s="Email atau password salah":s.includes("Email not confirmed")?s="Email belum dikonfirmasi":s.includes("Invalid API key")?s="Konfigurasi Supabase tidak valid. Periksa ANON KEY di .env":s.includes("Failed to fetch")&&(s="Tidak dapat terhubung ke server. Periksa koneksi internet dan URL Supabase."),n(s),p(s);return}console.log("[Login] Login successful!")};return e.jsx("div",{className:"login-page",children:e.jsxs("div",{className:"login-card",children:[e.jsxs("div",{className:"login-header",children:[e.jsxs("div",{className:"login-logo",children:[e.jsx("div",{className:"login-logo-icon",children:e.jsx(w,{size:28})}),e.jsx("span",{children:"Berkas RM"})]}),e.jsx("p",{className:"login-tagline",children:"Sistem Pelacakan Rekam Medis"})]}),e.jsxs("form",{className:"login-body",onSubmit:f,children:[m&&e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",padding:"12px",marginBottom:"16px",background:"var(--error-light)",color:"#b91c1c",borderRadius:"var(--radius-lg)",fontSize:"0.875rem"},children:[e.jsx(k,{size:18}),e.jsx("span",{children:m})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",htmlFor:"email",children:"Email"}),e.jsxs("div",{style:{position:"relative"},children:[e.jsx(N,{size:18,style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)",color:"var(--text-muted)"}}),e.jsx("input",{type:"email",id:"email",className:"form-input",placeholder:"nama@rumahsakit.com",value:r,onChange:a=>u(a.target.value),style:{paddingLeft:"40px"},autoComplete:"email",disabled:t})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",htmlFor:"password",children:"Password"}),e.jsxs("div",{style:{position:"relative"},children:[e.jsx(E,{size:18,style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)",color:"var(--text-muted)"}}),e.jsx("input",{type:l?"text":"password",id:"password",className:"form-input",placeholder:"Masukkan password",value:o,onChange:a=>g(a.target.value),style:{paddingLeft:"40px",paddingRight:"40px"},autoComplete:"current-password",disabled:t}),e.jsx("button",{type:"button",onClick:()=>x(!l),style:{position:"absolute",right:"12px",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",cursor:"pointer",color:"var(--text-muted)",padding:"4px"},children:l?e.jsx(L,{size:18}):e.jsx(S,{size:18})})]})]}),e.jsx("button",{type:"submit",className:"btn btn-primary btn-block btn-lg mt-lg",disabled:t,children:t?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"spinner",style:{width:20,height:20}}),e.jsx("span",{children:"Memproses..."})]}):e.jsx("span",{children:"Masuk"})}),e.jsxs("div",{style:{marginTop:"16px",padding:"12px",background:"var(--gray-100)",borderRadius:"var(--radius-md)",fontSize:"0.75rem",color:"var(--text-muted)"},children:[e.jsx("strong",{children:"Debug:"})," Buka Browser Console (F12) untuk melihat log detail"]})]}),e.jsx("div",{className:"login-footer",children:e.jsx("p",{children:"Rekam Medis Tracer System Â© 2026"})})]})})};export{I as default};
