var g0=Object.defineProperty;var y0=(t,e,n)=>e in t?g0(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var V=(t,e,n)=>y0(t,typeof e!="symbol"?e+"":e,n);function v0(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function w0(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var lm={exports:{}},Go={},cm={exports:{}},q={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ji=Symbol.for("react.element"),_0=Symbol.for("react.portal"),x0=Symbol.for("react.fragment"),b0=Symbol.for("react.strict_mode"),k0=Symbol.for("react.profiler"),S0=Symbol.for("react.provider"),E0=Symbol.for("react.context"),j0=Symbol.for("react.forward_ref"),C0=Symbol.for("react.suspense"),P0=Symbol.for("react.memo"),T0=Symbol.for("react.lazy"),ih=Symbol.iterator;function N0(t){return t===null||typeof t!="object"?null:(t=ih&&t[ih]||t["@@iterator"],typeof t=="function"?t:null)}var um={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},dm=Object.assign,hm={};function js(t,e,n){this.props=t,this.context=e,this.refs=hm,this.updater=n||um}js.prototype.isReactComponent={};js.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};js.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function fm(){}fm.prototype=js.prototype;function Lu(t,e,n){this.props=t,this.context=e,this.refs=hm,this.updater=n||um}var zu=Lu.prototype=new fm;zu.constructor=Lu;dm(zu,js.prototype);zu.isPureReactComponent=!0;var ah=Array.isArray,pm=Object.prototype.hasOwnProperty,$u={current:null},mm={key:!0,ref:!0,__self:!0,__source:!0};function gm(t,e,n){var r,s={},i=null,a=null;if(e!=null)for(r in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(i=""+e.key),e)pm.call(e,r)&&!mm.hasOwnProperty(r)&&(s[r]=e[r]);var o=arguments.length-2;if(o===1)s.children=n;else if(1<o){for(var l=Array(o),c=0;c<o;c++)l[c]=arguments[c+2];s.children=l}if(t&&t.defaultProps)for(r in o=t.defaultProps,o)s[r]===void 0&&(s[r]=o[r]);return{$$typeof:Ji,type:t,key:i,ref:a,props:s,_owner:$u.current}}function O0(t,e){return{$$typeof:Ji,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Uu(t){return typeof t=="object"&&t!==null&&t.$$typeof===Ji}function R0(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var oh=/\/+/g;function Cl(t,e){return typeof t=="object"&&t!==null&&t.key!=null?R0(""+t.key):e.toString(36)}function Fa(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case Ji:case _0:a=!0}}if(a)return a=t,s=s(a),t=r===""?"."+Cl(a,0):r,ah(s)?(n="",t!=null&&(n=t.replace(oh,"$&/")+"/"),Fa(s,e,n,"",function(c){return c})):s!=null&&(Uu(s)&&(s=O0(s,n+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(oh,"$&/")+"/")+t)),e.push(s)),1;if(a=0,r=r===""?".":r+":",ah(t))for(var o=0;o<t.length;o++){i=t[o];var l=r+Cl(i,o);a+=Fa(i,e,n,l,s)}else if(l=N0(t),typeof l=="function")for(t=l.call(t),o=0;!(i=t.next()).done;)i=i.value,l=r+Cl(i,o++),a+=Fa(i,e,n,l,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function aa(t,e,n){if(t==null)return t;var r=[],s=0;return Fa(t,r,"","",function(i){return e.call(n,i,s++)}),r}function A0(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var qe={current:null},Ba={transition:null},M0={ReactCurrentDispatcher:qe,ReactCurrentBatchConfig:Ba,ReactCurrentOwner:$u};function ym(){throw Error("act(...) is not supported in production builds of React.")}q.Children={map:aa,forEach:function(t,e,n){aa(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return aa(t,function(){e++}),e},toArray:function(t){return aa(t,function(e){return e})||[]},only:function(t){if(!Uu(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};q.Component=js;q.Fragment=x0;q.Profiler=k0;q.PureComponent=Lu;q.StrictMode=b0;q.Suspense=C0;q.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=M0;q.act=ym;q.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=dm({},t.props),s=t.key,i=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,a=$u.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var o=t.type.defaultProps;for(l in e)pm.call(e,l)&&!mm.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&o!==void 0?o[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){o=Array(l);for(var c=0;c<l;c++)o[c]=arguments[c+2];r.children=o}return{$$typeof:Ji,type:t.type,key:s,ref:i,props:r,_owner:a}};q.createContext=function(t){return t={$$typeof:E0,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:S0,_context:t},t.Consumer=t};q.createElement=gm;q.createFactory=function(t){var e=gm.bind(null,t);return e.type=t,e};q.createRef=function(){return{current:null}};q.forwardRef=function(t){return{$$typeof:j0,render:t}};q.isValidElement=Uu;q.lazy=function(t){return{$$typeof:T0,_payload:{_status:-1,_result:t},_init:A0}};q.memo=function(t,e){return{$$typeof:P0,type:t,compare:e===void 0?null:e}};q.startTransition=function(t){var e=Ba.transition;Ba.transition={};try{t()}finally{Ba.transition=e}};q.unstable_act=ym;q.useCallback=function(t,e){return qe.current.useCallback(t,e)};q.useContext=function(t){return qe.current.useContext(t)};q.useDebugValue=function(){};q.useDeferredValue=function(t){return qe.current.useDeferredValue(t)};q.useEffect=function(t,e){return qe.current.useEffect(t,e)};q.useId=function(){return qe.current.useId()};q.useImperativeHandle=function(t,e,n){return qe.current.useImperativeHandle(t,e,n)};q.useInsertionEffect=function(t,e){return qe.current.useInsertionEffect(t,e)};q.useLayoutEffect=function(t,e){return qe.current.useLayoutEffect(t,e)};q.useMemo=function(t,e){return qe.current.useMemo(t,e)};q.useReducer=function(t,e,n){return qe.current.useReducer(t,e,n)};q.useRef=function(t){return qe.current.useRef(t)};q.useState=function(t){return qe.current.useState(t)};q.useSyncExternalStore=function(t,e,n){return qe.current.useSyncExternalStore(t,e,n)};q.useTransition=function(){return qe.current.useTransition()};q.version="18.3.1";cm.exports=q;var S=cm.exports;const Ge=w0(S),D0=v0({__proto__:null,default:Ge},[S]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var I0=S,L0=Symbol.for("react.element"),z0=Symbol.for("react.fragment"),$0=Object.prototype.hasOwnProperty,U0=I0.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,F0={key:!0,ref:!0,__self:!0,__source:!0};function vm(t,e,n){var r,s={},i=null,a=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(a=e.ref);for(r in e)$0.call(e,r)&&!F0.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:L0,type:t,key:i,ref:a,props:s,_owner:U0.current}}Go.Fragment=z0;Go.jsx=vm;Go.jsxs=vm;lm.exports=Go;var d=lm.exports,wm={exports:{}},ht={},_m={exports:{}},xm={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(C,O){var P=C.length;C.push(O);e:for(;0<P;){var D=P-1>>>1,ee=C[D];if(0<s(ee,O))C[D]=O,C[P]=ee,P=D;else break e}}function n(C){return C.length===0?null:C[0]}function r(C){if(C.length===0)return null;var O=C[0],P=C.pop();if(P!==O){C[0]=P;e:for(var D=0,ee=C.length,Oe=ee>>>1;D<Oe;){var Re=2*(D+1)-1,rt=C[Re],ke=Re+1,Rr=C[ke];if(0>s(rt,P))ke<ee&&0>s(Rr,rt)?(C[D]=Rr,C[ke]=P,D=ke):(C[D]=rt,C[Re]=P,D=Re);else if(ke<ee&&0>s(Rr,P))C[D]=Rr,C[ke]=P,D=ke;else break e}}return O}function s(C,O){var P=C.sortIndex-O.sortIndex;return P!==0?P:C.id-O.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var a=Date,o=a.now();t.unstable_now=function(){return a.now()-o}}var l=[],c=[],u=1,h=null,f=3,m=!1,p=!1,v=!1,_=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function g(C){for(var O=n(c);O!==null;){if(O.callback===null)r(c);else if(O.startTime<=C)r(c),O.sortIndex=O.expirationTime,e(l,O);else break;O=n(c)}}function x(C){if(v=!1,g(C),!p)if(n(l)!==null)p=!0,B(k);else{var O=n(c);O!==null&&W(x,O.startTime-C)}}function k(C,O){p=!1,v&&(v=!1,w(j),j=-1),m=!0;var P=f;try{for(g(O),h=n(l);h!==null&&(!(h.expirationTime>O)||C&&!L());){var D=h.callback;if(typeof D=="function"){h.callback=null,f=h.priorityLevel;var ee=D(h.expirationTime<=O);O=t.unstable_now(),typeof ee=="function"?h.callback=ee:h===n(l)&&r(l),g(O)}else r(l);h=n(l)}if(h!==null)var Oe=!0;else{var Re=n(c);Re!==null&&W(x,Re.startTime-O),Oe=!1}return Oe}finally{h=null,f=P,m=!1}}var b=!1,E=null,j=-1,N=5,T=-1;function L(){return!(t.unstable_now()-T<N)}function F(){if(E!==null){var C=t.unstable_now();T=C;var O=!0;try{O=E(!0,C)}finally{O?K():(b=!1,E=null)}}else b=!1}var K;if(typeof y=="function")K=function(){y(F)};else if(typeof MessageChannel<"u"){var te=new MessageChannel,A=te.port2;te.port1.onmessage=F,K=function(){A.postMessage(null)}}else K=function(){_(F,0)};function B(C){E=C,b||(b=!0,K())}function W(C,O){j=_(function(){C(t.unstable_now())},O)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(C){C.callback=null},t.unstable_continueExecution=function(){p||m||(p=!0,B(k))},t.unstable_forceFrameRate=function(C){0>C||125<C?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<C?Math.floor(1e3/C):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(C){switch(f){case 1:case 2:case 3:var O=3;break;default:O=f}var P=f;f=O;try{return C()}finally{f=P}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(C,O){switch(C){case 1:case 2:case 3:case 4:case 5:break;default:C=3}var P=f;f=C;try{return O()}finally{f=P}},t.unstable_scheduleCallback=function(C,O,P){var D=t.unstable_now();switch(typeof P=="object"&&P!==null?(P=P.delay,P=typeof P=="number"&&0<P?D+P:D):P=D,C){case 1:var ee=-1;break;case 2:ee=250;break;case 5:ee=1073741823;break;case 4:ee=1e4;break;default:ee=5e3}return ee=P+ee,C={id:u++,callback:O,priorityLevel:C,startTime:P,expirationTime:ee,sortIndex:-1},P>D?(C.sortIndex=P,e(c,C),n(l)===null&&C===n(c)&&(v?(w(j),j=-1):v=!0,W(x,P-D))):(C.sortIndex=ee,e(l,C),p||m||(p=!0,B(k))),C},t.unstable_shouldYield=L,t.unstable_wrapCallback=function(C){var O=f;return function(){var P=f;f=O;try{return C.apply(this,arguments)}finally{f=P}}}})(xm);_m.exports=xm;var B0=_m.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var W0=S,dt=B0;function R(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var bm=new Set,_i={};function Nr(t,e){ms(t,e),ms(t+"Capture",e)}function ms(t,e){for(_i[t]=e,t=0;t<e.length;t++)bm.add(e[t])}var on=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),wc=Object.prototype.hasOwnProperty,H0=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,lh={},ch={};function V0(t){return wc.call(ch,t)?!0:wc.call(lh,t)?!1:H0.test(t)?ch[t]=!0:(lh[t]=!0,!1)}function q0(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function K0(t,e,n,r){if(e===null||typeof e>"u"||q0(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Ke(t,e,n,r,s,i,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=a}var ze={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){ze[t]=new Ke(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];ze[e]=new Ke(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){ze[t]=new Ke(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){ze[t]=new Ke(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){ze[t]=new Ke(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){ze[t]=new Ke(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){ze[t]=new Ke(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){ze[t]=new Ke(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){ze[t]=new Ke(t,5,!1,t.toLowerCase(),null,!1,!1)});var Fu=/[\-:]([a-z])/g;function Bu(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Fu,Bu);ze[e]=new Ke(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Fu,Bu);ze[e]=new Ke(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Fu,Bu);ze[e]=new Ke(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){ze[t]=new Ke(t,1,!1,t.toLowerCase(),null,!1,!1)});ze.xlinkHref=new Ke("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){ze[t]=new Ke(t,1,!1,t.toLowerCase(),null,!0,!0)});function Wu(t,e,n,r){var s=ze.hasOwnProperty(e)?ze[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(K0(e,n,s,r)&&(n=null),r||s===null?V0(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var hn=W0.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,oa=Symbol.for("react.element"),qr=Symbol.for("react.portal"),Kr=Symbol.for("react.fragment"),Hu=Symbol.for("react.strict_mode"),_c=Symbol.for("react.profiler"),km=Symbol.for("react.provider"),Sm=Symbol.for("react.context"),Vu=Symbol.for("react.forward_ref"),xc=Symbol.for("react.suspense"),bc=Symbol.for("react.suspense_list"),qu=Symbol.for("react.memo"),_n=Symbol.for("react.lazy"),Em=Symbol.for("react.offscreen"),uh=Symbol.iterator;function Rs(t){return t===null||typeof t!="object"?null:(t=uh&&t[uh]||t["@@iterator"],typeof t=="function"?t:null)}var me=Object.assign,Pl;function qs(t){if(Pl===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Pl=e&&e[1]||""}return`
`+Pl+t}var Tl=!1;function Nl(t,e){if(!t||Tl)return"";Tl=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),i=r.stack.split(`
`),a=s.length-1,o=i.length-1;1<=a&&0<=o&&s[a]!==i[o];)o--;for(;1<=a&&0<=o;a--,o--)if(s[a]!==i[o]){if(a!==1||o!==1)do if(a--,o--,0>o||s[a]!==i[o]){var l=`
`+s[a].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=a&&0<=o);break}}}finally{Tl=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?qs(t):""}function Y0(t){switch(t.tag){case 5:return qs(t.type);case 16:return qs("Lazy");case 13:return qs("Suspense");case 19:return qs("SuspenseList");case 0:case 2:case 15:return t=Nl(t.type,!1),t;case 11:return t=Nl(t.type.render,!1),t;case 1:return t=Nl(t.type,!0),t;default:return""}}function kc(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Kr:return"Fragment";case qr:return"Portal";case _c:return"Profiler";case Hu:return"StrictMode";case xc:return"Suspense";case bc:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Sm:return(t.displayName||"Context")+".Consumer";case km:return(t._context.displayName||"Context")+".Provider";case Vu:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case qu:return e=t.displayName||null,e!==null?e:kc(t.type)||"Memo";case _n:e=t._payload,t=t._init;try{return kc(t(e))}catch{}}return null}function G0(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return kc(e);case 8:return e===Hu?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Wn(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function jm(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Q0(t){var e=jm(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(a){r=""+a,i.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function la(t){t._valueTracker||(t._valueTracker=Q0(t))}function Cm(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=jm(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function no(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Sc(t,e){var n=e.checked;return me({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function dh(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Wn(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Pm(t,e){e=e.checked,e!=null&&Wu(t,"checked",e,!1)}function Ec(t,e){Pm(t,e);var n=Wn(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?jc(t,e.type,n):e.hasOwnProperty("defaultValue")&&jc(t,e.type,Wn(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function hh(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function jc(t,e,n){(e!=="number"||no(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Ks=Array.isArray;function as(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Wn(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Cc(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(R(91));return me({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function fh(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(R(92));if(Ks(n)){if(1<n.length)throw Error(R(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Wn(n)}}function Tm(t,e){var n=Wn(e.value),r=Wn(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function ph(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Nm(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Pc(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Nm(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var ca,Om=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(ca=ca||document.createElement("div"),ca.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ca.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function xi(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var ri={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},X0=["Webkit","ms","Moz","O"];Object.keys(ri).forEach(function(t){X0.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ri[e]=ri[t]})});function Rm(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||ri.hasOwnProperty(t)&&ri[t]?(""+e).trim():e+"px"}function Am(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=Rm(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var J0=me({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Tc(t,e){if(e){if(J0[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(R(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(R(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(R(61))}if(e.style!=null&&typeof e.style!="object")throw Error(R(62))}}function Nc(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Oc=null;function Ku(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Rc=null,os=null,ls=null;function mh(t){if(t=ta(t)){if(typeof Rc!="function")throw Error(R(280));var e=t.stateNode;e&&(e=el(e),Rc(t.stateNode,t.type,e))}}function Mm(t){os?ls?ls.push(t):ls=[t]:os=t}function Dm(){if(os){var t=os,e=ls;if(ls=os=null,mh(t),e)for(t=0;t<e.length;t++)mh(e[t])}}function Im(t,e){return t(e)}function Lm(){}var Ol=!1;function zm(t,e,n){if(Ol)return t(e,n);Ol=!0;try{return Im(t,e,n)}finally{Ol=!1,(os!==null||ls!==null)&&(Lm(),Dm())}}function bi(t,e){var n=t.stateNode;if(n===null)return null;var r=el(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(R(231,e,typeof n));return n}var Ac=!1;if(on)try{var As={};Object.defineProperty(As,"passive",{get:function(){Ac=!0}}),window.addEventListener("test",As,As),window.removeEventListener("test",As,As)}catch{Ac=!1}function Z0(t,e,n,r,s,i,a,o,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(u){this.onError(u)}}var si=!1,ro=null,so=!1,Mc=null,ew={onError:function(t){si=!0,ro=t}};function tw(t,e,n,r,s,i,a,o,l){si=!1,ro=null,Z0.apply(ew,arguments)}function nw(t,e,n,r,s,i,a,o,l){if(tw.apply(this,arguments),si){if(si){var c=ro;si=!1,ro=null}else throw Error(R(198));so||(so=!0,Mc=c)}}function Or(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function $m(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function gh(t){if(Or(t)!==t)throw Error(R(188))}function rw(t){var e=t.alternate;if(!e){if(e=Or(t),e===null)throw Error(R(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return gh(s),t;if(i===r)return gh(s),e;i=i.sibling}throw Error(R(188))}if(n.return!==r.return)n=s,r=i;else{for(var a=!1,o=s.child;o;){if(o===n){a=!0,n=s,r=i;break}if(o===r){a=!0,r=s,n=i;break}o=o.sibling}if(!a){for(o=i.child;o;){if(o===n){a=!0,n=i,r=s;break}if(o===r){a=!0,r=i,n=s;break}o=o.sibling}if(!a)throw Error(R(189))}}if(n.alternate!==r)throw Error(R(190))}if(n.tag!==3)throw Error(R(188));return n.stateNode.current===n?t:e}function Um(t){return t=rw(t),t!==null?Fm(t):null}function Fm(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Fm(t);if(e!==null)return e;t=t.sibling}return null}var Bm=dt.unstable_scheduleCallback,yh=dt.unstable_cancelCallback,sw=dt.unstable_shouldYield,iw=dt.unstable_requestPaint,ve=dt.unstable_now,aw=dt.unstable_getCurrentPriorityLevel,Yu=dt.unstable_ImmediatePriority,Wm=dt.unstable_UserBlockingPriority,io=dt.unstable_NormalPriority,ow=dt.unstable_LowPriority,Hm=dt.unstable_IdlePriority,Qo=null,qt=null;function lw(t){if(qt&&typeof qt.onCommitFiberRoot=="function")try{qt.onCommitFiberRoot(Qo,t,void 0,(t.current.flags&128)===128)}catch{}}var Nt=Math.clz32?Math.clz32:dw,cw=Math.log,uw=Math.LN2;function dw(t){return t>>>=0,t===0?32:31-(cw(t)/uw|0)|0}var ua=64,da=4194304;function Ys(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function ao(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,a=n&268435455;if(a!==0){var o=a&~s;o!==0?r=Ys(o):(i&=a,i!==0&&(r=Ys(i)))}else a=n&~s,a!==0?r=Ys(a):i!==0&&(r=Ys(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Nt(e),s=1<<n,r|=t[n],e&=~s;return r}function hw(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function fw(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var a=31-Nt(i),o=1<<a,l=s[a];l===-1?(!(o&n)||o&r)&&(s[a]=hw(o,e)):l<=e&&(t.expiredLanes|=o),i&=~o}}function Dc(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Vm(){var t=ua;return ua<<=1,!(ua&4194240)&&(ua=64),t}function Rl(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Zi(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Nt(e),t[e]=n}function pw(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Nt(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function Gu(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Nt(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var Z=0;function qm(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Km,Qu,Ym,Gm,Qm,Ic=!1,ha=[],Rn=null,An=null,Mn=null,ki=new Map,Si=new Map,kn=[],mw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function vh(t,e){switch(t){case"focusin":case"focusout":Rn=null;break;case"dragenter":case"dragleave":An=null;break;case"mouseover":case"mouseout":Mn=null;break;case"pointerover":case"pointerout":ki.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Si.delete(e.pointerId)}}function Ms(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=ta(e),e!==null&&Qu(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function gw(t,e,n,r,s){switch(e){case"focusin":return Rn=Ms(Rn,t,e,n,r,s),!0;case"dragenter":return An=Ms(An,t,e,n,r,s),!0;case"mouseover":return Mn=Ms(Mn,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return ki.set(i,Ms(ki.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Si.set(i,Ms(Si.get(i)||null,t,e,n,r,s)),!0}return!1}function Xm(t){var e=hr(t.target);if(e!==null){var n=Or(e);if(n!==null){if(e=n.tag,e===13){if(e=$m(n),e!==null){t.blockedOn=e,Qm(t.priority,function(){Ym(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Wa(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Lc(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Oc=r,n.target.dispatchEvent(r),Oc=null}else return e=ta(n),e!==null&&Qu(e),t.blockedOn=n,!1;e.shift()}return!0}function wh(t,e,n){Wa(t)&&n.delete(e)}function yw(){Ic=!1,Rn!==null&&Wa(Rn)&&(Rn=null),An!==null&&Wa(An)&&(An=null),Mn!==null&&Wa(Mn)&&(Mn=null),ki.forEach(wh),Si.forEach(wh)}function Ds(t,e){t.blockedOn===e&&(t.blockedOn=null,Ic||(Ic=!0,dt.unstable_scheduleCallback(dt.unstable_NormalPriority,yw)))}function Ei(t){function e(s){return Ds(s,t)}if(0<ha.length){Ds(ha[0],t);for(var n=1;n<ha.length;n++){var r=ha[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Rn!==null&&Ds(Rn,t),An!==null&&Ds(An,t),Mn!==null&&Ds(Mn,t),ki.forEach(e),Si.forEach(e),n=0;n<kn.length;n++)r=kn[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<kn.length&&(n=kn[0],n.blockedOn===null);)Xm(n),n.blockedOn===null&&kn.shift()}var cs=hn.ReactCurrentBatchConfig,oo=!0;function vw(t,e,n,r){var s=Z,i=cs.transition;cs.transition=null;try{Z=1,Xu(t,e,n,r)}finally{Z=s,cs.transition=i}}function ww(t,e,n,r){var s=Z,i=cs.transition;cs.transition=null;try{Z=4,Xu(t,e,n,r)}finally{Z=s,cs.transition=i}}function Xu(t,e,n,r){if(oo){var s=Lc(t,e,n,r);if(s===null)Bl(t,e,r,lo,n),vh(t,r);else if(gw(s,t,e,n,r))r.stopPropagation();else if(vh(t,r),e&4&&-1<mw.indexOf(t)){for(;s!==null;){var i=ta(s);if(i!==null&&Km(i),i=Lc(t,e,n,r),i===null&&Bl(t,e,r,lo,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Bl(t,e,r,null,n)}}var lo=null;function Lc(t,e,n,r){if(lo=null,t=Ku(r),t=hr(t),t!==null)if(e=Or(t),e===null)t=null;else if(n=e.tag,n===13){if(t=$m(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return lo=t,null}function Jm(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(aw()){case Yu:return 1;case Wm:return 4;case io:case ow:return 16;case Hm:return 536870912;default:return 16}default:return 16}}var jn=null,Ju=null,Ha=null;function Zm(){if(Ha)return Ha;var t,e=Ju,n=e.length,r,s="value"in jn?jn.value:jn.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var a=n-t;for(r=1;r<=a&&e[n-r]===s[i-r];r++);return Ha=s.slice(t,1<r?1-r:void 0)}function Va(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function fa(){return!0}function _h(){return!1}function ft(t){function e(n,r,s,i,a){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=a,this.currentTarget=null;for(var o in t)t.hasOwnProperty(o)&&(n=t[o],this[o]=n?n(i):i[o]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?fa:_h,this.isPropagationStopped=_h,this}return me(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=fa)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=fa)},persist:function(){},isPersistent:fa}),e}var Cs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Zu=ft(Cs),ea=me({},Cs,{view:0,detail:0}),_w=ft(ea),Al,Ml,Is,Xo=me({},ea,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ed,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Is&&(Is&&t.type==="mousemove"?(Al=t.screenX-Is.screenX,Ml=t.screenY-Is.screenY):Ml=Al=0,Is=t),Al)},movementY:function(t){return"movementY"in t?t.movementY:Ml}}),xh=ft(Xo),xw=me({},Xo,{dataTransfer:0}),bw=ft(xw),kw=me({},ea,{relatedTarget:0}),Dl=ft(kw),Sw=me({},Cs,{animationName:0,elapsedTime:0,pseudoElement:0}),Ew=ft(Sw),jw=me({},Cs,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Cw=ft(jw),Pw=me({},Cs,{data:0}),bh=ft(Pw),Tw={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nw={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ow={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Rw(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Ow[t])?!!e[t]:!1}function ed(){return Rw}var Aw=me({},ea,{key:function(t){if(t.key){var e=Tw[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Va(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Nw[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ed,charCode:function(t){return t.type==="keypress"?Va(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Va(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Mw=ft(Aw),Dw=me({},Xo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),kh=ft(Dw),Iw=me({},ea,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ed}),Lw=ft(Iw),zw=me({},Cs,{propertyName:0,elapsedTime:0,pseudoElement:0}),$w=ft(zw),Uw=me({},Xo,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Fw=ft(Uw),Bw=[9,13,27,32],td=on&&"CompositionEvent"in window,ii=null;on&&"documentMode"in document&&(ii=document.documentMode);var Ww=on&&"TextEvent"in window&&!ii,eg=on&&(!td||ii&&8<ii&&11>=ii),Sh=" ",Eh=!1;function tg(t,e){switch(t){case"keyup":return Bw.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ng(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Yr=!1;function Hw(t,e){switch(t){case"compositionend":return ng(e);case"keypress":return e.which!==32?null:(Eh=!0,Sh);case"textInput":return t=e.data,t===Sh&&Eh?null:t;default:return null}}function Vw(t,e){if(Yr)return t==="compositionend"||!td&&tg(t,e)?(t=Zm(),Ha=Ju=jn=null,Yr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return eg&&e.locale!=="ko"?null:e.data;default:return null}}var qw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function jh(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!qw[t.type]:e==="textarea"}function rg(t,e,n,r){Mm(r),e=co(e,"onChange"),0<e.length&&(n=new Zu("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var ai=null,ji=null;function Kw(t){pg(t,0)}function Jo(t){var e=Xr(t);if(Cm(e))return t}function Yw(t,e){if(t==="change")return e}var sg=!1;if(on){var Il;if(on){var Ll="oninput"in document;if(!Ll){var Ch=document.createElement("div");Ch.setAttribute("oninput","return;"),Ll=typeof Ch.oninput=="function"}Il=Ll}else Il=!1;sg=Il&&(!document.documentMode||9<document.documentMode)}function Ph(){ai&&(ai.detachEvent("onpropertychange",ig),ji=ai=null)}function ig(t){if(t.propertyName==="value"&&Jo(ji)){var e=[];rg(e,ji,t,Ku(t)),zm(Kw,e)}}function Gw(t,e,n){t==="focusin"?(Ph(),ai=e,ji=n,ai.attachEvent("onpropertychange",ig)):t==="focusout"&&Ph()}function Qw(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Jo(ji)}function Xw(t,e){if(t==="click")return Jo(e)}function Jw(t,e){if(t==="input"||t==="change")return Jo(e)}function Zw(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var At=typeof Object.is=="function"?Object.is:Zw;function Ci(t,e){if(At(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!wc.call(e,s)||!At(t[s],e[s]))return!1}return!0}function Th(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Nh(t,e){var n=Th(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Th(n)}}function ag(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?ag(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function og(){for(var t=window,e=no();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=no(t.document)}return e}function nd(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function e_(t){var e=og(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&ag(n.ownerDocument.documentElement,n)){if(r!==null&&nd(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=Nh(n,i);var a=Nh(n,r);s&&a&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var t_=on&&"documentMode"in document&&11>=document.documentMode,Gr=null,zc=null,oi=null,$c=!1;function Oh(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;$c||Gr==null||Gr!==no(r)||(r=Gr,"selectionStart"in r&&nd(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),oi&&Ci(oi,r)||(oi=r,r=co(zc,"onSelect"),0<r.length&&(e=new Zu("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Gr)))}function pa(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Qr={animationend:pa("Animation","AnimationEnd"),animationiteration:pa("Animation","AnimationIteration"),animationstart:pa("Animation","AnimationStart"),transitionend:pa("Transition","TransitionEnd")},zl={},lg={};on&&(lg=document.createElement("div").style,"AnimationEvent"in window||(delete Qr.animationend.animation,delete Qr.animationiteration.animation,delete Qr.animationstart.animation),"TransitionEvent"in window||delete Qr.transitionend.transition);function Zo(t){if(zl[t])return zl[t];if(!Qr[t])return t;var e=Qr[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in lg)return zl[t]=e[n];return t}var cg=Zo("animationend"),ug=Zo("animationiteration"),dg=Zo("animationstart"),hg=Zo("transitionend"),fg=new Map,Rh="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Gn(t,e){fg.set(t,e),Nr(e,[t])}for(var $l=0;$l<Rh.length;$l++){var Ul=Rh[$l],n_=Ul.toLowerCase(),r_=Ul[0].toUpperCase()+Ul.slice(1);Gn(n_,"on"+r_)}Gn(cg,"onAnimationEnd");Gn(ug,"onAnimationIteration");Gn(dg,"onAnimationStart");Gn("dblclick","onDoubleClick");Gn("focusin","onFocus");Gn("focusout","onBlur");Gn(hg,"onTransitionEnd");ms("onMouseEnter",["mouseout","mouseover"]);ms("onMouseLeave",["mouseout","mouseover"]);ms("onPointerEnter",["pointerout","pointerover"]);ms("onPointerLeave",["pointerout","pointerover"]);Nr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Nr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Nr("onBeforeInput",["compositionend","keypress","textInput","paste"]);Nr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Nr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Nr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Gs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),s_=new Set("cancel close invalid load scroll toggle".split(" ").concat(Gs));function Ah(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,nw(r,e,void 0,t),t.currentTarget=null}function pg(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var a=r.length-1;0<=a;a--){var o=r[a],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==i&&s.isPropagationStopped())break e;Ah(s,o,c),i=l}else for(a=0;a<r.length;a++){if(o=r[a],l=o.instance,c=o.currentTarget,o=o.listener,l!==i&&s.isPropagationStopped())break e;Ah(s,o,c),i=l}}}if(so)throw t=Mc,so=!1,Mc=null,t}function ie(t,e){var n=e[Hc];n===void 0&&(n=e[Hc]=new Set);var r=t+"__bubble";n.has(r)||(mg(e,t,2,!1),n.add(r))}function Fl(t,e,n){var r=0;e&&(r|=4),mg(n,t,r,e)}var ma="_reactListening"+Math.random().toString(36).slice(2);function Pi(t){if(!t[ma]){t[ma]=!0,bm.forEach(function(n){n!=="selectionchange"&&(s_.has(n)||Fl(n,!1,t),Fl(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[ma]||(e[ma]=!0,Fl("selectionchange",!1,e))}}function mg(t,e,n,r){switch(Jm(e)){case 1:var s=vw;break;case 4:s=ww;break;default:s=Xu}n=s.bind(null,e,n,t),s=void 0,!Ac||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Bl(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var o=r.stateNode.containerInfo;if(o===s||o.nodeType===8&&o.parentNode===s)break;if(a===4)for(a=r.return;a!==null;){var l=a.tag;if((l===3||l===4)&&(l=a.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;a=a.return}for(;o!==null;){if(a=hr(o),a===null)return;if(l=a.tag,l===5||l===6){r=i=a;continue e}o=o.parentNode}}r=r.return}zm(function(){var c=i,u=Ku(n),h=[];e:{var f=fg.get(t);if(f!==void 0){var m=Zu,p=t;switch(t){case"keypress":if(Va(n)===0)break e;case"keydown":case"keyup":m=Mw;break;case"focusin":p="focus",m=Dl;break;case"focusout":p="blur",m=Dl;break;case"beforeblur":case"afterblur":m=Dl;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=xh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=bw;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=Lw;break;case cg:case ug:case dg:m=Ew;break;case hg:m=$w;break;case"scroll":m=_w;break;case"wheel":m=Fw;break;case"copy":case"cut":case"paste":m=Cw;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=kh}var v=(e&4)!==0,_=!v&&t==="scroll",w=v?f!==null?f+"Capture":null:f;v=[];for(var y=c,g;y!==null;){g=y;var x=g.stateNode;if(g.tag===5&&x!==null&&(g=x,w!==null&&(x=bi(y,w),x!=null&&v.push(Ti(y,x,g)))),_)break;y=y.return}0<v.length&&(f=new m(f,p,null,n,u),h.push({event:f,listeners:v}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",f&&n!==Oc&&(p=n.relatedTarget||n.fromElement)&&(hr(p)||p[ln]))break e;if((m||f)&&(f=u.window===u?u:(f=u.ownerDocument)?f.defaultView||f.parentWindow:window,m?(p=n.relatedTarget||n.toElement,m=c,p=p?hr(p):null,p!==null&&(_=Or(p),p!==_||p.tag!==5&&p.tag!==6)&&(p=null)):(m=null,p=c),m!==p)){if(v=xh,x="onMouseLeave",w="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(v=kh,x="onPointerLeave",w="onPointerEnter",y="pointer"),_=m==null?f:Xr(m),g=p==null?f:Xr(p),f=new v(x,y+"leave",m,n,u),f.target=_,f.relatedTarget=g,x=null,hr(u)===c&&(v=new v(w,y+"enter",p,n,u),v.target=g,v.relatedTarget=_,x=v),_=x,m&&p)t:{for(v=m,w=p,y=0,g=v;g;g=Ar(g))y++;for(g=0,x=w;x;x=Ar(x))g++;for(;0<y-g;)v=Ar(v),y--;for(;0<g-y;)w=Ar(w),g--;for(;y--;){if(v===w||w!==null&&v===w.alternate)break t;v=Ar(v),w=Ar(w)}v=null}else v=null;m!==null&&Mh(h,f,m,v,!1),p!==null&&_!==null&&Mh(h,_,p,v,!0)}}e:{if(f=c?Xr(c):window,m=f.nodeName&&f.nodeName.toLowerCase(),m==="select"||m==="input"&&f.type==="file")var k=Yw;else if(jh(f))if(sg)k=Jw;else{k=Qw;var b=Gw}else(m=f.nodeName)&&m.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(k=Xw);if(k&&(k=k(t,c))){rg(h,k,n,u);break e}b&&b(t,f,c),t==="focusout"&&(b=f._wrapperState)&&b.controlled&&f.type==="number"&&jc(f,"number",f.value)}switch(b=c?Xr(c):window,t){case"focusin":(jh(b)||b.contentEditable==="true")&&(Gr=b,zc=c,oi=null);break;case"focusout":oi=zc=Gr=null;break;case"mousedown":$c=!0;break;case"contextmenu":case"mouseup":case"dragend":$c=!1,Oh(h,n,u);break;case"selectionchange":if(t_)break;case"keydown":case"keyup":Oh(h,n,u)}var E;if(td)e:{switch(t){case"compositionstart":var j="onCompositionStart";break e;case"compositionend":j="onCompositionEnd";break e;case"compositionupdate":j="onCompositionUpdate";break e}j=void 0}else Yr?tg(t,n)&&(j="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(j="onCompositionStart");j&&(eg&&n.locale!=="ko"&&(Yr||j!=="onCompositionStart"?j==="onCompositionEnd"&&Yr&&(E=Zm()):(jn=u,Ju="value"in jn?jn.value:jn.textContent,Yr=!0)),b=co(c,j),0<b.length&&(j=new bh(j,t,null,n,u),h.push({event:j,listeners:b}),E?j.data=E:(E=ng(n),E!==null&&(j.data=E)))),(E=Ww?Hw(t,n):Vw(t,n))&&(c=co(c,"onBeforeInput"),0<c.length&&(u=new bh("onBeforeInput","beforeinput",null,n,u),h.push({event:u,listeners:c}),u.data=E))}pg(h,e)})}function Ti(t,e,n){return{instance:t,listener:e,currentTarget:n}}function co(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=bi(t,n),i!=null&&r.unshift(Ti(t,i,s)),i=bi(t,e),i!=null&&r.push(Ti(t,i,s))),t=t.return}return r}function Ar(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Mh(t,e,n,r,s){for(var i=e._reactName,a=[];n!==null&&n!==r;){var o=n,l=o.alternate,c=o.stateNode;if(l!==null&&l===r)break;o.tag===5&&c!==null&&(o=c,s?(l=bi(n,i),l!=null&&a.unshift(Ti(n,l,o))):s||(l=bi(n,i),l!=null&&a.push(Ti(n,l,o)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var i_=/\r\n?/g,a_=/\u0000|\uFFFD/g;function Dh(t){return(typeof t=="string"?t:""+t).replace(i_,`
`).replace(a_,"")}function ga(t,e,n){if(e=Dh(e),Dh(t)!==e&&n)throw Error(R(425))}function uo(){}var Uc=null,Fc=null;function Bc(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Wc=typeof setTimeout=="function"?setTimeout:void 0,o_=typeof clearTimeout=="function"?clearTimeout:void 0,Ih=typeof Promise=="function"?Promise:void 0,l_=typeof queueMicrotask=="function"?queueMicrotask:typeof Ih<"u"?function(t){return Ih.resolve(null).then(t).catch(c_)}:Wc;function c_(t){setTimeout(function(){throw t})}function Wl(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Ei(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Ei(e)}function Dn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Lh(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Ps=Math.random().toString(36).slice(2),Wt="__reactFiber$"+Ps,Ni="__reactProps$"+Ps,ln="__reactContainer$"+Ps,Hc="__reactEvents$"+Ps,u_="__reactListeners$"+Ps,d_="__reactHandles$"+Ps;function hr(t){var e=t[Wt];if(e)return e;for(var n=t.parentNode;n;){if(e=n[ln]||n[Wt]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Lh(t);t!==null;){if(n=t[Wt])return n;t=Lh(t)}return e}t=n,n=t.parentNode}return null}function ta(t){return t=t[Wt]||t[ln],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Xr(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(R(33))}function el(t){return t[Ni]||null}var Vc=[],Jr=-1;function Qn(t){return{current:t}}function ce(t){0>Jr||(t.current=Vc[Jr],Vc[Jr]=null,Jr--)}function se(t,e){Jr++,Vc[Jr]=t.current,t.current=e}var Hn={},We=Qn(Hn),et=Qn(!1),xr=Hn;function gs(t,e){var n=t.type.contextTypes;if(!n)return Hn;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function tt(t){return t=t.childContextTypes,t!=null}function ho(){ce(et),ce(We)}function zh(t,e,n){if(We.current!==Hn)throw Error(R(168));se(We,e),se(et,n)}function gg(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(R(108,G0(t)||"Unknown",s));return me({},n,r)}function fo(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Hn,xr=We.current,se(We,t),se(et,et.current),!0}function $h(t,e,n){var r=t.stateNode;if(!r)throw Error(R(169));n?(t=gg(t,e,xr),r.__reactInternalMemoizedMergedChildContext=t,ce(et),ce(We),se(We,t)):ce(et),se(et,n)}var en=null,tl=!1,Hl=!1;function yg(t){en===null?en=[t]:en.push(t)}function h_(t){tl=!0,yg(t)}function Xn(){if(!Hl&&en!==null){Hl=!0;var t=0,e=Z;try{var n=en;for(Z=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}en=null,tl=!1}catch(s){throw en!==null&&(en=en.slice(t+1)),Bm(Yu,Xn),s}finally{Z=e,Hl=!1}}return null}var Zr=[],es=0,po=null,mo=0,mt=[],gt=0,br=null,rn=1,sn="";function ir(t,e){Zr[es++]=mo,Zr[es++]=po,po=t,mo=e}function vg(t,e,n){mt[gt++]=rn,mt[gt++]=sn,mt[gt++]=br,br=t;var r=rn;t=sn;var s=32-Nt(r)-1;r&=~(1<<s),n+=1;var i=32-Nt(e)+s;if(30<i){var a=s-s%5;i=(r&(1<<a)-1).toString(32),r>>=a,s-=a,rn=1<<32-Nt(e)+s|n<<s|r,sn=i+t}else rn=1<<i|n<<s|r,sn=t}function rd(t){t.return!==null&&(ir(t,1),vg(t,1,0))}function sd(t){for(;t===po;)po=Zr[--es],Zr[es]=null,mo=Zr[--es],Zr[es]=null;for(;t===br;)br=mt[--gt],mt[gt]=null,sn=mt[--gt],mt[gt]=null,rn=mt[--gt],mt[gt]=null}var ut=null,ct=null,ue=!1,Pt=null;function wg(t,e){var n=yt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Uh(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,ut=t,ct=Dn(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,ut=t,ct=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=br!==null?{id:rn,overflow:sn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=yt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,ut=t,ct=null,!0):!1;default:return!1}}function qc(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Kc(t){if(ue){var e=ct;if(e){var n=e;if(!Uh(t,e)){if(qc(t))throw Error(R(418));e=Dn(n.nextSibling);var r=ut;e&&Uh(t,e)?wg(r,n):(t.flags=t.flags&-4097|2,ue=!1,ut=t)}}else{if(qc(t))throw Error(R(418));t.flags=t.flags&-4097|2,ue=!1,ut=t}}}function Fh(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;ut=t}function ya(t){if(t!==ut)return!1;if(!ue)return Fh(t),ue=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Bc(t.type,t.memoizedProps)),e&&(e=ct)){if(qc(t))throw _g(),Error(R(418));for(;e;)wg(t,e),e=Dn(e.nextSibling)}if(Fh(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(R(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){ct=Dn(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}ct=null}}else ct=ut?Dn(t.stateNode.nextSibling):null;return!0}function _g(){for(var t=ct;t;)t=Dn(t.nextSibling)}function ys(){ct=ut=null,ue=!1}function id(t){Pt===null?Pt=[t]:Pt.push(t)}var f_=hn.ReactCurrentBatchConfig;function Ls(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(R(309));var r=n.stateNode}if(!r)throw Error(R(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(a){var o=s.refs;a===null?delete o[i]:o[i]=a},e._stringRef=i,e)}if(typeof t!="string")throw Error(R(284));if(!n._owner)throw Error(R(290,t))}return t}function va(t,e){throw t=Object.prototype.toString.call(e),Error(R(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Bh(t){var e=t._init;return e(t._payload)}function xg(t){function e(w,y){if(t){var g=w.deletions;g===null?(w.deletions=[y],w.flags|=16):g.push(y)}}function n(w,y){if(!t)return null;for(;y!==null;)e(w,y),y=y.sibling;return null}function r(w,y){for(w=new Map;y!==null;)y.key!==null?w.set(y.key,y):w.set(y.index,y),y=y.sibling;return w}function s(w,y){return w=$n(w,y),w.index=0,w.sibling=null,w}function i(w,y,g){return w.index=g,t?(g=w.alternate,g!==null?(g=g.index,g<y?(w.flags|=2,y):g):(w.flags|=2,y)):(w.flags|=1048576,y)}function a(w){return t&&w.alternate===null&&(w.flags|=2),w}function o(w,y,g,x){return y===null||y.tag!==6?(y=Xl(g,w.mode,x),y.return=w,y):(y=s(y,g),y.return=w,y)}function l(w,y,g,x){var k=g.type;return k===Kr?u(w,y,g.props.children,x,g.key):y!==null&&(y.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===_n&&Bh(k)===y.type)?(x=s(y,g.props),x.ref=Ls(w,y,g),x.return=w,x):(x=Ja(g.type,g.key,g.props,null,w.mode,x),x.ref=Ls(w,y,g),x.return=w,x)}function c(w,y,g,x){return y===null||y.tag!==4||y.stateNode.containerInfo!==g.containerInfo||y.stateNode.implementation!==g.implementation?(y=Jl(g,w.mode,x),y.return=w,y):(y=s(y,g.children||[]),y.return=w,y)}function u(w,y,g,x,k){return y===null||y.tag!==7?(y=vr(g,w.mode,x,k),y.return=w,y):(y=s(y,g),y.return=w,y)}function h(w,y,g){if(typeof y=="string"&&y!==""||typeof y=="number")return y=Xl(""+y,w.mode,g),y.return=w,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case oa:return g=Ja(y.type,y.key,y.props,null,w.mode,g),g.ref=Ls(w,null,y),g.return=w,g;case qr:return y=Jl(y,w.mode,g),y.return=w,y;case _n:var x=y._init;return h(w,x(y._payload),g)}if(Ks(y)||Rs(y))return y=vr(y,w.mode,g,null),y.return=w,y;va(w,y)}return null}function f(w,y,g,x){var k=y!==null?y.key:null;if(typeof g=="string"&&g!==""||typeof g=="number")return k!==null?null:o(w,y,""+g,x);if(typeof g=="object"&&g!==null){switch(g.$$typeof){case oa:return g.key===k?l(w,y,g,x):null;case qr:return g.key===k?c(w,y,g,x):null;case _n:return k=g._init,f(w,y,k(g._payload),x)}if(Ks(g)||Rs(g))return k!==null?null:u(w,y,g,x,null);va(w,g)}return null}function m(w,y,g,x,k){if(typeof x=="string"&&x!==""||typeof x=="number")return w=w.get(g)||null,o(y,w,""+x,k);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case oa:return w=w.get(x.key===null?g:x.key)||null,l(y,w,x,k);case qr:return w=w.get(x.key===null?g:x.key)||null,c(y,w,x,k);case _n:var b=x._init;return m(w,y,g,b(x._payload),k)}if(Ks(x)||Rs(x))return w=w.get(g)||null,u(y,w,x,k,null);va(y,x)}return null}function p(w,y,g,x){for(var k=null,b=null,E=y,j=y=0,N=null;E!==null&&j<g.length;j++){E.index>j?(N=E,E=null):N=E.sibling;var T=f(w,E,g[j],x);if(T===null){E===null&&(E=N);break}t&&E&&T.alternate===null&&e(w,E),y=i(T,y,j),b===null?k=T:b.sibling=T,b=T,E=N}if(j===g.length)return n(w,E),ue&&ir(w,j),k;if(E===null){for(;j<g.length;j++)E=h(w,g[j],x),E!==null&&(y=i(E,y,j),b===null?k=E:b.sibling=E,b=E);return ue&&ir(w,j),k}for(E=r(w,E);j<g.length;j++)N=m(E,w,j,g[j],x),N!==null&&(t&&N.alternate!==null&&E.delete(N.key===null?j:N.key),y=i(N,y,j),b===null?k=N:b.sibling=N,b=N);return t&&E.forEach(function(L){return e(w,L)}),ue&&ir(w,j),k}function v(w,y,g,x){var k=Rs(g);if(typeof k!="function")throw Error(R(150));if(g=k.call(g),g==null)throw Error(R(151));for(var b=k=null,E=y,j=y=0,N=null,T=g.next();E!==null&&!T.done;j++,T=g.next()){E.index>j?(N=E,E=null):N=E.sibling;var L=f(w,E,T.value,x);if(L===null){E===null&&(E=N);break}t&&E&&L.alternate===null&&e(w,E),y=i(L,y,j),b===null?k=L:b.sibling=L,b=L,E=N}if(T.done)return n(w,E),ue&&ir(w,j),k;if(E===null){for(;!T.done;j++,T=g.next())T=h(w,T.value,x),T!==null&&(y=i(T,y,j),b===null?k=T:b.sibling=T,b=T);return ue&&ir(w,j),k}for(E=r(w,E);!T.done;j++,T=g.next())T=m(E,w,j,T.value,x),T!==null&&(t&&T.alternate!==null&&E.delete(T.key===null?j:T.key),y=i(T,y,j),b===null?k=T:b.sibling=T,b=T);return t&&E.forEach(function(F){return e(w,F)}),ue&&ir(w,j),k}function _(w,y,g,x){if(typeof g=="object"&&g!==null&&g.type===Kr&&g.key===null&&(g=g.props.children),typeof g=="object"&&g!==null){switch(g.$$typeof){case oa:e:{for(var k=g.key,b=y;b!==null;){if(b.key===k){if(k=g.type,k===Kr){if(b.tag===7){n(w,b.sibling),y=s(b,g.props.children),y.return=w,w=y;break e}}else if(b.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===_n&&Bh(k)===b.type){n(w,b.sibling),y=s(b,g.props),y.ref=Ls(w,b,g),y.return=w,w=y;break e}n(w,b);break}else e(w,b);b=b.sibling}g.type===Kr?(y=vr(g.props.children,w.mode,x,g.key),y.return=w,w=y):(x=Ja(g.type,g.key,g.props,null,w.mode,x),x.ref=Ls(w,y,g),x.return=w,w=x)}return a(w);case qr:e:{for(b=g.key;y!==null;){if(y.key===b)if(y.tag===4&&y.stateNode.containerInfo===g.containerInfo&&y.stateNode.implementation===g.implementation){n(w,y.sibling),y=s(y,g.children||[]),y.return=w,w=y;break e}else{n(w,y);break}else e(w,y);y=y.sibling}y=Jl(g,w.mode,x),y.return=w,w=y}return a(w);case _n:return b=g._init,_(w,y,b(g._payload),x)}if(Ks(g))return p(w,y,g,x);if(Rs(g))return v(w,y,g,x);va(w,g)}return typeof g=="string"&&g!==""||typeof g=="number"?(g=""+g,y!==null&&y.tag===6?(n(w,y.sibling),y=s(y,g),y.return=w,w=y):(n(w,y),y=Xl(g,w.mode,x),y.return=w,w=y),a(w)):n(w,y)}return _}var vs=xg(!0),bg=xg(!1),go=Qn(null),yo=null,ts=null,ad=null;function od(){ad=ts=yo=null}function ld(t){var e=go.current;ce(go),t._currentValue=e}function Yc(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function us(t,e){yo=t,ad=ts=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Je=!0),t.firstContext=null)}function _t(t){var e=t._currentValue;if(ad!==t)if(t={context:t,memoizedValue:e,next:null},ts===null){if(yo===null)throw Error(R(308));ts=t,yo.dependencies={lanes:0,firstContext:t}}else ts=ts.next=t;return e}var fr=null;function cd(t){fr===null?fr=[t]:fr.push(t)}function kg(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,cd(e)):(n.next=s.next,s.next=n),e.interleaved=n,cn(t,r)}function cn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var xn=!1;function ud(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Sg(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function an(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function In(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Y&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,cn(t,n)}return s=r.interleaved,s===null?(e.next=e,cd(r)):(e.next=s.next,s.next=e),r.interleaved=e,cn(t,n)}function qa(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Gu(t,n)}}function Wh(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=a:i=i.next=a,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function vo(t,e,n,r){var s=t.updateQueue;xn=!1;var i=s.firstBaseUpdate,a=s.lastBaseUpdate,o=s.shared.pending;if(o!==null){s.shared.pending=null;var l=o,c=l.next;l.next=null,a===null?i=c:a.next=c,a=l;var u=t.alternate;u!==null&&(u=u.updateQueue,o=u.lastBaseUpdate,o!==a&&(o===null?u.firstBaseUpdate=c:o.next=c,u.lastBaseUpdate=l))}if(i!==null){var h=s.baseState;a=0,u=c=l=null,o=i;do{var f=o.lane,m=o.eventTime;if((r&f)===f){u!==null&&(u=u.next={eventTime:m,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var p=t,v=o;switch(f=e,m=n,v.tag){case 1:if(p=v.payload,typeof p=="function"){h=p.call(m,h,f);break e}h=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=v.payload,f=typeof p=="function"?p.call(m,h,f):p,f==null)break e;h=me({},h,f);break e;case 2:xn=!0}}o.callback!==null&&o.lane!==0&&(t.flags|=64,f=s.effects,f===null?s.effects=[o]:f.push(o))}else m={eventTime:m,lane:f,tag:o.tag,payload:o.payload,callback:o.callback,next:null},u===null?(c=u=m,l=h):u=u.next=m,a|=f;if(o=o.next,o===null){if(o=s.shared.pending,o===null)break;f=o,o=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(!0);if(u===null&&(l=h),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=u,e=s.shared.interleaved,e!==null){s=e;do a|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Sr|=a,t.lanes=a,t.memoizedState=h}}function Hh(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(R(191,s));s.call(r)}}}var na={},Kt=Qn(na),Oi=Qn(na),Ri=Qn(na);function pr(t){if(t===na)throw Error(R(174));return t}function dd(t,e){switch(se(Ri,e),se(Oi,t),se(Kt,na),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Pc(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Pc(e,t)}ce(Kt),se(Kt,e)}function ws(){ce(Kt),ce(Oi),ce(Ri)}function Eg(t){pr(Ri.current);var e=pr(Kt.current),n=Pc(e,t.type);e!==n&&(se(Oi,t),se(Kt,n))}function hd(t){Oi.current===t&&(ce(Kt),ce(Oi))}var he=Qn(0);function wo(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Vl=[];function fd(){for(var t=0;t<Vl.length;t++)Vl[t]._workInProgressVersionPrimary=null;Vl.length=0}var Ka=hn.ReactCurrentDispatcher,ql=hn.ReactCurrentBatchConfig,kr=0,fe=null,Ee=null,Te=null,_o=!1,li=!1,Ai=0,p_=0;function $e(){throw Error(R(321))}function pd(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!At(t[n],e[n]))return!1;return!0}function md(t,e,n,r,s,i){if(kr=i,fe=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Ka.current=t===null||t.memoizedState===null?v_:w_,t=n(r,s),li){i=0;do{if(li=!1,Ai=0,25<=i)throw Error(R(301));i+=1,Te=Ee=null,e.updateQueue=null,Ka.current=__,t=n(r,s)}while(li)}if(Ka.current=xo,e=Ee!==null&&Ee.next!==null,kr=0,Te=Ee=fe=null,_o=!1,e)throw Error(R(300));return t}function gd(){var t=Ai!==0;return Ai=0,t}function Ut(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Te===null?fe.memoizedState=Te=t:Te=Te.next=t,Te}function xt(){if(Ee===null){var t=fe.alternate;t=t!==null?t.memoizedState:null}else t=Ee.next;var e=Te===null?fe.memoizedState:Te.next;if(e!==null)Te=e,Ee=t;else{if(t===null)throw Error(R(310));Ee=t,t={memoizedState:Ee.memoizedState,baseState:Ee.baseState,baseQueue:Ee.baseQueue,queue:Ee.queue,next:null},Te===null?fe.memoizedState=Te=t:Te=Te.next=t}return Te}function Mi(t,e){return typeof e=="function"?e(t):e}function Kl(t){var e=xt(),n=e.queue;if(n===null)throw Error(R(311));n.lastRenderedReducer=t;var r=Ee,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var a=s.next;s.next=i.next,i.next=a}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var o=a=null,l=null,c=i;do{var u=c.lane;if((kr&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var h={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(o=l=h,a=r):l=l.next=h,fe.lanes|=u,Sr|=u}c=c.next}while(c!==null&&c!==i);l===null?a=r:l.next=o,At(r,e.memoizedState)||(Je=!0),e.memoizedState=r,e.baseState=a,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,fe.lanes|=i,Sr|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Yl(t){var e=xt(),n=e.queue;if(n===null)throw Error(R(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var a=s=s.next;do i=t(i,a.action),a=a.next;while(a!==s);At(i,e.memoizedState)||(Je=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function jg(){}function Cg(t,e){var n=fe,r=xt(),s=e(),i=!At(r.memoizedState,s);if(i&&(r.memoizedState=s,Je=!0),r=r.queue,yd(Ng.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Te!==null&&Te.memoizedState.tag&1){if(n.flags|=2048,Di(9,Tg.bind(null,n,r,s,e),void 0,null),Ne===null)throw Error(R(349));kr&30||Pg(n,e,s)}return s}function Pg(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=fe.updateQueue,e===null?(e={lastEffect:null,stores:null},fe.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Tg(t,e,n,r){e.value=n,e.getSnapshot=r,Og(e)&&Rg(t)}function Ng(t,e,n){return n(function(){Og(e)&&Rg(t)})}function Og(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!At(t,n)}catch{return!0}}function Rg(t){var e=cn(t,1);e!==null&&Ot(e,t,1,-1)}function Vh(t){var e=Ut();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Mi,lastRenderedState:t},e.queue=t,t=t.dispatch=y_.bind(null,fe,t),[e.memoizedState,t]}function Di(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=fe.updateQueue,e===null?(e={lastEffect:null,stores:null},fe.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Ag(){return xt().memoizedState}function Ya(t,e,n,r){var s=Ut();fe.flags|=t,s.memoizedState=Di(1|e,n,void 0,r===void 0?null:r)}function nl(t,e,n,r){var s=xt();r=r===void 0?null:r;var i=void 0;if(Ee!==null){var a=Ee.memoizedState;if(i=a.destroy,r!==null&&pd(r,a.deps)){s.memoizedState=Di(e,n,i,r);return}}fe.flags|=t,s.memoizedState=Di(1|e,n,i,r)}function qh(t,e){return Ya(8390656,8,t,e)}function yd(t,e){return nl(2048,8,t,e)}function Mg(t,e){return nl(4,2,t,e)}function Dg(t,e){return nl(4,4,t,e)}function Ig(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Lg(t,e,n){return n=n!=null?n.concat([t]):null,nl(4,4,Ig.bind(null,e,t),n)}function vd(){}function zg(t,e){var n=xt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&pd(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function $g(t,e){var n=xt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&pd(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Ug(t,e,n){return kr&21?(At(n,e)||(n=Vm(),fe.lanes|=n,Sr|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Je=!0),t.memoizedState=n)}function m_(t,e){var n=Z;Z=n!==0&&4>n?n:4,t(!0);var r=ql.transition;ql.transition={};try{t(!1),e()}finally{Z=n,ql.transition=r}}function Fg(){return xt().memoizedState}function g_(t,e,n){var r=zn(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Bg(t))Wg(e,n);else if(n=kg(t,e,n,r),n!==null){var s=Ve();Ot(n,t,r,s),Hg(n,e,r)}}function y_(t,e,n){var r=zn(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Bg(t))Wg(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var a=e.lastRenderedState,o=i(a,n);if(s.hasEagerState=!0,s.eagerState=o,At(o,a)){var l=e.interleaved;l===null?(s.next=s,cd(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}n=kg(t,e,s,r),n!==null&&(s=Ve(),Ot(n,t,r,s),Hg(n,e,r))}}function Bg(t){var e=t.alternate;return t===fe||e!==null&&e===fe}function Wg(t,e){li=_o=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Hg(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Gu(t,n)}}var xo={readContext:_t,useCallback:$e,useContext:$e,useEffect:$e,useImperativeHandle:$e,useInsertionEffect:$e,useLayoutEffect:$e,useMemo:$e,useReducer:$e,useRef:$e,useState:$e,useDebugValue:$e,useDeferredValue:$e,useTransition:$e,useMutableSource:$e,useSyncExternalStore:$e,useId:$e,unstable_isNewReconciler:!1},v_={readContext:_t,useCallback:function(t,e){return Ut().memoizedState=[t,e===void 0?null:e],t},useContext:_t,useEffect:qh,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Ya(4194308,4,Ig.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Ya(4194308,4,t,e)},useInsertionEffect:function(t,e){return Ya(4,2,t,e)},useMemo:function(t,e){var n=Ut();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Ut();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=g_.bind(null,fe,t),[r.memoizedState,t]},useRef:function(t){var e=Ut();return t={current:t},e.memoizedState=t},useState:Vh,useDebugValue:vd,useDeferredValue:function(t){return Ut().memoizedState=t},useTransition:function(){var t=Vh(!1),e=t[0];return t=m_.bind(null,t[1]),Ut().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=fe,s=Ut();if(ue){if(n===void 0)throw Error(R(407));n=n()}else{if(n=e(),Ne===null)throw Error(R(349));kr&30||Pg(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,qh(Ng.bind(null,r,i,t),[t]),r.flags|=2048,Di(9,Tg.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Ut(),e=Ne.identifierPrefix;if(ue){var n=sn,r=rn;n=(r&~(1<<32-Nt(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Ai++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=p_++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},w_={readContext:_t,useCallback:zg,useContext:_t,useEffect:yd,useImperativeHandle:Lg,useInsertionEffect:Mg,useLayoutEffect:Dg,useMemo:$g,useReducer:Kl,useRef:Ag,useState:function(){return Kl(Mi)},useDebugValue:vd,useDeferredValue:function(t){var e=xt();return Ug(e,Ee.memoizedState,t)},useTransition:function(){var t=Kl(Mi)[0],e=xt().memoizedState;return[t,e]},useMutableSource:jg,useSyncExternalStore:Cg,useId:Fg,unstable_isNewReconciler:!1},__={readContext:_t,useCallback:zg,useContext:_t,useEffect:yd,useImperativeHandle:Lg,useInsertionEffect:Mg,useLayoutEffect:Dg,useMemo:$g,useReducer:Yl,useRef:Ag,useState:function(){return Yl(Mi)},useDebugValue:vd,useDeferredValue:function(t){var e=xt();return Ee===null?e.memoizedState=t:Ug(e,Ee.memoizedState,t)},useTransition:function(){var t=Yl(Mi)[0],e=xt().memoizedState;return[t,e]},useMutableSource:jg,useSyncExternalStore:Cg,useId:Fg,unstable_isNewReconciler:!1};function St(t,e){if(t&&t.defaultProps){e=me({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Gc(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:me({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var rl={isMounted:function(t){return(t=t._reactInternals)?Or(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Ve(),s=zn(t),i=an(r,s);i.payload=e,n!=null&&(i.callback=n),e=In(t,i,s),e!==null&&(Ot(e,t,s,r),qa(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Ve(),s=zn(t),i=an(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=In(t,i,s),e!==null&&(Ot(e,t,s,r),qa(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Ve(),r=zn(t),s=an(n,r);s.tag=2,e!=null&&(s.callback=e),e=In(t,s,r),e!==null&&(Ot(e,t,r,n),qa(e,t,r))}};function Kh(t,e,n,r,s,i,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,a):e.prototype&&e.prototype.isPureReactComponent?!Ci(n,r)||!Ci(s,i):!0}function Vg(t,e,n){var r=!1,s=Hn,i=e.contextType;return typeof i=="object"&&i!==null?i=_t(i):(s=tt(e)?xr:We.current,r=e.contextTypes,i=(r=r!=null)?gs(t,s):Hn),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=rl,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function Yh(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&rl.enqueueReplaceState(e,e.state,null)}function Qc(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},ud(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=_t(i):(i=tt(e)?xr:We.current,s.context=gs(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Gc(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&rl.enqueueReplaceState(s,s.state,null),vo(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function _s(t,e){try{var n="",r=e;do n+=Y0(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Gl(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Xc(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var x_=typeof WeakMap=="function"?WeakMap:Map;function qg(t,e,n){n=an(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){ko||(ko=!0,ou=r),Xc(t,e)},n}function Kg(t,e,n){n=an(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Xc(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Xc(t,e),typeof r!="function"&&(Ln===null?Ln=new Set([this]):Ln.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function Gh(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new x_;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=D_.bind(null,t,e,n),e.then(t,t))}function Qh(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Xh(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=an(-1,1),e.tag=2,In(n,e,1))),n.lanes|=1),t)}var b_=hn.ReactCurrentOwner,Je=!1;function He(t,e,n,r){e.child=t===null?bg(e,null,n,r):vs(e,t.child,n,r)}function Jh(t,e,n,r,s){n=n.render;var i=e.ref;return us(e,s),r=md(t,e,n,r,i,s),n=gd(),t!==null&&!Je?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,un(t,e,s)):(ue&&n&&rd(e),e.flags|=1,He(t,e,r,s),e.child)}function Zh(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!jd(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,Yg(t,e,i,r,s)):(t=Ja(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var a=i.memoizedProps;if(n=n.compare,n=n!==null?n:Ci,n(a,r)&&t.ref===e.ref)return un(t,e,s)}return e.flags|=1,t=$n(i,r),t.ref=e.ref,t.return=e,e.child=t}function Yg(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Ci(i,r)&&t.ref===e.ref)if(Je=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Je=!0);else return e.lanes=t.lanes,un(t,e,s)}return Jc(t,e,n,r,s)}function Gg(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},se(rs,at),at|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,se(rs,at),at|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,se(rs,at),at|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,se(rs,at),at|=r;return He(t,e,s,n),e.child}function Qg(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Jc(t,e,n,r,s){var i=tt(n)?xr:We.current;return i=gs(e,i),us(e,s),n=md(t,e,n,r,i,s),r=gd(),t!==null&&!Je?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,un(t,e,s)):(ue&&r&&rd(e),e.flags|=1,He(t,e,n,s),e.child)}function ef(t,e,n,r,s){if(tt(n)){var i=!0;fo(e)}else i=!1;if(us(e,s),e.stateNode===null)Ga(t,e),Vg(e,n,r),Qc(e,n,r,s),r=!0;else if(t===null){var a=e.stateNode,o=e.memoizedProps;a.props=o;var l=a.context,c=n.contextType;typeof c=="object"&&c!==null?c=_t(c):(c=tt(n)?xr:We.current,c=gs(e,c));var u=n.getDerivedStateFromProps,h=typeof u=="function"||typeof a.getSnapshotBeforeUpdate=="function";h||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==r||l!==c)&&Yh(e,a,r,c),xn=!1;var f=e.memoizedState;a.state=f,vo(e,r,a,s),l=e.memoizedState,o!==r||f!==l||et.current||xn?(typeof u=="function"&&(Gc(e,n,u,r),l=e.memoizedState),(o=xn||Kh(e,n,o,r,f,l,c))?(h||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),a.props=r,a.state=l,a.context=c,r=o):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{a=e.stateNode,Sg(t,e),o=e.memoizedProps,c=e.type===e.elementType?o:St(e.type,o),a.props=c,h=e.pendingProps,f=a.context,l=n.contextType,typeof l=="object"&&l!==null?l=_t(l):(l=tt(n)?xr:We.current,l=gs(e,l));var m=n.getDerivedStateFromProps;(u=typeof m=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==h||f!==l)&&Yh(e,a,r,l),xn=!1,f=e.memoizedState,a.state=f,vo(e,r,a,s);var p=e.memoizedState;o!==h||f!==p||et.current||xn?(typeof m=="function"&&(Gc(e,n,m,r),p=e.memoizedState),(c=xn||Kh(e,n,c,r,f,p,l)||!1)?(u||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,p,l),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,p,l)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=p),a.props=r,a.state=p,a.context=l,r=c):(typeof a.componentDidUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return Zc(t,e,n,r,i,s)}function Zc(t,e,n,r,s,i){Qg(t,e);var a=(e.flags&128)!==0;if(!r&&!a)return s&&$h(e,n,!1),un(t,e,i);r=e.stateNode,b_.current=e;var o=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&a?(e.child=vs(e,t.child,null,i),e.child=vs(e,null,o,i)):He(t,e,o,i),e.memoizedState=r.state,s&&$h(e,n,!0),e.child}function Xg(t){var e=t.stateNode;e.pendingContext?zh(t,e.pendingContext,e.pendingContext!==e.context):e.context&&zh(t,e.context,!1),dd(t,e.containerInfo)}function tf(t,e,n,r,s){return ys(),id(s),e.flags|=256,He(t,e,n,r),e.child}var eu={dehydrated:null,treeContext:null,retryLane:0};function tu(t){return{baseLanes:t,cachePool:null,transitions:null}}function Jg(t,e,n){var r=e.pendingProps,s=he.current,i=!1,a=(e.flags&128)!==0,o;if((o=a)||(o=t!==null&&t.memoizedState===null?!1:(s&2)!==0),o?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),se(he,s&1),t===null)return Kc(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=r.children,t=r.fallback,i?(r=e.mode,i=e.child,a={mode:"hidden",children:a},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=a):i=al(a,r,0,null),t=vr(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=tu(n),e.memoizedState=eu,t):wd(e,a));if(s=t.memoizedState,s!==null&&(o=s.dehydrated,o!==null))return k_(t,e,a,r,o,s,n);if(i){i=r.fallback,a=e.mode,s=t.child,o=s.sibling;var l={mode:"hidden",children:r.children};return!(a&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=$n(s,l),r.subtreeFlags=s.subtreeFlags&14680064),o!==null?i=$n(o,i):(i=vr(i,a,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,a=t.child.memoizedState,a=a===null?tu(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},i.memoizedState=a,i.childLanes=t.childLanes&~n,e.memoizedState=eu,r}return i=t.child,t=i.sibling,r=$n(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function wd(t,e){return e=al({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function wa(t,e,n,r){return r!==null&&id(r),vs(e,t.child,null,n),t=wd(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function k_(t,e,n,r,s,i,a){if(n)return e.flags&256?(e.flags&=-257,r=Gl(Error(R(422))),wa(t,e,a,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=al({mode:"visible",children:r.children},s,0,null),i=vr(i,s,a,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&vs(e,t.child,null,a),e.child.memoizedState=tu(a),e.memoizedState=eu,i);if(!(e.mode&1))return wa(t,e,a,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var o=r.dgst;return r=o,i=Error(R(419)),r=Gl(i,r,void 0),wa(t,e,a,r)}if(o=(a&t.childLanes)!==0,Je||o){if(r=Ne,r!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|a)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,cn(t,s),Ot(r,t,s,-1))}return Ed(),r=Gl(Error(R(421))),wa(t,e,a,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=I_.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,ct=Dn(s.nextSibling),ut=e,ue=!0,Pt=null,t!==null&&(mt[gt++]=rn,mt[gt++]=sn,mt[gt++]=br,rn=t.id,sn=t.overflow,br=e),e=wd(e,r.children),e.flags|=4096,e)}function nf(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Yc(t.return,e,n)}function Ql(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function Zg(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(He(t,e,r.children,n),r=he.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&nf(t,n,e);else if(t.tag===19)nf(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(se(he,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&wo(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Ql(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&wo(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Ql(e,!0,n,null,i);break;case"together":Ql(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ga(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function un(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Sr|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(R(153));if(e.child!==null){for(t=e.child,n=$n(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=$n(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function S_(t,e,n){switch(e.tag){case 3:Xg(e),ys();break;case 5:Eg(e);break;case 1:tt(e.type)&&fo(e);break;case 4:dd(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;se(go,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(se(he,he.current&1),e.flags|=128,null):n&e.child.childLanes?Jg(t,e,n):(se(he,he.current&1),t=un(t,e,n),t!==null?t.sibling:null);se(he,he.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Zg(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),se(he,he.current),r)break;return null;case 22:case 23:return e.lanes=0,Gg(t,e,n)}return un(t,e,n)}var ey,nu,ty,ny;ey=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};nu=function(){};ty=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,pr(Kt.current);var i=null;switch(n){case"input":s=Sc(t,s),r=Sc(t,r),i=[];break;case"select":s=me({},s,{value:void 0}),r=me({},r,{value:void 0}),i=[];break;case"textarea":s=Cc(t,s),r=Cc(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=uo)}Tc(n,r);var a;n=null;for(c in s)if(!r.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var o=s[c];for(a in o)o.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(_i.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in r){var l=r[c];if(o=s!=null?s[c]:void 0,r.hasOwnProperty(c)&&l!==o&&(l!=null||o!=null))if(c==="style")if(o){for(a in o)!o.hasOwnProperty(a)||l&&l.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in l)l.hasOwnProperty(a)&&o[a]!==l[a]&&(n||(n={}),n[a]=l[a])}else n||(i||(i=[]),i.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,o=o?o.__html:void 0,l!=null&&o!==l&&(i=i||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(_i.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&ie("scroll",t),i||o===l||(i=[])):(i=i||[]).push(c,l))}n&&(i=i||[]).push("style",n);var c=i;(e.updateQueue=c)&&(e.flags|=4)}};ny=function(t,e,n,r){n!==r&&(e.flags|=4)};function zs(t,e){if(!ue)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Ue(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function E_(t,e,n){var r=e.pendingProps;switch(sd(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ue(e),null;case 1:return tt(e.type)&&ho(),Ue(e),null;case 3:return r=e.stateNode,ws(),ce(et),ce(We),fd(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(ya(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Pt!==null&&(uu(Pt),Pt=null))),nu(t,e),Ue(e),null;case 5:hd(e);var s=pr(Ri.current);if(n=e.type,t!==null&&e.stateNode!=null)ty(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(R(166));return Ue(e),null}if(t=pr(Kt.current),ya(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Wt]=e,r[Ni]=i,t=(e.mode&1)!==0,n){case"dialog":ie("cancel",r),ie("close",r);break;case"iframe":case"object":case"embed":ie("load",r);break;case"video":case"audio":for(s=0;s<Gs.length;s++)ie(Gs[s],r);break;case"source":ie("error",r);break;case"img":case"image":case"link":ie("error",r),ie("load",r);break;case"details":ie("toggle",r);break;case"input":dh(r,i),ie("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},ie("invalid",r);break;case"textarea":fh(r,i),ie("invalid",r)}Tc(n,i),s=null;for(var a in i)if(i.hasOwnProperty(a)){var o=i[a];a==="children"?typeof o=="string"?r.textContent!==o&&(i.suppressHydrationWarning!==!0&&ga(r.textContent,o,t),s=["children",o]):typeof o=="number"&&r.textContent!==""+o&&(i.suppressHydrationWarning!==!0&&ga(r.textContent,o,t),s=["children",""+o]):_i.hasOwnProperty(a)&&o!=null&&a==="onScroll"&&ie("scroll",r)}switch(n){case"input":la(r),hh(r,i,!0);break;case"textarea":la(r),ph(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=uo)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Nm(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=a.createElement(n,{is:r.is}):(t=a.createElement(n),n==="select"&&(a=t,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):t=a.createElementNS(t,n),t[Wt]=e,t[Ni]=r,ey(t,e,!1,!1),e.stateNode=t;e:{switch(a=Nc(n,r),n){case"dialog":ie("cancel",t),ie("close",t),s=r;break;case"iframe":case"object":case"embed":ie("load",t),s=r;break;case"video":case"audio":for(s=0;s<Gs.length;s++)ie(Gs[s],t);s=r;break;case"source":ie("error",t),s=r;break;case"img":case"image":case"link":ie("error",t),ie("load",t),s=r;break;case"details":ie("toggle",t),s=r;break;case"input":dh(t,r),s=Sc(t,r),ie("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=me({},r,{value:void 0}),ie("invalid",t);break;case"textarea":fh(t,r),s=Cc(t,r),ie("invalid",t);break;default:s=r}Tc(n,s),o=s;for(i in o)if(o.hasOwnProperty(i)){var l=o[i];i==="style"?Am(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&Om(t,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&xi(t,l):typeof l=="number"&&xi(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(_i.hasOwnProperty(i)?l!=null&&i==="onScroll"&&ie("scroll",t):l!=null&&Wu(t,i,l,a))}switch(n){case"input":la(t),hh(t,r,!1);break;case"textarea":la(t),ph(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Wn(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?as(t,!!r.multiple,i,!1):r.defaultValue!=null&&as(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=uo)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ue(e),null;case 6:if(t&&e.stateNode!=null)ny(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(R(166));if(n=pr(Ri.current),pr(Kt.current),ya(e)){if(r=e.stateNode,n=e.memoizedProps,r[Wt]=e,(i=r.nodeValue!==n)&&(t=ut,t!==null))switch(t.tag){case 3:ga(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&ga(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Wt]=e,e.stateNode=r}return Ue(e),null;case 13:if(ce(he),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ue&&ct!==null&&e.mode&1&&!(e.flags&128))_g(),ys(),e.flags|=98560,i=!1;else if(i=ya(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(R(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(R(317));i[Wt]=e}else ys(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ue(e),i=!1}else Pt!==null&&(uu(Pt),Pt=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||he.current&1?je===0&&(je=3):Ed())),e.updateQueue!==null&&(e.flags|=4),Ue(e),null);case 4:return ws(),nu(t,e),t===null&&Pi(e.stateNode.containerInfo),Ue(e),null;case 10:return ld(e.type._context),Ue(e),null;case 17:return tt(e.type)&&ho(),Ue(e),null;case 19:if(ce(he),i=e.memoizedState,i===null)return Ue(e),null;if(r=(e.flags&128)!==0,a=i.rendering,a===null)if(r)zs(i,!1);else{if(je!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=wo(t),a!==null){for(e.flags|=128,zs(i,!1),r=a.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,a=i.alternate,a===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,t=a.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return se(he,he.current&1|2),e.child}t=t.sibling}i.tail!==null&&ve()>xs&&(e.flags|=128,r=!0,zs(i,!1),e.lanes=4194304)}else{if(!r)if(t=wo(a),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),zs(i,!0),i.tail===null&&i.tailMode==="hidden"&&!a.alternate&&!ue)return Ue(e),null}else 2*ve()-i.renderingStartTime>xs&&n!==1073741824&&(e.flags|=128,r=!0,zs(i,!1),e.lanes=4194304);i.isBackwards?(a.sibling=e.child,e.child=a):(n=i.last,n!==null?n.sibling=a:e.child=a,i.last=a)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=ve(),e.sibling=null,n=he.current,se(he,r?n&1|2:n&1),e):(Ue(e),null);case 22:case 23:return Sd(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?at&1073741824&&(Ue(e),e.subtreeFlags&6&&(e.flags|=8192)):Ue(e),null;case 24:return null;case 25:return null}throw Error(R(156,e.tag))}function j_(t,e){switch(sd(e),e.tag){case 1:return tt(e.type)&&ho(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ws(),ce(et),ce(We),fd(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return hd(e),null;case 13:if(ce(he),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(R(340));ys()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ce(he),null;case 4:return ws(),null;case 10:return ld(e.type._context),null;case 22:case 23:return Sd(),null;case 24:return null;default:return null}}var _a=!1,Fe=!1,C_=typeof WeakSet=="function"?WeakSet:Set,M=null;function ns(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){ye(t,e,r)}else n.current=null}function ru(t,e,n){try{n()}catch(r){ye(t,e,r)}}var rf=!1;function P_(t,e){if(Uc=oo,t=og(),nd(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var a=0,o=-1,l=-1,c=0,u=0,h=t,f=null;t:for(;;){for(var m;h!==n||s!==0&&h.nodeType!==3||(o=a+s),h!==i||r!==0&&h.nodeType!==3||(l=a+r),h.nodeType===3&&(a+=h.nodeValue.length),(m=h.firstChild)!==null;)f=h,h=m;for(;;){if(h===t)break t;if(f===n&&++c===s&&(o=a),f===i&&++u===r&&(l=a),(m=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=m}n=o===-1||l===-1?null:{start:o,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Fc={focusedElem:t,selectionRange:n},oo=!1,M=e;M!==null;)if(e=M,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,M=t;else for(;M!==null;){e=M;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var v=p.memoizedProps,_=p.memoizedState,w=e.stateNode,y=w.getSnapshotBeforeUpdate(e.elementType===e.type?v:St(e.type,v),_);w.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var g=e.stateNode.containerInfo;g.nodeType===1?g.textContent="":g.nodeType===9&&g.documentElement&&g.removeChild(g.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(R(163))}}catch(x){ye(e,e.return,x)}if(t=e.sibling,t!==null){t.return=e.return,M=t;break}M=e.return}return p=rf,rf=!1,p}function ci(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&ru(e,n,i)}s=s.next}while(s!==r)}}function sl(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function su(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function ry(t){var e=t.alternate;e!==null&&(t.alternate=null,ry(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Wt],delete e[Ni],delete e[Hc],delete e[u_],delete e[d_])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function sy(t){return t.tag===5||t.tag===3||t.tag===4}function sf(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||sy(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function iu(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=uo));else if(r!==4&&(t=t.child,t!==null))for(iu(t,e,n),t=t.sibling;t!==null;)iu(t,e,n),t=t.sibling}function au(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(au(t,e,n),t=t.sibling;t!==null;)au(t,e,n),t=t.sibling}var De=null,jt=!1;function yn(t,e,n){for(n=n.child;n!==null;)iy(t,e,n),n=n.sibling}function iy(t,e,n){if(qt&&typeof qt.onCommitFiberUnmount=="function")try{qt.onCommitFiberUnmount(Qo,n)}catch{}switch(n.tag){case 5:Fe||ns(n,e);case 6:var r=De,s=jt;De=null,yn(t,e,n),De=r,jt=s,De!==null&&(jt?(t=De,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):De.removeChild(n.stateNode));break;case 18:De!==null&&(jt?(t=De,n=n.stateNode,t.nodeType===8?Wl(t.parentNode,n):t.nodeType===1&&Wl(t,n),Ei(t)):Wl(De,n.stateNode));break;case 4:r=De,s=jt,De=n.stateNode.containerInfo,jt=!0,yn(t,e,n),De=r,jt=s;break;case 0:case 11:case 14:case 15:if(!Fe&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,a=i.destroy;i=i.tag,a!==void 0&&(i&2||i&4)&&ru(n,e,a),s=s.next}while(s!==r)}yn(t,e,n);break;case 1:if(!Fe&&(ns(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){ye(n,e,o)}yn(t,e,n);break;case 21:yn(t,e,n);break;case 22:n.mode&1?(Fe=(r=Fe)||n.memoizedState!==null,yn(t,e,n),Fe=r):yn(t,e,n);break;default:yn(t,e,n)}}function af(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new C_),e.forEach(function(r){var s=L_.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function bt(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,a=e,o=a;e:for(;o!==null;){switch(o.tag){case 5:De=o.stateNode,jt=!1;break e;case 3:De=o.stateNode.containerInfo,jt=!0;break e;case 4:De=o.stateNode.containerInfo,jt=!0;break e}o=o.return}if(De===null)throw Error(R(160));iy(i,a,s),De=null,jt=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(c){ye(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)ay(e,t),e=e.sibling}function ay(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(bt(e,t),Lt(t),r&4){try{ci(3,t,t.return),sl(3,t)}catch(v){ye(t,t.return,v)}try{ci(5,t,t.return)}catch(v){ye(t,t.return,v)}}break;case 1:bt(e,t),Lt(t),r&512&&n!==null&&ns(n,n.return);break;case 5:if(bt(e,t),Lt(t),r&512&&n!==null&&ns(n,n.return),t.flags&32){var s=t.stateNode;try{xi(s,"")}catch(v){ye(t,t.return,v)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,a=n!==null?n.memoizedProps:i,o=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{o==="input"&&i.type==="radio"&&i.name!=null&&Pm(s,i),Nc(o,a);var c=Nc(o,i);for(a=0;a<l.length;a+=2){var u=l[a],h=l[a+1];u==="style"?Am(s,h):u==="dangerouslySetInnerHTML"?Om(s,h):u==="children"?xi(s,h):Wu(s,u,h,c)}switch(o){case"input":Ec(s,i);break;case"textarea":Tm(s,i);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var m=i.value;m!=null?as(s,!!i.multiple,m,!1):f!==!!i.multiple&&(i.defaultValue!=null?as(s,!!i.multiple,i.defaultValue,!0):as(s,!!i.multiple,i.multiple?[]:"",!1))}s[Ni]=i}catch(v){ye(t,t.return,v)}}break;case 6:if(bt(e,t),Lt(t),r&4){if(t.stateNode===null)throw Error(R(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(v){ye(t,t.return,v)}}break;case 3:if(bt(e,t),Lt(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ei(e.containerInfo)}catch(v){ye(t,t.return,v)}break;case 4:bt(e,t),Lt(t);break;case 13:bt(e,t),Lt(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(bd=ve())),r&4&&af(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(Fe=(c=Fe)||u,bt(e,t),Fe=c):bt(e,t),Lt(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!u&&t.mode&1)for(M=t,u=t.child;u!==null;){for(h=M=u;M!==null;){switch(f=M,m=f.child,f.tag){case 0:case 11:case 14:case 15:ci(4,f,f.return);break;case 1:ns(f,f.return);var p=f.stateNode;if(typeof p.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(v){ye(r,n,v)}}break;case 5:ns(f,f.return);break;case 22:if(f.memoizedState!==null){lf(h);continue}}m!==null?(m.return=f,M=m):lf(h)}u=u.sibling}e:for(u=null,h=t;;){if(h.tag===5){if(u===null){u=h;try{s=h.stateNode,c?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(o=h.stateNode,l=h.memoizedProps.style,a=l!=null&&l.hasOwnProperty("display")?l.display:null,o.style.display=Rm("display",a))}catch(v){ye(t,t.return,v)}}}else if(h.tag===6){if(u===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(v){ye(t,t.return,v)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;u===h&&(u=null),h=h.return}u===h&&(u=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:bt(e,t),Lt(t),r&4&&af(t);break;case 21:break;default:bt(e,t),Lt(t)}}function Lt(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(sy(n)){var r=n;break e}n=n.return}throw Error(R(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(xi(s,""),r.flags&=-33);var i=sf(t);au(t,i,s);break;case 3:case 4:var a=r.stateNode.containerInfo,o=sf(t);iu(t,o,a);break;default:throw Error(R(161))}}catch(l){ye(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function T_(t,e,n){M=t,oy(t)}function oy(t,e,n){for(var r=(t.mode&1)!==0;M!==null;){var s=M,i=s.child;if(s.tag===22&&r){var a=s.memoizedState!==null||_a;if(!a){var o=s.alternate,l=o!==null&&o.memoizedState!==null||Fe;o=_a;var c=Fe;if(_a=a,(Fe=l)&&!c)for(M=s;M!==null;)a=M,l=a.child,a.tag===22&&a.memoizedState!==null?cf(s):l!==null?(l.return=a,M=l):cf(s);for(;i!==null;)M=i,oy(i),i=i.sibling;M=s,_a=o,Fe=c}of(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,M=i):of(t)}}function of(t){for(;M!==null;){var e=M;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Fe||sl(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Fe)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:St(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Hh(e,i,r);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Hh(e,a,n)}break;case 5:var o=e.stateNode;if(n===null&&e.flags&4){n=o;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var h=u.dehydrated;h!==null&&Ei(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(R(163))}Fe||e.flags&512&&su(e)}catch(f){ye(e,e.return,f)}}if(e===t){M=null;break}if(n=e.sibling,n!==null){n.return=e.return,M=n;break}M=e.return}}function lf(t){for(;M!==null;){var e=M;if(e===t){M=null;break}var n=e.sibling;if(n!==null){n.return=e.return,M=n;break}M=e.return}}function cf(t){for(;M!==null;){var e=M;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{sl(4,e)}catch(l){ye(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(l){ye(e,s,l)}}var i=e.return;try{su(e)}catch(l){ye(e,i,l)}break;case 5:var a=e.return;try{su(e)}catch(l){ye(e,a,l)}}}catch(l){ye(e,e.return,l)}if(e===t){M=null;break}var o=e.sibling;if(o!==null){o.return=e.return,M=o;break}M=e.return}}var N_=Math.ceil,bo=hn.ReactCurrentDispatcher,_d=hn.ReactCurrentOwner,wt=hn.ReactCurrentBatchConfig,Y=0,Ne=null,xe=null,Le=0,at=0,rs=Qn(0),je=0,Ii=null,Sr=0,il=0,xd=0,ui=null,Qe=null,bd=0,xs=1/0,Jt=null,ko=!1,ou=null,Ln=null,xa=!1,Cn=null,So=0,di=0,lu=null,Qa=-1,Xa=0;function Ve(){return Y&6?ve():Qa!==-1?Qa:Qa=ve()}function zn(t){return t.mode&1?Y&2&&Le!==0?Le&-Le:f_.transition!==null?(Xa===0&&(Xa=Vm()),Xa):(t=Z,t!==0||(t=window.event,t=t===void 0?16:Jm(t.type)),t):1}function Ot(t,e,n,r){if(50<di)throw di=0,lu=null,Error(R(185));Zi(t,n,r),(!(Y&2)||t!==Ne)&&(t===Ne&&(!(Y&2)&&(il|=n),je===4&&Sn(t,Le)),nt(t,r),n===1&&Y===0&&!(e.mode&1)&&(xs=ve()+500,tl&&Xn()))}function nt(t,e){var n=t.callbackNode;fw(t,e);var r=ao(t,t===Ne?Le:0);if(r===0)n!==null&&yh(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&yh(n),e===1)t.tag===0?h_(uf.bind(null,t)):yg(uf.bind(null,t)),l_(function(){!(Y&6)&&Xn()}),n=null;else{switch(qm(r)){case 1:n=Yu;break;case 4:n=Wm;break;case 16:n=io;break;case 536870912:n=Hm;break;default:n=io}n=my(n,ly.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function ly(t,e){if(Qa=-1,Xa=0,Y&6)throw Error(R(327));var n=t.callbackNode;if(ds()&&t.callbackNode!==n)return null;var r=ao(t,t===Ne?Le:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Eo(t,r);else{e=r;var s=Y;Y|=2;var i=uy();(Ne!==t||Le!==e)&&(Jt=null,xs=ve()+500,yr(t,e));do try{A_();break}catch(o){cy(t,o)}while(!0);od(),bo.current=i,Y=s,xe!==null?e=0:(Ne=null,Le=0,e=je)}if(e!==0){if(e===2&&(s=Dc(t),s!==0&&(r=s,e=cu(t,s))),e===1)throw n=Ii,yr(t,0),Sn(t,r),nt(t,ve()),n;if(e===6)Sn(t,r);else{if(s=t.current.alternate,!(r&30)&&!O_(s)&&(e=Eo(t,r),e===2&&(i=Dc(t),i!==0&&(r=i,e=cu(t,i))),e===1))throw n=Ii,yr(t,0),Sn(t,r),nt(t,ve()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(R(345));case 2:ar(t,Qe,Jt);break;case 3:if(Sn(t,r),(r&130023424)===r&&(e=bd+500-ve(),10<e)){if(ao(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Ve(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Wc(ar.bind(null,t,Qe,Jt),e);break}ar(t,Qe,Jt);break;case 4:if(Sn(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var a=31-Nt(r);i=1<<a,a=e[a],a>s&&(s=a),r&=~i}if(r=s,r=ve()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*N_(r/1960))-r,10<r){t.timeoutHandle=Wc(ar.bind(null,t,Qe,Jt),r);break}ar(t,Qe,Jt);break;case 5:ar(t,Qe,Jt);break;default:throw Error(R(329))}}}return nt(t,ve()),t.callbackNode===n?ly.bind(null,t):null}function cu(t,e){var n=ui;return t.current.memoizedState.isDehydrated&&(yr(t,e).flags|=256),t=Eo(t,e),t!==2&&(e=Qe,Qe=n,e!==null&&uu(e)),t}function uu(t){Qe===null?Qe=t:Qe.push.apply(Qe,t)}function O_(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!At(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Sn(t,e){for(e&=~xd,e&=~il,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Nt(e),r=1<<n;t[n]=-1,e&=~r}}function uf(t){if(Y&6)throw Error(R(327));ds();var e=ao(t,0);if(!(e&1))return nt(t,ve()),null;var n=Eo(t,e);if(t.tag!==0&&n===2){var r=Dc(t);r!==0&&(e=r,n=cu(t,r))}if(n===1)throw n=Ii,yr(t,0),Sn(t,e),nt(t,ve()),n;if(n===6)throw Error(R(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,ar(t,Qe,Jt),nt(t,ve()),null}function kd(t,e){var n=Y;Y|=1;try{return t(e)}finally{Y=n,Y===0&&(xs=ve()+500,tl&&Xn())}}function Er(t){Cn!==null&&Cn.tag===0&&!(Y&6)&&ds();var e=Y;Y|=1;var n=wt.transition,r=Z;try{if(wt.transition=null,Z=1,t)return t()}finally{Z=r,wt.transition=n,Y=e,!(Y&6)&&Xn()}}function Sd(){at=rs.current,ce(rs)}function yr(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,o_(n)),xe!==null)for(n=xe.return;n!==null;){var r=n;switch(sd(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&ho();break;case 3:ws(),ce(et),ce(We),fd();break;case 5:hd(r);break;case 4:ws();break;case 13:ce(he);break;case 19:ce(he);break;case 10:ld(r.type._context);break;case 22:case 23:Sd()}n=n.return}if(Ne=t,xe=t=$n(t.current,null),Le=at=e,je=0,Ii=null,xd=il=Sr=0,Qe=ui=null,fr!==null){for(e=0;e<fr.length;e++)if(n=fr[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var a=i.next;i.next=s,r.next=a}n.pending=r}fr=null}return t}function cy(t,e){do{var n=xe;try{if(od(),Ka.current=xo,_o){for(var r=fe.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}_o=!1}if(kr=0,Te=Ee=fe=null,li=!1,Ai=0,_d.current=null,n===null||n.return===null){je=1,Ii=e,xe=null;break}e:{var i=t,a=n.return,o=n,l=e;if(e=Le,o.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=o,h=u.tag;if(!(u.mode&1)&&(h===0||h===11||h===15)){var f=u.alternate;f?(u.updateQueue=f.updateQueue,u.memoizedState=f.memoizedState,u.lanes=f.lanes):(u.updateQueue=null,u.memoizedState=null)}var m=Qh(a);if(m!==null){m.flags&=-257,Xh(m,a,o,i,e),m.mode&1&&Gh(i,c,e),e=m,l=c;var p=e.updateQueue;if(p===null){var v=new Set;v.add(l),e.updateQueue=v}else p.add(l);break e}else{if(!(e&1)){Gh(i,c,e),Ed();break e}l=Error(R(426))}}else if(ue&&o.mode&1){var _=Qh(a);if(_!==null){!(_.flags&65536)&&(_.flags|=256),Xh(_,a,o,i,e),id(_s(l,o));break e}}i=l=_s(l,o),je!==4&&(je=2),ui===null?ui=[i]:ui.push(i),i=a;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var w=qg(i,l,e);Wh(i,w);break e;case 1:o=l;var y=i.type,g=i.stateNode;if(!(i.flags&128)&&(typeof y.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(Ln===null||!Ln.has(g)))){i.flags|=65536,e&=-e,i.lanes|=e;var x=Kg(i,o,e);Wh(i,x);break e}}i=i.return}while(i!==null)}hy(n)}catch(k){e=k,xe===n&&n!==null&&(xe=n=n.return);continue}break}while(!0)}function uy(){var t=bo.current;return bo.current=xo,t===null?xo:t}function Ed(){(je===0||je===3||je===2)&&(je=4),Ne===null||!(Sr&268435455)&&!(il&268435455)||Sn(Ne,Le)}function Eo(t,e){var n=Y;Y|=2;var r=uy();(Ne!==t||Le!==e)&&(Jt=null,yr(t,e));do try{R_();break}catch(s){cy(t,s)}while(!0);if(od(),Y=n,bo.current=r,xe!==null)throw Error(R(261));return Ne=null,Le=0,je}function R_(){for(;xe!==null;)dy(xe)}function A_(){for(;xe!==null&&!sw();)dy(xe)}function dy(t){var e=py(t.alternate,t,at);t.memoizedProps=t.pendingProps,e===null?hy(t):xe=e,_d.current=null}function hy(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=j_(n,e),n!==null){n.flags&=32767,xe=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{je=6,xe=null;return}}else if(n=E_(n,e,at),n!==null){xe=n;return}if(e=e.sibling,e!==null){xe=e;return}xe=e=t}while(e!==null);je===0&&(je=5)}function ar(t,e,n){var r=Z,s=wt.transition;try{wt.transition=null,Z=1,M_(t,e,n,r)}finally{wt.transition=s,Z=r}return null}function M_(t,e,n,r){do ds();while(Cn!==null);if(Y&6)throw Error(R(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(R(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(pw(t,i),t===Ne&&(xe=Ne=null,Le=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||xa||(xa=!0,my(io,function(){return ds(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=wt.transition,wt.transition=null;var a=Z;Z=1;var o=Y;Y|=4,_d.current=null,P_(t,n),ay(n,t),e_(Fc),oo=!!Uc,Fc=Uc=null,t.current=n,T_(n),iw(),Y=o,Z=a,wt.transition=i}else t.current=n;if(xa&&(xa=!1,Cn=t,So=s),i=t.pendingLanes,i===0&&(Ln=null),lw(n.stateNode),nt(t,ve()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(ko)throw ko=!1,t=ou,ou=null,t;return So&1&&t.tag!==0&&ds(),i=t.pendingLanes,i&1?t===lu?di++:(di=0,lu=t):di=0,Xn(),null}function ds(){if(Cn!==null){var t=qm(So),e=wt.transition,n=Z;try{if(wt.transition=null,Z=16>t?16:t,Cn===null)var r=!1;else{if(t=Cn,Cn=null,So=0,Y&6)throw Error(R(331));var s=Y;for(Y|=4,M=t.current;M!==null;){var i=M,a=i.child;if(M.flags&16){var o=i.deletions;if(o!==null){for(var l=0;l<o.length;l++){var c=o[l];for(M=c;M!==null;){var u=M;switch(u.tag){case 0:case 11:case 15:ci(8,u,i)}var h=u.child;if(h!==null)h.return=u,M=h;else for(;M!==null;){u=M;var f=u.sibling,m=u.return;if(ry(u),u===c){M=null;break}if(f!==null){f.return=m,M=f;break}M=m}}}var p=i.alternate;if(p!==null){var v=p.child;if(v!==null){p.child=null;do{var _=v.sibling;v.sibling=null,v=_}while(v!==null)}}M=i}}if(i.subtreeFlags&2064&&a!==null)a.return=i,M=a;else e:for(;M!==null;){if(i=M,i.flags&2048)switch(i.tag){case 0:case 11:case 15:ci(9,i,i.return)}var w=i.sibling;if(w!==null){w.return=i.return,M=w;break e}M=i.return}}var y=t.current;for(M=y;M!==null;){a=M;var g=a.child;if(a.subtreeFlags&2064&&g!==null)g.return=a,M=g;else e:for(a=y;M!==null;){if(o=M,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:sl(9,o)}}catch(k){ye(o,o.return,k)}if(o===a){M=null;break e}var x=o.sibling;if(x!==null){x.return=o.return,M=x;break e}M=o.return}}if(Y=s,Xn(),qt&&typeof qt.onPostCommitFiberRoot=="function")try{qt.onPostCommitFiberRoot(Qo,t)}catch{}r=!0}return r}finally{Z=n,wt.transition=e}}return!1}function df(t,e,n){e=_s(n,e),e=qg(t,e,1),t=In(t,e,1),e=Ve(),t!==null&&(Zi(t,1,e),nt(t,e))}function ye(t,e,n){if(t.tag===3)df(t,t,n);else for(;e!==null;){if(e.tag===3){df(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ln===null||!Ln.has(r))){t=_s(n,t),t=Kg(e,t,1),e=In(e,t,1),t=Ve(),e!==null&&(Zi(e,1,t),nt(e,t));break}}e=e.return}}function D_(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Ve(),t.pingedLanes|=t.suspendedLanes&n,Ne===t&&(Le&n)===n&&(je===4||je===3&&(Le&130023424)===Le&&500>ve()-bd?yr(t,0):xd|=n),nt(t,e)}function fy(t,e){e===0&&(t.mode&1?(e=da,da<<=1,!(da&130023424)&&(da=4194304)):e=1);var n=Ve();t=cn(t,e),t!==null&&(Zi(t,e,n),nt(t,n))}function I_(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),fy(t,n)}function L_(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(R(314))}r!==null&&r.delete(e),fy(t,n)}var py;py=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||et.current)Je=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Je=!1,S_(t,e,n);Je=!!(t.flags&131072)}else Je=!1,ue&&e.flags&1048576&&vg(e,mo,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Ga(t,e),t=e.pendingProps;var s=gs(e,We.current);us(e,n),s=md(null,e,r,t,s,n);var i=gd();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,tt(r)?(i=!0,fo(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,ud(e),s.updater=rl,e.stateNode=s,s._reactInternals=e,Qc(e,r,t,n),e=Zc(null,e,r,!0,i,n)):(e.tag=0,ue&&i&&rd(e),He(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Ga(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=$_(r),t=St(r,t),s){case 0:e=Jc(null,e,r,t,n);break e;case 1:e=ef(null,e,r,t,n);break e;case 11:e=Jh(null,e,r,t,n);break e;case 14:e=Zh(null,e,r,St(r.type,t),n);break e}throw Error(R(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:St(r,s),Jc(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:St(r,s),ef(t,e,r,s,n);case 3:e:{if(Xg(e),t===null)throw Error(R(387));r=e.pendingProps,i=e.memoizedState,s=i.element,Sg(t,e),vo(e,r,null,n);var a=e.memoizedState;if(r=a.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=_s(Error(R(423)),e),e=tf(t,e,r,n,s);break e}else if(r!==s){s=_s(Error(R(424)),e),e=tf(t,e,r,n,s);break e}else for(ct=Dn(e.stateNode.containerInfo.firstChild),ut=e,ue=!0,Pt=null,n=bg(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ys(),r===s){e=un(t,e,n);break e}He(t,e,r,n)}e=e.child}return e;case 5:return Eg(e),t===null&&Kc(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,a=s.children,Bc(r,s)?a=null:i!==null&&Bc(r,i)&&(e.flags|=32),Qg(t,e),He(t,e,a,n),e.child;case 6:return t===null&&Kc(e),null;case 13:return Jg(t,e,n);case 4:return dd(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=vs(e,null,r,n):He(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:St(r,s),Jh(t,e,r,s,n);case 7:return He(t,e,e.pendingProps,n),e.child;case 8:return He(t,e,e.pendingProps.children,n),e.child;case 12:return He(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,a=s.value,se(go,r._currentValue),r._currentValue=a,i!==null)if(At(i.value,a)){if(i.children===s.children&&!et.current){e=un(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var o=i.dependencies;if(o!==null){a=i.child;for(var l=o.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=an(-1,n&-n),l.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),Yc(i.return,n,e),o.lanes|=n;break}l=l.next}}else if(i.tag===10)a=i.type===e.type?null:i.child;else if(i.tag===18){if(a=i.return,a===null)throw Error(R(341));a.lanes|=n,o=a.alternate,o!==null&&(o.lanes|=n),Yc(a,n,e),a=i.sibling}else a=i.child;if(a!==null)a.return=i;else for(a=i;a!==null;){if(a===e){a=null;break}if(i=a.sibling,i!==null){i.return=a.return,a=i;break}a=a.return}i=a}He(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,us(e,n),s=_t(s),r=r(s),e.flags|=1,He(t,e,r,n),e.child;case 14:return r=e.type,s=St(r,e.pendingProps),s=St(r.type,s),Zh(t,e,r,s,n);case 15:return Yg(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:St(r,s),Ga(t,e),e.tag=1,tt(r)?(t=!0,fo(e)):t=!1,us(e,n),Vg(e,r,s),Qc(e,r,s,n),Zc(null,e,r,!0,t,n);case 19:return Zg(t,e,n);case 22:return Gg(t,e,n)}throw Error(R(156,e.tag))};function my(t,e){return Bm(t,e)}function z_(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function yt(t,e,n,r){return new z_(t,e,n,r)}function jd(t){return t=t.prototype,!(!t||!t.isReactComponent)}function $_(t){if(typeof t=="function")return jd(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Vu)return 11;if(t===qu)return 14}return 2}function $n(t,e){var n=t.alternate;return n===null?(n=yt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Ja(t,e,n,r,s,i){var a=2;if(r=t,typeof t=="function")jd(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case Kr:return vr(n.children,s,i,e);case Hu:a=8,s|=8;break;case _c:return t=yt(12,n,e,s|2),t.elementType=_c,t.lanes=i,t;case xc:return t=yt(13,n,e,s),t.elementType=xc,t.lanes=i,t;case bc:return t=yt(19,n,e,s),t.elementType=bc,t.lanes=i,t;case Em:return al(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case km:a=10;break e;case Sm:a=9;break e;case Vu:a=11;break e;case qu:a=14;break e;case _n:a=16,r=null;break e}throw Error(R(130,t==null?t:typeof t,""))}return e=yt(a,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function vr(t,e,n,r){return t=yt(7,t,r,e),t.lanes=n,t}function al(t,e,n,r){return t=yt(22,t,r,e),t.elementType=Em,t.lanes=n,t.stateNode={isHidden:!1},t}function Xl(t,e,n){return t=yt(6,t,null,e),t.lanes=n,t}function Jl(t,e,n){return e=yt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function U_(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Rl(0),this.expirationTimes=Rl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Rl(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Cd(t,e,n,r,s,i,a,o,l){return t=new U_(t,e,n,o,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=yt(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},ud(i),t}function F_(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:qr,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function gy(t){if(!t)return Hn;t=t._reactInternals;e:{if(Or(t)!==t||t.tag!==1)throw Error(R(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(tt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(R(171))}if(t.tag===1){var n=t.type;if(tt(n))return gg(t,n,e)}return e}function yy(t,e,n,r,s,i,a,o,l){return t=Cd(n,r,!0,t,s,i,a,o,l),t.context=gy(null),n=t.current,r=Ve(),s=zn(n),i=an(r,s),i.callback=e??null,In(n,i,s),t.current.lanes=s,Zi(t,s,r),nt(t,r),t}function ol(t,e,n,r){var s=e.current,i=Ve(),a=zn(s);return n=gy(n),e.context===null?e.context=n:e.pendingContext=n,e=an(i,a),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=In(s,e,a),t!==null&&(Ot(t,s,a,i),qa(t,s,a)),a}function jo(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function hf(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Pd(t,e){hf(t,e),(t=t.alternate)&&hf(t,e)}function B_(){return null}var vy=typeof reportError=="function"?reportError:function(t){console.error(t)};function Td(t){this._internalRoot=t}ll.prototype.render=Td.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(R(409));ol(t,e,null,null)};ll.prototype.unmount=Td.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Er(function(){ol(null,t,null,null)}),e[ln]=null}};function ll(t){this._internalRoot=t}ll.prototype.unstable_scheduleHydration=function(t){if(t){var e=Gm();t={blockedOn:null,target:t,priority:e};for(var n=0;n<kn.length&&e!==0&&e<kn[n].priority;n++);kn.splice(n,0,t),n===0&&Xm(t)}};function Nd(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function cl(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function ff(){}function W_(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var c=jo(a);i.call(c)}}var a=yy(e,r,t,0,null,!1,!1,"",ff);return t._reactRootContainer=a,t[ln]=a.current,Pi(t.nodeType===8?t.parentNode:t),Er(),a}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var o=r;r=function(){var c=jo(l);o.call(c)}}var l=Cd(t,0,!1,null,null,!1,!1,"",ff);return t._reactRootContainer=l,t[ln]=l.current,Pi(t.nodeType===8?t.parentNode:t),Er(function(){ol(e,l,n,r)}),l}function ul(t,e,n,r,s){var i=n._reactRootContainer;if(i){var a=i;if(typeof s=="function"){var o=s;s=function(){var l=jo(a);o.call(l)}}ol(e,a,t,s)}else a=W_(n,e,t,s,r);return jo(a)}Km=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Ys(e.pendingLanes);n!==0&&(Gu(e,n|1),nt(e,ve()),!(Y&6)&&(xs=ve()+500,Xn()))}break;case 13:Er(function(){var r=cn(t,1);if(r!==null){var s=Ve();Ot(r,t,1,s)}}),Pd(t,1)}};Qu=function(t){if(t.tag===13){var e=cn(t,134217728);if(e!==null){var n=Ve();Ot(e,t,134217728,n)}Pd(t,134217728)}};Ym=function(t){if(t.tag===13){var e=zn(t),n=cn(t,e);if(n!==null){var r=Ve();Ot(n,t,e,r)}Pd(t,e)}};Gm=function(){return Z};Qm=function(t,e){var n=Z;try{return Z=t,e()}finally{Z=n}};Rc=function(t,e,n){switch(e){case"input":if(Ec(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=el(r);if(!s)throw Error(R(90));Cm(r),Ec(r,s)}}}break;case"textarea":Tm(t,n);break;case"select":e=n.value,e!=null&&as(t,!!n.multiple,e,!1)}};Im=kd;Lm=Er;var H_={usingClientEntryPoint:!1,Events:[ta,Xr,el,Mm,Dm,kd]},$s={findFiberByHostInstance:hr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},V_={bundleType:$s.bundleType,version:$s.version,rendererPackageName:$s.rendererPackageName,rendererConfig:$s.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:hn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Um(t),t===null?null:t.stateNode},findFiberByHostInstance:$s.findFiberByHostInstance||B_,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ba=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ba.isDisabled&&ba.supportsFiber)try{Qo=ba.inject(V_),qt=ba}catch{}}ht.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=H_;ht.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Nd(e))throw Error(R(200));return F_(t,e,null,n)};ht.createRoot=function(t,e){if(!Nd(t))throw Error(R(299));var n=!1,r="",s=vy;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Cd(t,1,!1,null,null,n,!1,r,s),t[ln]=e.current,Pi(t.nodeType===8?t.parentNode:t),new Td(e)};ht.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(R(188)):(t=Object.keys(t).join(","),Error(R(268,t)));return t=Um(e),t=t===null?null:t.stateNode,t};ht.flushSync=function(t){return Er(t)};ht.hydrate=function(t,e,n){if(!cl(e))throw Error(R(200));return ul(null,t,e,!0,n)};ht.hydrateRoot=function(t,e,n){if(!Nd(t))throw Error(R(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",a=vy;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=yy(e,null,t,1,n??null,s,!1,i,a),t[ln]=e.current,Pi(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new ll(e)};ht.render=function(t,e,n){if(!cl(e))throw Error(R(200));return ul(null,t,e,!1,n)};ht.unmountComponentAtNode=function(t){if(!cl(t))throw Error(R(40));return t._reactRootContainer?(Er(function(){ul(null,null,t,!1,function(){t._reactRootContainer=null,t[ln]=null})}),!0):!1};ht.unstable_batchedUpdates=kd;ht.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!cl(n))throw Error(R(200));if(t==null||t._reactInternals===void 0)throw Error(R(38));return ul(t,e,n,!1,r)};ht.version="18.3.1-next-f1338f8080-20240426";function wy(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(wy)}catch(t){console.error(t)}}wy(),wm.exports=ht;var q_=wm.exports,_y,pf=q_;_y=pf.createRoot,pf.hydrateRoot;/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Li(){return Li=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Li.apply(this,arguments)}var Pn;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Pn||(Pn={}));const mf="popstate";function K_(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:a,hash:o}=r.location;return du("",{pathname:i,search:a,hash:o},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:Co(s)}return G_(e,n,null,t)}function pe(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Od(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Y_(){return Math.random().toString(36).substr(2,8)}function gf(t,e){return{usr:t.state,key:t.key,idx:e}}function du(t,e,n,r){return n===void 0&&(n=null),Li({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Ts(e):e,{state:n,key:e&&e.key||r||Y_()})}function Co(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Ts(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function G_(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,a=s.history,o=Pn.Pop,l=null,c=u();c==null&&(c=0,a.replaceState(Li({},a.state,{idx:c}),""));function u(){return(a.state||{idx:null}).idx}function h(){o=Pn.Pop;let _=u(),w=_==null?null:_-c;c=_,l&&l({action:o,location:v.location,delta:w})}function f(_,w){o=Pn.Push;let y=du(v.location,_,w);c=u()+1;let g=gf(y,c),x=v.createHref(y);try{a.pushState(g,"",x)}catch(k){if(k instanceof DOMException&&k.name==="DataCloneError")throw k;s.location.assign(x)}i&&l&&l({action:o,location:v.location,delta:1})}function m(_,w){o=Pn.Replace;let y=du(v.location,_,w);c=u();let g=gf(y,c),x=v.createHref(y);a.replaceState(g,"",x),i&&l&&l({action:o,location:v.location,delta:0})}function p(_){let w=s.location.origin!=="null"?s.location.origin:s.location.href,y=typeof _=="string"?_:Co(_);return y=y.replace(/ $/,"%20"),pe(w,"No window.location.(origin|href) available to create URL for href: "+y),new URL(y,w)}let v={get action(){return o},get location(){return t(s,a)},listen(_){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(mf,h),l=_,()=>{s.removeEventListener(mf,h),l=null}},createHref(_){return e(s,_)},createURL:p,encodeLocation(_){let w=p(_);return{pathname:w.pathname,search:w.search,hash:w.hash}},push:f,replace:m,go(_){return a.go(_)}};return v}var yf;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(yf||(yf={}));function Q_(t,e,n){return n===void 0&&(n="/"),X_(t,e,n)}function X_(t,e,n,r){let s=typeof e=="string"?Ts(e):e,i=bs(s.pathname||"/",n);if(i==null)return null;let a=xy(t);J_(a);let o=null;for(let l=0;o==null&&l<a.length;++l){let c=cx(i);o=ox(a[l],c)}return o}function xy(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,a,o)=>{let l={relativePath:o===void 0?i.path||"":o,caseSensitive:i.caseSensitive===!0,childrenIndex:a,route:i};l.relativePath.startsWith("/")&&(pe(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=Un([r,l.relativePath]),u=n.concat(l);i.children&&i.children.length>0&&(pe(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),xy(i.children,e,u,c)),!(i.path==null&&!i.index)&&e.push({path:c,score:ix(c,i.index),routesMeta:u})};return t.forEach((i,a)=>{var o;if(i.path===""||!((o=i.path)!=null&&o.includes("?")))s(i,a);else for(let l of by(i.path))s(i,a,l)}),e}function by(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let a=by(r.join("/")),o=[];return o.push(...a.map(l=>l===""?i:[i,l].join("/"))),s&&o.push(...a),o.map(l=>t.startsWith("/")&&l===""?"/":l)}function J_(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:ax(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const Z_=/^:[\w-]+$/,ex=3,tx=2,nx=1,rx=10,sx=-2,vf=t=>t==="*";function ix(t,e){let n=t.split("/"),r=n.length;return n.some(vf)&&(r+=sx),e&&(r+=tx),n.filter(s=>!vf(s)).reduce((s,i)=>s+(Z_.test(i)?ex:i===""?nx:rx),r)}function ax(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function ox(t,e,n){let{routesMeta:r}=t,s={},i="/",a=[];for(let o=0;o<r.length;++o){let l=r[o],c=o===r.length-1,u=i==="/"?e:e.slice(i.length)||"/",h=hu({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},u),f=l.route;if(!h)return null;Object.assign(s,h.params),a.push({params:s,pathname:Un([i,h.pathname]),pathnameBase:px(Un([i,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(i=Un([i,h.pathnameBase]))}return a}function hu(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=lx(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],a=i.replace(/(.)\/+$/,"$1"),o=s.slice(1);return{params:r.reduce((c,u,h)=>{let{paramName:f,isOptional:m}=u;if(f==="*"){let v=o[h]||"";a=i.slice(0,i.length-v.length).replace(/(.)\/+$/,"$1")}const p=o[h];return m&&!p?c[f]=void 0:c[f]=(p||"").replace(/%2F/g,"/"),c},{}),pathname:i,pathnameBase:a,pattern:t}}function lx(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Od(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,o,l)=>(r.push({paramName:o,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function cx(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Od(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function bs(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}const ux=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,dx=t=>ux.test(t);function hx(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?Ts(t):t,i;if(n)if(dx(n))i=n;else{if(n.includes("//")){let a=n;n=n.replace(/\/\/+/g,"/"),Od(!1,"Pathnames cannot have embedded double slashes - normalizing "+(a+" -> "+n))}n.startsWith("/")?i=wf(n.substring(1),"/"):i=wf(n,e)}else i=e;return{pathname:i,search:mx(r),hash:gx(s)}}function wf(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Zl(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function fx(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Rd(t,e){let n=fx(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Ad(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=Ts(t):(s=Li({},t),pe(!s.pathname||!s.pathname.includes("?"),Zl("?","pathname","search",s)),pe(!s.pathname||!s.pathname.includes("#"),Zl("#","pathname","hash",s)),pe(!s.search||!s.search.includes("#"),Zl("#","search","hash",s)));let i=t===""||s.pathname==="",a=i?"/":s.pathname,o;if(a==null)o=n;else{let h=e.length-1;if(!r&&a.startsWith("..")){let f=a.split("/");for(;f[0]==="..";)f.shift(),h-=1;s.pathname=f.join("/")}o=h>=0?e[h]:"/"}let l=hx(s,o),c=a&&a!=="/"&&a.endsWith("/"),u=(i||a===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||u)&&(l.pathname+="/"),l}const Un=t=>t.join("/").replace(/\/\/+/g,"/"),px=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),mx=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,gx=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function yx(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const ky=["post","put","patch","delete"];new Set(ky);const vx=["get",...ky];new Set(vx);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function zi(){return zi=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},zi.apply(this,arguments)}const dl=S.createContext(null),Sy=S.createContext(null),fn=S.createContext(null),hl=S.createContext(null),Yt=S.createContext({outlet:null,matches:[],isDataRoute:!1}),Ey=S.createContext(null);function wx(t,e){let{relative:n}=e===void 0?{}:e;Ns()||pe(!1);let{basename:r,navigator:s}=S.useContext(fn),{hash:i,pathname:a,search:o}=fl(t,{relative:n}),l=a;return r!=="/"&&(l=a==="/"?r:Un([r,a])),s.createHref({pathname:l,search:o,hash:i})}function Ns(){return S.useContext(hl)!=null}function Jn(){return Ns()||pe(!1),S.useContext(hl).location}function jy(t){S.useContext(fn).static||S.useLayoutEffect(t)}function Zn(){let{isDataRoute:t}=S.useContext(Yt);return t?Dx():_x()}function _x(){Ns()||pe(!1);let t=S.useContext(dl),{basename:e,future:n,navigator:r}=S.useContext(fn),{matches:s}=S.useContext(Yt),{pathname:i}=Jn(),a=JSON.stringify(Rd(s,n.v7_relativeSplatPath)),o=S.useRef(!1);return jy(()=>{o.current=!0}),S.useCallback(function(c,u){if(u===void 0&&(u={}),!o.current)return;if(typeof c=="number"){r.go(c);return}let h=Ad(c,JSON.parse(a),i,u.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:Un([e,h.pathname])),(u.replace?r.replace:r.push)(h,u.state,u)},[e,r,a,i,t])}const xx=S.createContext(null);function bx(t){let e=S.useContext(Yt).outlet;return e&&S.createElement(xx.Provider,{value:t},e)}function kx(){let{matches:t}=S.useContext(Yt),e=t[t.length-1];return e?e.params:{}}function fl(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=S.useContext(fn),{matches:s}=S.useContext(Yt),{pathname:i}=Jn(),a=JSON.stringify(Rd(s,r.v7_relativeSplatPath));return S.useMemo(()=>Ad(t,JSON.parse(a),i,n==="path"),[t,a,i,n])}function Sx(t,e){return Ex(t,e)}function Ex(t,e,n,r){Ns()||pe(!1);let{navigator:s}=S.useContext(fn),{matches:i}=S.useContext(Yt),a=i[i.length-1],o=a?a.params:{};a&&a.pathname;let l=a?a.pathnameBase:"/";a&&a.route;let c=Jn(),u;if(e){var h;let _=typeof e=="string"?Ts(e):e;l==="/"||(h=_.pathname)!=null&&h.startsWith(l)||pe(!1),u=_}else u=c;let f=u.pathname||"/",m=f;if(l!=="/"){let _=l.replace(/^\//,"").split("/");m="/"+f.replace(/^\//,"").split("/").slice(_.length).join("/")}let p=Q_(t,{pathname:m}),v=Nx(p&&p.map(_=>Object.assign({},_,{params:Object.assign({},o,_.params),pathname:Un([l,s.encodeLocation?s.encodeLocation(_.pathname).pathname:_.pathname]),pathnameBase:_.pathnameBase==="/"?l:Un([l,s.encodeLocation?s.encodeLocation(_.pathnameBase).pathname:_.pathnameBase])})),i,n,r);return e&&v?S.createElement(hl.Provider,{value:{location:zi({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:Pn.Pop}},v):v}function jx(){let t=Mx(),e=yx(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return S.createElement(S.Fragment,null,S.createElement("h2",null,"Unexpected Application Error!"),S.createElement("h3",{style:{fontStyle:"italic"}},e),n?S.createElement("pre",{style:s},n):null,null)}const Cx=S.createElement(jx,null);class Px extends S.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?S.createElement(Yt.Provider,{value:this.props.routeContext},S.createElement(Ey.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Tx(t){let{routeContext:e,match:n,children:r}=t,s=S.useContext(dl);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),S.createElement(Yt.Provider,{value:e},r)}function Nx(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let a=t,o=(s=n)==null?void 0:s.errors;if(o!=null){let u=a.findIndex(h=>h.route.id&&(o==null?void 0:o[h.route.id])!==void 0);u>=0||pe(!1),a=a.slice(0,Math.min(a.length,u+1))}let l=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let u=0;u<a.length;u++){let h=a[u];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(c=u),h.route.id){let{loaderData:f,errors:m}=n,p=h.route.loader&&f[h.route.id]===void 0&&(!m||m[h.route.id]===void 0);if(h.route.lazy||p){l=!0,c>=0?a=a.slice(0,c+1):a=[a[0]];break}}}return a.reduceRight((u,h,f)=>{let m,p=!1,v=null,_=null;n&&(m=o&&h.route.id?o[h.route.id]:void 0,v=h.route.errorElement||Cx,l&&(c<0&&f===0?(Ix("route-fallback"),p=!0,_=null):c===f&&(p=!0,_=h.route.hydrateFallbackElement||null)));let w=e.concat(a.slice(0,f+1)),y=()=>{let g;return m?g=v:p?g=_:h.route.Component?g=S.createElement(h.route.Component,null):h.route.element?g=h.route.element:g=u,S.createElement(Tx,{match:h,routeContext:{outlet:u,matches:w,isDataRoute:n!=null},children:g})};return n&&(h.route.ErrorBoundary||h.route.errorElement||f===0)?S.createElement(Px,{location:n.location,revalidation:n.revalidation,component:v,error:m,children:y(),routeContext:{outlet:null,matches:w,isDataRoute:!0}}):y()},null)}var Cy=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(Cy||{}),Py=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Py||{});function Ox(t){let e=S.useContext(dl);return e||pe(!1),e}function Rx(t){let e=S.useContext(Sy);return e||pe(!1),e}function Ax(t){let e=S.useContext(Yt);return e||pe(!1),e}function Ty(t){let e=Ax(),n=e.matches[e.matches.length-1];return n.route.id||pe(!1),n.route.id}function Mx(){var t;let e=S.useContext(Ey),n=Rx(),r=Ty();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function Dx(){let{router:t}=Ox(Cy.UseNavigateStable),e=Ty(Py.UseNavigateStable),n=S.useRef(!1);return jy(()=>{n.current=!0}),S.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,zi({fromRouteId:e},i)))},[t,e])}const _f={};function Ix(t,e,n){_f[t]||(_f[t]=!0)}function Lx(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function wr(t){let{to:e,replace:n,state:r,relative:s}=t;Ns()||pe(!1);let{future:i,static:a}=S.useContext(fn),{matches:o}=S.useContext(Yt),{pathname:l}=Jn(),c=Zn(),u=Ad(e,Rd(o,i.v7_relativeSplatPath),l,s==="path"),h=JSON.stringify(u);return S.useEffect(()=>c(JSON.parse(h),{replace:n,state:r,relative:s}),[c,h,s,n,r]),null}function Ny(t){return bx(t.context)}function Pe(t){pe(!1)}function zx(t){let{basename:e="/",children:n=null,location:r,navigationType:s=Pn.Pop,navigator:i,static:a=!1,future:o}=t;Ns()&&pe(!1);let l=e.replace(/^\/*/,"/"),c=S.useMemo(()=>({basename:l,navigator:i,static:a,future:zi({v7_relativeSplatPath:!1},o)}),[l,o,i,a]);typeof r=="string"&&(r=Ts(r));let{pathname:u="/",search:h="",hash:f="",state:m=null,key:p="default"}=r,v=S.useMemo(()=>{let _=bs(u,l);return _==null?null:{location:{pathname:_,search:h,hash:f,state:m,key:p},navigationType:s}},[l,u,h,f,m,p,s]);return v==null?null:S.createElement(fn.Provider,{value:c},S.createElement(hl.Provider,{children:n,value:v}))}function $x(t){let{children:e,location:n}=t;return Sx(fu(e),n)}new Promise(()=>{});function fu(t,e){e===void 0&&(e=[]);let n=[];return S.Children.forEach(t,(r,s)=>{if(!S.isValidElement(r))return;let i=[...e,s];if(r.type===S.Fragment){n.push.apply(n,fu(r.props.children,i));return}r.type!==Pe&&pe(!1),!r.props.index||!r.props.children||pe(!1);let a={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=fu(r.props.children,i)),n.push(a)}),n}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Po(){return Po=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Po.apply(this,arguments)}function Oy(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function Ux(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function Fx(t,e){return t.button===0&&(!e||e==="_self")&&!Ux(t)}const Bx=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Wx=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],Hx="6";try{window.__reactRouterVersion=Hx}catch{}const Vx=S.createContext({isTransitioning:!1}),qx="startTransition",xf=D0[qx];function Kx(t){let{basename:e,children:n,future:r,window:s}=t,i=S.useRef();i.current==null&&(i.current=K_({window:s,v5Compat:!0}));let a=i.current,[o,l]=S.useState({action:a.action,location:a.location}),{v7_startTransition:c}=r||{},u=S.useCallback(h=>{c&&xf?xf(()=>l(h)):l(h)},[l,c]);return S.useLayoutEffect(()=>a.listen(u),[a,u]),S.useEffect(()=>Lx(r),[r]),S.createElement(zx,{basename:e,children:n,location:o.location,navigationType:o.action,navigator:a,future:r})}const Yx=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Gx=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,nn=S.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:a,state:o,target:l,to:c,preventScrollReset:u,viewTransition:h}=e,f=Oy(e,Bx),{basename:m}=S.useContext(fn),p,v=!1;if(typeof c=="string"&&Gx.test(c)&&(p=c,Yx))try{let g=new URL(window.location.href),x=c.startsWith("//")?new URL(g.protocol+c):new URL(c),k=bs(x.pathname,m);x.origin===g.origin&&k!=null?c=k+x.search+x.hash:v=!0}catch{}let _=wx(c,{relative:s}),w=Xx(c,{replace:a,state:o,target:l,preventScrollReset:u,relative:s,viewTransition:h});function y(g){r&&r(g),g.defaultPrevented||w(g)}return S.createElement("a",Po({},f,{href:p||_,onClick:v||i?r:y,ref:n,target:l}))}),Ry=S.forwardRef(function(e,n){let{"aria-current":r="page",caseSensitive:s=!1,className:i="",end:a=!1,style:o,to:l,viewTransition:c,children:u}=e,h=Oy(e,Wx),f=fl(l,{relative:h.relative}),m=Jn(),p=S.useContext(Sy),{navigator:v,basename:_}=S.useContext(fn),w=p!=null&&Jx(f)&&c===!0,y=v.encodeLocation?v.encodeLocation(f).pathname:f.pathname,g=m.pathname,x=p&&p.navigation&&p.navigation.location?p.navigation.location.pathname:null;s||(g=g.toLowerCase(),x=x?x.toLowerCase():null,y=y.toLowerCase()),x&&_&&(x=bs(x,_)||x);const k=y!=="/"&&y.endsWith("/")?y.length-1:y.length;let b=g===y||!a&&g.startsWith(y)&&g.charAt(k)==="/",E=x!=null&&(x===y||!a&&x.startsWith(y)&&x.charAt(y.length)==="/"),j={isActive:b,isPending:E,isTransitioning:w},N=b?r:void 0,T;typeof i=="function"?T=i(j):T=[i,b?"active":null,E?"pending":null,w?"transitioning":null].filter(Boolean).join(" ");let L=typeof o=="function"?o(j):o;return S.createElement(nn,Po({},h,{"aria-current":N,className:T,ref:n,style:L,to:l,viewTransition:c}),typeof u=="function"?u(j):u)});var pu;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(pu||(pu={}));var bf;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(bf||(bf={}));function Qx(t){let e=S.useContext(dl);return e||pe(!1),e}function Xx(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:a,viewTransition:o}=e===void 0?{}:e,l=Zn(),c=Jn(),u=fl(t,{relative:a});return S.useCallback(h=>{if(Fx(h,n)){h.preventDefault();let f=r!==void 0?r:Co(c)===Co(u);l(t,{replace:f,state:s,preventScrollReset:i,relative:a,viewTransition:o})}},[c,l,u,r,s,n,t,i,a,o])}function Jx(t,e){e===void 0&&(e={});let n=S.useContext(Vx);n==null&&pe(!1);let{basename:r}=Qx(pu.useViewTransitionState),s=fl(t,{relative:e.relative});if(!n.isTransitioning)return!1;let i=bs(n.currentLocation.pathname,r)||n.currentLocation.pathname,a=bs(n.nextLocation.pathname,r)||n.nextLocation.pathname;return hu(s.pathname,a)!=null||hu(s.pathname,i)!=null}function pl(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function Zx(t,e,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function o(u){try{c(r.next(u))}catch(h){a(h)}}function l(u){try{c(r.throw(u))}catch(h){a(h)}}function c(u){u.done?i(u.value):s(u.value).then(o,l)}c((r=r.apply(t,e||[])).next())})}const eb=t=>t?(...e)=>t(...e):(...e)=>fetch(...e);class Md extends Error{constructor(e,n="FunctionsError",r){super(e),this.name=n,this.context=r}}class tb extends Md{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class kf extends Md{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Sf extends Md{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var mu;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(mu||(mu={}));class nb{constructor(e,{headers:n={},customFetch:r,region:s=mu.Any}={}){this.url=e,this.headers=n,this.region=s,this.fetch=eb(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return Zx(this,arguments,void 0,function*(n,r={}){var s;let i,a;try{const{headers:o,method:l,body:c,signal:u,timeout:h}=r;let f={},{region:m}=r;m||(m=this.region);const p=new URL(`${this.url}/${n}`);m&&m!=="any"&&(f["x-region"]=m,p.searchParams.set("forceFunctionRegion",m));let v;c&&(o&&!Object.prototype.hasOwnProperty.call(o,"Content-Type")||!o)?typeof Blob<"u"&&c instanceof Blob||c instanceof ArrayBuffer?(f["Content-Type"]="application/octet-stream",v=c):typeof c=="string"?(f["Content-Type"]="text/plain",v=c):typeof FormData<"u"&&c instanceof FormData?v=c:(f["Content-Type"]="application/json",v=JSON.stringify(c)):c&&typeof c!="string"&&!(typeof Blob<"u"&&c instanceof Blob)&&!(c instanceof ArrayBuffer)&&!(typeof FormData<"u"&&c instanceof FormData)?v=JSON.stringify(c):v=c;let _=u;h&&(a=new AbortController,i=setTimeout(()=>a.abort(),h),u?(_=a.signal,u.addEventListener("abort",()=>a.abort())):_=a.signal);const w=yield this.fetch(p.toString(),{method:l||"POST",headers:Object.assign(Object.assign(Object.assign({},f),this.headers),o),body:v,signal:_}).catch(k=>{throw new tb(k)}),y=w.headers.get("x-relay-error");if(y&&y==="true")throw new kf(w);if(!w.ok)throw new Sf(w);let g=((s=w.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),x;return g==="application/json"?x=yield w.json():g==="application/octet-stream"||g==="application/pdf"?x=yield w.blob():g==="text/event-stream"?x=w:g==="multipart/form-data"?x=yield w.formData():x=yield w.text(),{data:x,error:null,response:w}}catch(o){return{data:null,error:o,response:o instanceof Sf||o instanceof kf?o.context:void 0}}finally{i&&clearTimeout(i)}})}}var rb=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}},sb=class{constructor(t){var e,n;this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=new Headers(t.headers),this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=(e=t.shouldThrowOnError)!==null&&e!==void 0?e:!1,this.signal=t.signal,this.isMaybeSingle=(n=t.isMaybeSingle)!==null&&n!==void 0?n:!1,t.fetch?this.fetch=t.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,e){return this.headers=new Headers(this.headers),this.headers.set(t,e),this}then(t,e){var n=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const r=this.fetch;let s=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{let a=null,o=null,l=null,c=i.status,u=i.statusText;if(i.ok){var h,f;if(n.method!=="HEAD"){var m;const w=await i.text();w===""||(n.headers.get("Accept")==="text/csv"||n.headers.get("Accept")&&(!((m=n.headers.get("Accept"))===null||m===void 0)&&m.includes("application/vnd.pgrst.plan+text"))?o=w:o=JSON.parse(w))}const v=(h=n.headers.get("Prefer"))===null||h===void 0?void 0:h.match(/count=(exact|planned|estimated)/),_=(f=i.headers.get("content-range"))===null||f===void 0?void 0:f.split("/");v&&_&&_.length>1&&(l=parseInt(_[1])),n.isMaybeSingle&&n.method==="GET"&&Array.isArray(o)&&(o.length>1?(a={code:"PGRST116",details:`Results contain ${o.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},o=null,l=null,c=406,u="Not Acceptable"):o.length===1?o=o[0]:o=null)}else{var p;const v=await i.text();try{a=JSON.parse(v),Array.isArray(a)&&i.status===404&&(o=[],a=null,c=200,u="OK")}catch{i.status===404&&v===""?(c=204,u="No Content"):a={message:v}}if(a&&n.isMaybeSingle&&(!(a==null||(p=a.details)===null||p===void 0)&&p.includes("0 rows"))&&(a=null,c=200,u="OK"),a&&n.shouldThrowOnError)throw new rb(a)}return{error:a,data:o,count:l,status:c,statusText:u}});return this.shouldThrowOnError||(s=s.catch(i=>{var a;let o="";const l=i==null?void 0:i.cause;if(l){var c,u,h,f;const p=(c=l==null?void 0:l.message)!==null&&c!==void 0?c:"",v=(u=l==null?void 0:l.code)!==null&&u!==void 0?u:"";o=`${(h=i==null?void 0:i.name)!==null&&h!==void 0?h:"FetchError"}: ${i==null?void 0:i.message}`,o+=`

Caused by: ${(f=l==null?void 0:l.name)!==null&&f!==void 0?f:"Error"}: ${p}`,v&&(o+=` (${v})`),l!=null&&l.stack&&(o+=`
${l.stack}`)}else{var m;o=(m=i==null?void 0:i.stack)!==null&&m!==void 0?m:""}return{error:{message:`${(a=i==null?void 0:i.name)!==null&&a!==void 0?a:"FetchError"}: ${i==null?void 0:i.message}`,details:o,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),s.then(t,e)}returns(){return this}overrideTypes(){return this}},ib=class extends sb{select(t){let e=!1;const n=(t??"*").split("").map(r=>/\s/.test(r)&&!e?"":(r==='"'&&(e=!e),r)).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(t,{ascending:e=!0,nullsFirst:n,foreignTable:r,referencedTable:s=r}={}){const i=s?`${s}.order`:"order",a=this.url.searchParams.get(i);return this.url.searchParams.set(i,`${a?`${a},`:""}${t}.${e?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:e,referencedTable:n=e}={}){const r=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(r,`${t}`),this}range(t,e,{foreignTable:n,referencedTable:r=n}={}){const s=typeof r>"u"?"offset":`${r}.offset`,i=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${t}`),this.url.searchParams.set(i,`${e-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:t=!1,verbose:e=!1,settings:n=!1,buffers:r=!1,wal:s=!1,format:i="text"}={}){var a;const o=[t?"analyze":null,e?"verbose":null,n?"settings":null,r?"buffers":null,s?"wal":null].filter(Boolean).join("|"),l=(a=this.headers.get("Accept"))!==null&&a!==void 0?a:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${i}; for="${l}"; options=${o};`),i==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(t){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${t}`),this}};const Ef=new RegExp("[,()]");var Wr=class extends ib{eq(t,e){return this.url.searchParams.append(t,`eq.${e}`),this}neq(t,e){return this.url.searchParams.append(t,`neq.${e}`),this}gt(t,e){return this.url.searchParams.append(t,`gt.${e}`),this}gte(t,e){return this.url.searchParams.append(t,`gte.${e}`),this}lt(t,e){return this.url.searchParams.append(t,`lt.${e}`),this}lte(t,e){return this.url.searchParams.append(t,`lte.${e}`),this}like(t,e){return this.url.searchParams.append(t,`like.${e}`),this}likeAllOf(t,e){return this.url.searchParams.append(t,`like(all).{${e.join(",")}}`),this}likeAnyOf(t,e){return this.url.searchParams.append(t,`like(any).{${e.join(",")}}`),this}ilike(t,e){return this.url.searchParams.append(t,`ilike.${e}`),this}ilikeAllOf(t,e){return this.url.searchParams.append(t,`ilike(all).{${e.join(",")}}`),this}ilikeAnyOf(t,e){return this.url.searchParams.append(t,`ilike(any).{${e.join(",")}}`),this}regexMatch(t,e){return this.url.searchParams.append(t,`match.${e}`),this}regexIMatch(t,e){return this.url.searchParams.append(t,`imatch.${e}`),this}is(t,e){return this.url.searchParams.append(t,`is.${e}`),this}isDistinct(t,e){return this.url.searchParams.append(t,`isdistinct.${e}`),this}in(t,e){const n=Array.from(new Set(e)).map(r=>typeof r=="string"&&Ef.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(t,`in.(${n})`),this}notIn(t,e){const n=Array.from(new Set(e)).map(r=>typeof r=="string"&&Ef.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(t,`not.in.(${n})`),this}contains(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cs.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cs.{${e.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(e)}`),this}containedBy(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cd.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cd.{${e.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(e)}`),this}rangeGt(t,e){return this.url.searchParams.append(t,`sr.${e}`),this}rangeGte(t,e){return this.url.searchParams.append(t,`nxl.${e}`),this}rangeLt(t,e){return this.url.searchParams.append(t,`sl.${e}`),this}rangeLte(t,e){return this.url.searchParams.append(t,`nxr.${e}`),this}rangeAdjacent(t,e){return this.url.searchParams.append(t,`adj.${e}`),this}overlaps(t,e){return typeof e=="string"?this.url.searchParams.append(t,`ov.${e}`):this.url.searchParams.append(t,`ov.{${e.join(",")}}`),this}textSearch(t,e,{config:n,type:r}={}){let s="";r==="plain"?s="pl":r==="phrase"?s="ph":r==="websearch"&&(s="w");const i=n===void 0?"":`(${n})`;return this.url.searchParams.append(t,`${s}fts${i}.${e}`),this}match(t){return Object.entries(t).forEach(([e,n])=>{this.url.searchParams.append(e,`eq.${n}`)}),this}not(t,e,n){return this.url.searchParams.append(t,`not.${e}.${n}`),this}or(t,{foreignTable:e,referencedTable:n=e}={}){const r=n?`${n}.or`:"or";return this.url.searchParams.append(r,`(${t})`),this}filter(t,e,n){return this.url.searchParams.append(t,`${e}.${n}`),this}},ab=class{constructor(t,{headers:e={},schema:n,fetch:r}){this.url=t,this.headers=new Headers(e),this.schema=n,this.fetch=r}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(t,e){const{head:n=!1,count:r}=e??{},s=n?"HEAD":"GET";let i=!1;const a=(t??"*").split("").map(c=>/\s/.test(c)&&!i?"":(c==='"'&&(i=!i),c)).join(""),{url:o,headers:l}=this.cloneRequestState();return o.searchParams.set("select",a),r&&l.append("Prefer",`count=${r}`),new Wr({method:s,url:o,headers:l,schema:this.schema,fetch:this.fetch})}insert(t,{count:e,defaultToNull:n=!0}={}){var r;const s="POST",{url:i,headers:a}=this.cloneRequestState();if(e&&a.append("Prefer",`count=${e}`),n||a.append("Prefer","missing=default"),Array.isArray(t)){const o=t.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(o.length>0){const l=[...new Set(o)].map(c=>`"${c}"`);i.searchParams.set("columns",l.join(","))}}return new Wr({method:s,url:i,headers:a,schema:this.schema,body:t,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}upsert(t,{onConflict:e,ignoreDuplicates:n=!1,count:r,defaultToNull:s=!0}={}){var i;const a="POST",{url:o,headers:l}=this.cloneRequestState();if(l.append("Prefer",`resolution=${n?"ignore":"merge"}-duplicates`),e!==void 0&&o.searchParams.set("on_conflict",e),r&&l.append("Prefer",`count=${r}`),s||l.append("Prefer","missing=default"),Array.isArray(t)){const c=t.reduce((u,h)=>u.concat(Object.keys(h)),[]);if(c.length>0){const u=[...new Set(c)].map(h=>`"${h}"`);o.searchParams.set("columns",u.join(","))}}return new Wr({method:a,url:o,headers:l,schema:this.schema,body:t,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}update(t,{count:e}={}){var n;const r="PATCH",{url:s,headers:i}=this.cloneRequestState();return e&&i.append("Prefer",`count=${e}`),new Wr({method:r,url:s,headers:i,schema:this.schema,body:t,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}delete({count:t}={}){var e;const n="DELETE",{url:r,headers:s}=this.cloneRequestState();return t&&s.append("Prefer",`count=${t}`),new Wr({method:n,url:r,headers:s,schema:this.schema,fetch:(e=this.fetch)!==null&&e!==void 0?e:fetch})}},ob=class Ay{constructor(e,{headers:n={},schema:r,fetch:s}={}){this.url=e,this.headers=new Headers(n),this.schemaName=r,this.fetch=s}from(e){if(!e||typeof e!="string"||e.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new ab(new URL(`${this.url}/${e}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new Ay(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,n={},{head:r=!1,get:s=!1,count:i}={}){var a;let o;const l=new URL(`${this.url}/rpc/${e}`);let c;const u=m=>m!==null&&typeof m=="object"&&(!Array.isArray(m)||m.some(u)),h=r&&Object.values(n).some(u);h?(o="POST",c=n):r||s?(o=r?"HEAD":"GET",Object.entries(n).filter(([m,p])=>p!==void 0).map(([m,p])=>[m,Array.isArray(p)?`{${p.join(",")}}`:`${p}`]).forEach(([m,p])=>{l.searchParams.append(m,p)})):(o="POST",c=n);const f=new Headers(this.headers);return h?f.set("Prefer",i?`count=${i},return=minimal`:"return=minimal"):i&&f.set("Prefer",`count=${i}`),new Wr({method:o,url:l,headers:f,schema:this.schemaName,body:c,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}};class lb{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const n=globalThis.process;if(n){const r=n.versions;if(r&&r.node){const s=r.node,i=parseInt(s.replace(/^v/,"").split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let n=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(n+=`

Suggested solution: ${e.workaround}`),new Error(n)}static createWebSocket(e,n){const r=this.getWebSocketConstructor();return new r(e,n)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const cb="2.91.0",ub=`realtime-js/${cb}`,db="1.0.0",My="2.0.0",jf=My,gu=1e4,hb=1e3,fb=100;var bn;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(bn||(bn={}));var Se;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(Se||(Se={}));var Ct;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(Ct||(Ct={}));var yu;(function(t){t.websocket="websocket"})(yu||(yu={}));var ur;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(ur||(ur={}));class pb{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=e??[]}encode(e,n){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return n(this._binaryEncodeUserBroadcastPush(e));let r=[e.join_ref,e.ref,e.topic,e.event,e.payload];return n(JSON.stringify(r))}_binaryEncodeUserBroadcastPush(e){var n;return this._isArrayBuffer((n=e.payload)===null||n===void 0?void 0:n.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var n,r;const s=(r=(n=e.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,s)}_encodeJsonUserBroadcastPush(e){var n,r;const s=(r=(n=e.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:{},a=new TextEncoder().encode(JSON.stringify(s)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,a)}_encodeUserBroadcastPush(e,n,r){var s,i;const a=e.topic,o=(s=e.ref)!==null&&s!==void 0?s:"",l=(i=e.join_ref)!==null&&i!==void 0?i:"",c=e.payload.event,u=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},h=Object.keys(u).length===0?"":JSON.stringify(u);if(l.length>255)throw new Error(`joinRef length ${l.length} exceeds maximum of 255`);if(o.length>255)throw new Error(`ref length ${o.length} exceeds maximum of 255`);if(a.length>255)throw new Error(`topic length ${a.length} exceeds maximum of 255`);if(c.length>255)throw new Error(`userEvent length ${c.length} exceeds maximum of 255`);if(h.length>255)throw new Error(`metadata length ${h.length} exceeds maximum of 255`);const f=this.USER_BROADCAST_PUSH_META_LENGTH+l.length+o.length+a.length+c.length+h.length,m=new ArrayBuffer(this.HEADER_LENGTH+f);let p=new DataView(m),v=0;p.setUint8(v++,this.KINDS.userBroadcastPush),p.setUint8(v++,l.length),p.setUint8(v++,o.length),p.setUint8(v++,a.length),p.setUint8(v++,c.length),p.setUint8(v++,h.length),p.setUint8(v++,n),Array.from(l,w=>p.setUint8(v++,w.charCodeAt(0))),Array.from(o,w=>p.setUint8(v++,w.charCodeAt(0))),Array.from(a,w=>p.setUint8(v++,w.charCodeAt(0))),Array.from(c,w=>p.setUint8(v++,w.charCodeAt(0))),Array.from(h,w=>p.setUint8(v++,w.charCodeAt(0)));var _=new Uint8Array(m.byteLength+r.byteLength);return _.set(new Uint8Array(m),0),_.set(new Uint8Array(r),m.byteLength),_.buffer}decode(e,n){if(this._isArrayBuffer(e)){let r=this._binaryDecode(e);return n(r)}if(typeof e=="string"){const r=JSON.parse(e),[s,i,a,o,l]=r;return n({join_ref:s,ref:i,topic:a,event:o,payload:l})}return n({})}_binaryDecode(e){const n=new DataView(e),r=n.getUint8(0),s=new TextDecoder;switch(r){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(e,n,s)}}_decodeUserBroadcast(e,n,r){const s=n.getUint8(1),i=n.getUint8(2),a=n.getUint8(3),o=n.getUint8(4);let l=this.HEADER_LENGTH+4;const c=r.decode(e.slice(l,l+s));l=l+s;const u=r.decode(e.slice(l,l+i));l=l+i;const h=r.decode(e.slice(l,l+a));l=l+a;const f=e.slice(l,e.byteLength),m=o===this.JSON_ENCODING?JSON.parse(r.decode(f)):f,p={type:this.BROADCAST_EVENT,event:u,payload:m};return a>0&&(p.meta=JSON.parse(h)),{join_ref:null,ref:null,topic:c,event:this.BROADCAST_EVENT,payload:p}}_isArrayBuffer(e){var n;return e instanceof ArrayBuffer||((n=e==null?void 0:e.constructor)===null||n===void 0?void 0:n.name)==="ArrayBuffer"}_pick(e,n){return!e||typeof e!="object"?{}:Object.fromEntries(Object.entries(e).filter(([r])=>n.includes(r)))}}class Dy{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var re;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(re||(re={}));const Cf=(t,e,n={})=>{var r;const s=(r=n.skipTypes)!==null&&r!==void 0?r:[];return e?Object.keys(e).reduce((i,a)=>(i[a]=mb(a,t,e,s),i),{}):{}},mb=(t,e,n,r)=>{const s=e.find(o=>o.name===t),i=s==null?void 0:s.type,a=n[t];return i&&!r.includes(i)?Iy(i,a):vu(a)},Iy=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return wb(e,n)}switch(t){case re.bool:return gb(e);case re.float4:case re.float8:case re.int2:case re.int4:case re.int8:case re.numeric:case re.oid:return yb(e);case re.json:case re.jsonb:return vb(e);case re.timestamp:return _b(e);case re.abstime:case re.date:case re.daterange:case re.int4range:case re.int8range:case re.money:case re.reltime:case re.text:case re.time:case re.timestamptz:case re.timetz:case re.tsrange:case re.tstzrange:return vu(e);default:return vu(e)}},vu=t=>t,gb=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},yb=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},vb=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch{return t}return t},wb=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,r=t[n];if(t[0]==="{"&&r==="}"){let i;const a=t.slice(1,n);try{i=JSON.parse("["+a+"]")}catch{i=a?a.split(","):[]}return i.map(o=>Iy(e,o))}return t},_b=t=>typeof t=="string"?t.replace(" ","T"):t,Ly=t=>{const e=new URL(t);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class ec{constructor(e,n,r={},s=gu){this.channel=e,this.event=n,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var r;return this._hasReceived(e)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Pf;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(Pf||(Pf={}));class hi{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},s=>{const{onJoin:i,onLeave:a,onSync:o}=this.caller;this.joinRef=this.channel._joinRef(),this.state=hi.syncState(this.state,s,i,a),this.pendingDiffs.forEach(l=>{this.state=hi.syncDiff(this.state,l,i,a)}),this.pendingDiffs=[],o()}),this.channel._on(r.diff,{},s=>{const{onJoin:i,onLeave:a,onSync:o}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=hi.syncDiff(this.state,s,i,a),o())}),this.onJoin((s,i,a)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:a})}),this.onLeave((s,i,a)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:a})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,r,s){const i=this.cloneDeep(e),a=this.transformState(n),o={},l={};return this.map(i,(c,u)=>{a[c]||(l[c]=u)}),this.map(a,(c,u)=>{const h=i[c];if(h){const f=u.map(_=>_.presence_ref),m=h.map(_=>_.presence_ref),p=u.filter(_=>m.indexOf(_.presence_ref)<0),v=h.filter(_=>f.indexOf(_.presence_ref)<0);p.length>0&&(o[c]=p),v.length>0&&(l[c]=v)}else o[c]=u}),this.syncDiff(i,{joins:o,leaves:l},r,s)}static syncDiff(e,n,r,s){const{joins:i,leaves:a}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(i,(o,l)=>{var c;const u=(c=e[o])!==null&&c!==void 0?c:[];if(e[o]=this.cloneDeep(l),u.length>0){const h=e[o].map(m=>m.presence_ref),f=u.filter(m=>h.indexOf(m.presence_ref)<0);e[o].unshift(...f)}r(o,u,l)}),this.map(a,(o,l)=>{let c=e[o];if(!c)return;const u=l.map(h=>h.presence_ref);c=c.filter(h=>u.indexOf(h.presence_ref)<0),e[o]=c,s(o,c,l),c.length===0&&delete e[o]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(r=>n(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,r)=>{const s=e[r];return"metas"in s?n[r]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):n[r]=s,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Tf;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(Tf||(Tf={}));var fi;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(fi||(fi={}));var Zt;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Zt||(Zt={}));class ss{constructor(e,n={config:{}},r){var s,i;if(this.topic=e,this.params=n,this.socket=r,this.bindings={},this.state=Se.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new ec(this,Ct.join,this.params,this.timeout),this.rejoinTimer=new Dy(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Se.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(a=>a.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Se.closed,this.socket._remove(this)}),this._onError(a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=Se.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Se.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=Se.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Ct.reply,{},(a,o)=>{this._trigger(this._replyEventName(o),a)}),this.presence=new hi(this),this.broadcastEndpointURL=Ly(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((i=(s=this.params.config)===null||s===void 0?void 0:s.broadcast)===null||i===void 0)&&i.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,n=this.timeout){var r,s,i;if(this.socket.isConnected()||this.socket.connect(),this.state==Se.closed){const{config:{broadcast:a,presence:o,private:l}}=this.params,c=(s=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(m=>m.filter))!==null&&s!==void 0?s:[],u=!!this.bindings[fi.PRESENCE]&&this.bindings[fi.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,h={},f={broadcast:a,presence:Object.assign(Object.assign({},o),{enabled:u}),postgres_changes:c,private:l};this.socket.accessTokenValue&&(h.access_token=this.socket.accessTokenValue),this._onError(m=>e==null?void 0:e(Zt.CHANNEL_ERROR,m)),this._onClose(()=>e==null?void 0:e(Zt.CLOSED)),this.updateJoinPayload(Object.assign({config:f},h)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:m})=>{var p;if(this.socket._isManualToken()||this.socket.setAuth(),m===void 0){e==null||e(Zt.SUBSCRIBED);return}else{const v=this.bindings.postgres_changes,_=(p=v==null?void 0:v.length)!==null&&p!==void 0?p:0,w=[];for(let y=0;y<_;y++){const g=v[y],{filter:{event:x,schema:k,table:b,filter:E}}=g,j=m&&m[y];if(j&&j.event===x&&ss.isFilterValueEqual(j.schema,k)&&ss.isFilterValueEqual(j.table,b)&&ss.isFilterValueEqual(j.filter,E))w.push(Object.assign(Object.assign({},g),{id:j.id}));else{this.unsubscribe(),this.state=Se.errored,e==null||e(Zt.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=w,e&&e(Zt.SUBSCRIBED);return}}).receive("error",m=>{this.state=Se.errored,e==null||e(Zt.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(m).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Zt.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,r){return this.state===Se.joined&&e===fi.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(e,n,r)}async httpSend(e,n,r={}){var s;if(n==null)return Promise.reject("Payload is required for httpSend()");const i={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(i.Authorization=`Bearer ${this.socket.accessTokenValue}`);const a={method:"POST",headers:i,body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:n,private:this.private}]})},o=await this._fetchWithTimeout(this.broadcastEndpointURL,a,(s=r.timeout)!==null&&s!==void 0?s:this.timeout);if(o.status===202)return{success:!0};let l=o.statusText;try{const c=await o.json();l=c.error||c.message||l}catch{}return Promise.reject(new Error(l))}async send(e,n={}){var r,s;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:i,payload:a}=e,o={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(o.Authorization=`Bearer ${this.socket.accessTokenValue}`);const l={method:"POST",headers:o,body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:a,private:this.private}]})};try{const c=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((s=c.body)===null||s===void 0?void 0:s.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var a,o,l;const c=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(o=(a=this.params)===null||a===void 0?void 0:a.config)===null||o===void 0?void 0:o.broadcast)===null||l===void 0)&&l.ack)&&i("ok"),c.receive("ok",()=>i("ok")),c.receive("error",()=>i("error")),c.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Se.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Ct.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(s=>{r=new ec(this,Ct.leave,{},e),r.receive("ok",()=>{n(),s("ok")}).receive("timeout",()=>{n(),s("timed out")}).receive("error",()=>{s("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Se.closed,this.bindings={}}async _fetchWithTimeout(e,n,r){const s=new AbortController,i=setTimeout(()=>s.abort(),r),a=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:s.signal}));return clearTimeout(i),a}_push(e,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new ec(this,e,n,r);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>fb){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(e,n,r){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,r){var s,i;const a=e.toLocaleLowerCase(),{close:o,error:l,leave:c,join:u}=Ct;if(r&&[o,l,c,u].indexOf(a)>=0&&r!==this._joinRef())return;let f=this._onMessage(a,n,r);if(n&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(m=>{var p,v,_;return((p=m.filter)===null||p===void 0?void 0:p.event)==="*"||((_=(v=m.filter)===null||v===void 0?void 0:v.event)===null||_===void 0?void 0:_.toLocaleLowerCase())===a}).map(m=>m.callback(f,r)):(i=this.bindings[a])===null||i===void 0||i.filter(m=>{var p,v,_,w,y,g,x,k;if(["broadcast","presence","postgres_changes"].includes(a))if("id"in m){const b=m.id,E=(p=m.filter)===null||p===void 0?void 0:p.event;return b&&((v=n.ids)===null||v===void 0?void 0:v.includes(b))&&(E==="*"||(E==null?void 0:E.toLocaleLowerCase())===((_=n.data)===null||_===void 0?void 0:_.type.toLocaleLowerCase()))&&(!(!((w=m.filter)===null||w===void 0)&&w.table)||m.filter.table===((y=n.data)===null||y===void 0?void 0:y.table))}else{const b=(x=(g=m==null?void 0:m.filter)===null||g===void 0?void 0:g.event)===null||x===void 0?void 0:x.toLocaleLowerCase();return b==="*"||b===((k=n==null?void 0:n.event)===null||k===void 0?void 0:k.toLocaleLowerCase())}else return m.type.toLocaleLowerCase()===a}).map(m=>{if(typeof f=="object"&&"ids"in f){const p=f.data,{schema:v,table:_,commit_timestamp:w,type:y,errors:g}=p;f=Object.assign(Object.assign({},{schema:v,table:_,commit_timestamp:w,eventType:y,new:{},old:{},errors:g}),this._getPayloadRecords(p))}m.callback(f,r)})}_isClosed(){return this.state===Se.closed}_isJoined(){return this.state===Se.joined}_isJoining(){return this.state===Se.joining}_isLeaving(){return this.state===Se.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,r){const s=e.toLocaleLowerCase(),i={type:s,filter:n,callback:r};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(e,n){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===r&&ss.isEqual(s.filter,n))})),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(e[r]!==n[r])return!1;return!0}static isFilterValueEqual(e,n){return(e??void 0)===(n??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Ct.close,{},e)}_onError(e){this._on(Ct.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Se.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=Cf(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=Cf(e.columns,e.old_record)),n}}const tc=()=>{},ka={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},xb=[1e3,2e3,5e3,1e4],bb=1e4,kb=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Sb{constructor(e,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=gu,this.transport=null,this.heartbeatIntervalMs=ka.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=tc,this.ref=0,this.reconnectTimer=null,this.vsn=jf,this.logger=tc,this.conn=null,this.sendBuffer=[],this.serializer=new pb,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=s=>s?(...i)=>s(...i):(...i)=>fetch(...i),!(!((r=n==null?void 0:n.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${e}/${yu.websocket}`,this.httpEndpoint=Ly(e),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=lb.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const n=e.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,n??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,r){this.logger(e,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case bn.connecting:return ur.Connecting;case bn.open:return ur.Open;case bn.closing:return ur.Closing;default:return ur.Closed}}isConnected(){return this.connectionState()===ur.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,n={config:{}}){const r=`realtime:${e}`,s=this.getChannels().find(i=>i.topic===r);if(s)return s;{const i=new ss(`realtime:${e}`,n,this);return this.channels.push(i),i}}push(e){const{topic:n,event:r,payload:s,ref:i}=e,a=()=>{this.encode(e,o=>{var l;(l=this.conn)===null||l===void 0||l.send(o)})};this.log("push",`${n} ${r} (${i})`,s),this.isConnected()?a():this.sendBuffer.push(a)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(hb,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},ka.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply"&&n.ref&&n.ref===this.pendingHeartbeatRef){const c=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error",c)}catch(u){this.log("error","error in heartbeat callback",u)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:r,event:s,payload:i,ref:a}=n,o=a?`(${a})`:"",l=i.status||"";this.log("receive",`${l} ${r} ${s} ${o}`.trim(),i),this.channels.filter(c=>c._isMember(r)).forEach(c=>c._trigger(s,i,a)),this._triggerStateCallbacks("message",n)})}_clearTimer(e){var n;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e),this.conn.readyState===bn.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===bn.open||this.conn.readyState===bn.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(n=>{this.log("error","error waiting for auth on connect",n),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this._terminateWorker()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(e){var n;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(Ct.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const r=e.match(/\?/)?"&":"?",s=new URLSearchParams(n);return`${e}${r}${s}`}_workerObjectUrl(e){let n;if(e)n=e;else{const r=new Blob([kb],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(e,n=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(e=null){let n,r=!1;if(e)n=e,r=!0;else if(this.accessToken)try{n=await this.accessToken()}catch(s){this.log("error","Error fetching access token from callback",s),n=this.accessTokenValue}else n=this.accessTokenValue;r?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(s=>{const i={access_token:n,version:ub};n&&s.updateJoinPayload(i),s.joinedOnce&&s._isJoined()&&s._push(Ct.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this._isManualToken()||this.setAuth().catch(n=>{this.log("error",`Error setting auth in ${e}`,n)})}_triggerStateCallbacks(e,n){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(n)}catch(s){this.log("error",`error in ${e} callback`,s)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new Dy(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},ka.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var n,r,s,i,a,o,l,c,u,h,f,m;switch(this.transport=(n=e==null?void 0:e.transport)!==null&&n!==void 0?n:null,this.timeout=(r=e==null?void 0:e.timeout)!==null&&r!==void 0?r:gu,this.heartbeatIntervalMs=(s=e==null?void 0:e.heartbeatIntervalMs)!==null&&s!==void 0?s:ka.HEARTBEAT_INTERVAL,this.worker=(i=e==null?void 0:e.worker)!==null&&i!==void 0?i:!1,this.accessToken=(a=e==null?void 0:e.accessToken)!==null&&a!==void 0?a:null,this.heartbeatCallback=(o=e==null?void 0:e.heartbeatCallback)!==null&&o!==void 0?o:tc,this.vsn=(l=e==null?void 0:e.vsn)!==null&&l!==void 0?l:jf,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(c=e==null?void 0:e.reconnectAfterMs)!==null&&c!==void 0?c:p=>xb[p-1]||bb,this.vsn){case db:this.encode=(u=e==null?void 0:e.encode)!==null&&u!==void 0?u:(p,v)=>v(JSON.stringify(p)),this.decode=(h=e==null?void 0:e.decode)!==null&&h!==void 0?h:(p,v)=>v(JSON.parse(p));break;case My:this.encode=(f=e==null?void 0:e.encode)!==null&&f!==void 0?f:this.serializer.encode.bind(this.serializer),this.decode=(m=e==null?void 0:e.decode)!==null&&m!==void 0?m:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}var $i=class extends Error{constructor(t,e){var n;super(t),this.name="IcebergError",this.status=e.status,this.icebergType=e.icebergType,this.icebergCode=e.icebergCode,this.details=e.details,this.isCommitStateUnknown=e.icebergType==="CommitStateUnknownException"||[500,502,504].includes(e.status)&&((n=e.icebergType)==null?void 0:n.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function Eb(t,e,n){const r=new URL(e,t);if(n)for(const[s,i]of Object.entries(n))i!==void 0&&r.searchParams.set(s,i);return r.toString()}async function jb(t){return!t||t.type==="none"?{}:t.type==="bearer"?{Authorization:`Bearer ${t.token}`}:t.type==="header"?{[t.name]:t.value}:t.type==="custom"?await t.getHeaders():{}}function Cb(t){const e=t.fetchImpl??globalThis.fetch;return{async request({method:n,path:r,query:s,body:i,headers:a}){const o=Eb(t.baseUrl,r,s),l=await jb(t.auth),c=await e(o,{method:n,headers:{...i?{"Content-Type":"application/json"}:{},...l,...a},body:i?JSON.stringify(i):void 0}),u=await c.text(),h=(c.headers.get("content-type")||"").includes("application/json"),f=h&&u?JSON.parse(u):u;if(!c.ok){const m=h?f:void 0,p=m==null?void 0:m.error;throw new $i((p==null?void 0:p.message)??`Request failed with status ${c.status}`,{status:c.status,icebergType:p==null?void 0:p.type,icebergCode:p==null?void 0:p.code,details:m})}return{status:c.status,headers:c.headers,data:f}}}}function Sa(t){return t.join("")}var Pb=class{constructor(t,e=""){this.client=t,this.prefix=e}async listNamespaces(t){const e=t?{parent:Sa(t.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:e})).data.namespaces.map(r=>({namespace:r}))}async createNamespace(t,e){const n={namespace:t.namespace,properties:e==null?void 0:e.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:n})).data}async dropNamespace(t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Sa(t.namespace)}`})}async loadNamespaceMetadata(t){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Sa(t.namespace)}`})).data.properties}}async namespaceExists(t){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Sa(t.namespace)}`}),!0}catch(e){if(e instanceof $i&&e.status===404)return!1;throw e}}async createNamespaceIfNotExists(t,e){try{return await this.createNamespace(t,e)}catch(n){if(n instanceof $i&&n.status===409)return;throw n}}};function Mr(t){return t.join("")}var Tb=class{constructor(t,e="",n){this.client=t,this.prefix=e,this.accessDelegation=n}async listTables(t){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Mr(t.namespace)}/tables`})).data.identifiers}async createTable(t,e){const n={};return this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Mr(t.namespace)}/tables`,body:e,headers:n})).data.metadata}async updateTable(t,e){const n=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Mr(t.namespace)}/tables/${t.name}`,body:e});return{"metadata-location":n.data["metadata-location"],metadata:n.data.metadata}}async dropTable(t,e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Mr(t.namespace)}/tables/${t.name}`,query:{purgeRequested:String((e==null?void 0:e.purge)??!1)}})}async loadTable(t){const e={};return this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Mr(t.namespace)}/tables/${t.name}`,headers:e})).data.metadata}async tableExists(t){const e={};this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Mr(t.namespace)}/tables/${t.name}`,headers:e}),!0}catch(n){if(n instanceof $i&&n.status===404)return!1;throw n}}async createTableIfNotExists(t,e){try{return await this.createTable(t,e)}catch(n){if(n instanceof $i&&n.status===409)return await this.loadTable({namespace:t.namespace,name:e.name});throw n}}},Nb=class{constructor(t){var r;let e="v1";t.catalogName&&(e+=`/${t.catalogName}`);const n=t.baseUrl.endsWith("/")?t.baseUrl:`${t.baseUrl}/`;this.client=Cb({baseUrl:n,auth:t.auth,fetchImpl:t.fetch}),this.accessDelegation=(r=t.accessDelegation)==null?void 0:r.join(","),this.namespaceOps=new Pb(this.client,e),this.tableOps=new Tb(this.client,e,this.accessDelegation)}async listNamespaces(t){return this.namespaceOps.listNamespaces(t)}async createNamespace(t,e){return this.namespaceOps.createNamespace(t,e)}async dropNamespace(t){await this.namespaceOps.dropNamespace(t)}async loadNamespaceMetadata(t){return this.namespaceOps.loadNamespaceMetadata(t)}async listTables(t){return this.tableOps.listTables(t)}async createTable(t,e){return this.tableOps.createTable(t,e)}async updateTable(t,e){return this.tableOps.updateTable(t,e)}async dropTable(t,e){await this.tableOps.dropTable(t,e)}async loadTable(t){return this.tableOps.loadTable(t)}async namespaceExists(t){return this.namespaceOps.namespaceExists(t)}async tableExists(t){return this.tableOps.tableExists(t)}async createNamespaceIfNotExists(t,e){return this.namespaceOps.createNamespaceIfNotExists(t,e)}async createTableIfNotExists(t,e){return this.tableOps.createTableIfNotExists(t,e)}},ml=class extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}};function de(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}var Ob=class extends ml{constructor(t,e,n){super(t),this.name="StorageApiError",this.status=e,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},wu=class extends ml{constructor(t,e){super(t),this.name="StorageUnknownError",this.originalError=e}};const Dd=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),Rb=()=>Response,_u=t=>{if(Array.isArray(t))return t.map(n=>_u(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,r])=>{const s=n.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[s]=_u(r)}),e},Ab=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},Mb=t=>!t||typeof t!="string"||t.length===0||t.length>100||t.trim()!==t||t.includes("/")||t.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(t);function Ui(t){"@babel/helpers - typeof";return Ui=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ui(t)}function Db(t,e){if(Ui(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Ui(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Ib(t){var e=Db(t,"string");return Ui(e)=="symbol"?e:e+""}function Lb(t,e,n){return(e=Ib(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Nf(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function U(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Nf(Object(n),!0).forEach(function(r){Lb(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Nf(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}const nc=t=>{var e;return t.msg||t.message||t.error_description||(typeof t.error=="string"?t.error:(e=t.error)===null||e===void 0?void 0:e.message)||JSON.stringify(t)},zb=async(t,e,n)=>{t instanceof await Rb()&&!(n!=null&&n.noResolveJson)?t.json().then(r=>{const s=t.status||500,i=(r==null?void 0:r.statusCode)||s+"";e(new Ob(nc(r),s,i))}).catch(r=>{e(new wu(nc(r),r))}):e(new wu(nc(t),t))},$b=(t,e,n,r)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!r?s:(Ab(r)?(s.headers=U({"Content-Type":"application/json"},e==null?void 0:e.headers),s.body=JSON.stringify(r)):s.body=r,e!=null&&e.duplex&&(s.duplex=e.duplex),U(U({},s),n))};async function ra(t,e,n,r,s,i){return new Promise((a,o)=>{t(n,$b(e,r,s,i)).then(l=>{if(!l.ok)throw l;return r!=null&&r.noResolveJson?l:l.json()}).then(l=>a(l)).catch(l=>zb(l,o,r))})}async function Fi(t,e,n,r){return ra(t,"GET",e,n,r)}async function Et(t,e,n,r,s){return ra(t,"POST",e,r,s,n)}async function xu(t,e,n,r,s){return ra(t,"PUT",e,r,s,n)}async function Ub(t,e,n,r){return ra(t,"HEAD",e,U(U({},n),{},{noResolveJson:!0}),r)}async function Id(t,e,n,r,s){return ra(t,"DELETE",e,r,s,n)}var Fb=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e}then(t,e){return this.execute().then(t,e)}async execute(){var t=this;try{return{data:(await t.downloadFn()).body,error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(de(e))return{data:null,error:e};throw e}}};let zy;zy=Symbol.toStringTag;var Bb=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e,this[zy]="BlobDownloadBuilder",this.promise=null}asStream(){return new Fb(this.downloadFn,this.shouldThrowOnError)}then(t,e){return this.getPromise().then(t,e)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var t=this;try{return{data:await(await t.downloadFn()).blob(),error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(de(e))return{data:null,error:e};throw e}}};const Wb={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Of={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var Hb=class{constructor(t,e={},n,r){this.shouldThrowOnError=!1,this.url=t,this.headers=e,this.bucketId=n,this.fetch=Dd(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async uploadOrUpdate(t,e,n,r){var s=this;try{let i;const a=U(U({},Of),r);let o=U(U({},s.headers),t==="POST"&&{"x-upsert":String(a.upsert)});const l=a.metadata;typeof Blob<"u"&&n instanceof Blob?(i=new FormData,i.append("cacheControl",a.cacheControl),l&&i.append("metadata",s.encodeMetadata(l)),i.append("",n)):typeof FormData<"u"&&n instanceof FormData?(i=n,i.has("cacheControl")||i.append("cacheControl",a.cacheControl),l&&!i.has("metadata")&&i.append("metadata",s.encodeMetadata(l))):(i=n,o["cache-control"]=`max-age=${a.cacheControl}`,o["content-type"]=a.contentType,l&&(o["x-metadata"]=s.toBase64(s.encodeMetadata(l))),(typeof ReadableStream<"u"&&i instanceof ReadableStream||i&&typeof i=="object"&&"pipe"in i&&typeof i.pipe=="function")&&!a.duplex&&(a.duplex="half")),r!=null&&r.headers&&(o=U(U({},o),r.headers));const c=s._removeEmptyFolders(e),u=s._getFinalPath(c),h=await(t=="PUT"?xu:Et)(s.fetch,`${s.url}/object/${u}`,i,U({headers:o},a!=null&&a.duplex?{duplex:a.duplex}:{}));return{data:{path:c,id:h.Id,fullPath:h.Key},error:null}}catch(i){if(s.shouldThrowOnError)throw i;if(de(i))return{data:null,error:i};throw i}}async upload(t,e,n){return this.uploadOrUpdate("POST",t,e,n)}async uploadToSignedUrl(t,e,n,r){var s=this;const i=s._removeEmptyFolders(t),a=s._getFinalPath(i),o=new URL(s.url+`/object/upload/sign/${a}`);o.searchParams.set("token",e);try{let l;const c=U({upsert:Of.upsert},r),u=U(U({},s.headers),{"x-upsert":String(c.upsert)});return typeof Blob<"u"&&n instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),l.append("",n)):typeof FormData<"u"&&n instanceof FormData?(l=n,l.append("cacheControl",c.cacheControl)):(l=n,u["cache-control"]=`max-age=${c.cacheControl}`,u["content-type"]=c.contentType),{data:{path:i,fullPath:(await xu(s.fetch,o.toString(),l,{headers:u})).Key},error:null}}catch(l){if(s.shouldThrowOnError)throw l;if(de(l))return{data:null,error:l};throw l}}async createSignedUploadUrl(t,e){var n=this;try{let r=n._getFinalPath(t);const s=U({},n.headers);e!=null&&e.upsert&&(s["x-upsert"]="true");const i=await Et(n.fetch,`${n.url}/object/upload/sign/${r}`,{},{headers:s}),a=new URL(n.url+i.url),o=a.searchParams.get("token");if(!o)throw new ml("No token returned by API");return{data:{signedUrl:a.toString(),path:t,token:o},error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(de(r))return{data:null,error:r};throw r}}async update(t,e,n){return this.uploadOrUpdate("PUT",t,e,n)}async move(t,e,n){var r=this;try{return{data:await Et(r.fetch,`${r.url}/object/move`,{bucketId:r.bucketId,sourceKey:t,destinationKey:e,destinationBucket:n==null?void 0:n.destinationBucket},{headers:r.headers}),error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(de(s))return{data:null,error:s};throw s}}async copy(t,e,n){var r=this;try{return{data:{path:(await Et(r.fetch,`${r.url}/object/copy`,{bucketId:r.bucketId,sourceKey:t,destinationKey:e,destinationBucket:n==null?void 0:n.destinationBucket},{headers:r.headers})).Key},error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(de(s))return{data:null,error:s};throw s}}async createSignedUrl(t,e,n){var r=this;try{let s=r._getFinalPath(t),i=await Et(r.fetch,`${r.url}/object/sign/${s}`,U({expiresIn:e},n!=null&&n.transform?{transform:n.transform}:{}),{headers:r.headers});const a=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return i={signedUrl:encodeURI(`${r.url}${i.signedURL}${a}`)},{data:i,error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(de(s))return{data:null,error:s};throw s}}async createSignedUrls(t,e,n){var r=this;try{const s=await Et(r.fetch,`${r.url}/object/sign/${r.bucketId}`,{expiresIn:e,paths:t},{headers:r.headers}),i=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:s.map(a=>U(U({},a),{},{signedUrl:a.signedURL?encodeURI(`${r.url}${a.signedURL}${i}`):null})),error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(de(s))return{data:null,error:s};throw s}}download(t,e){const n=typeof(e==null?void 0:e.transform)<"u"?"render/image/authenticated":"object",r=this.transformOptsToQueryString((e==null?void 0:e.transform)||{}),s=r?`?${r}`:"",i=this._getFinalPath(t),a=()=>Fi(this.fetch,`${this.url}/${n}/${i}${s}`,{headers:this.headers,noResolveJson:!0});return new Bb(a,this.shouldThrowOnError)}async info(t){var e=this;const n=e._getFinalPath(t);try{return{data:_u(await Fi(e.fetch,`${e.url}/object/info/${n}`,{headers:e.headers})),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(de(r))return{data:null,error:r};throw r}}async exists(t){var e=this;const n=e._getFinalPath(t);try{return await Ub(e.fetch,`${e.url}/object/${n}`,{headers:e.headers}),{data:!0,error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(de(r)&&r instanceof wu){const s=r.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:r}}throw r}}getPublicUrl(t,e){const n=this._getFinalPath(t),r=[],s=e!=null&&e.download?`download=${e.download===!0?"":e.download}`:"";s!==""&&r.push(s);const i=typeof(e==null?void 0:e.transform)<"u"?"render/image":"object",a=this.transformOptsToQueryString((e==null?void 0:e.transform)||{});a!==""&&r.push(a);let o=r.join("&");return o!==""&&(o=`?${o}`),{data:{publicUrl:encodeURI(`${this.url}/${i}/public/${n}${o}`)}}}async remove(t){var e=this;try{return{data:await Id(e.fetch,`${e.url}/object/${e.bucketId}`,{prefixes:t},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(de(n))return{data:null,error:n};throw n}}async list(t,e,n){var r=this;try{const s=U(U(U({},Wb),e),{},{prefix:t||""});return{data:await Et(r.fetch,`${r.url}/object/list/${r.bucketId}`,s,{headers:r.headers},n),error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(de(s))return{data:null,error:s};throw s}}async listV2(t,e){var n=this;try{const r=U({},t);return{data:await Et(n.fetch,`${n.url}/object/list-v2/${n.bucketId}`,r,{headers:n.headers},e),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(de(r))return{data:null,error:r};throw r}}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const e=[];return t.width&&e.push(`width=${t.width}`),t.height&&e.push(`height=${t.height}`),t.resize&&e.push(`resize=${t.resize}`),t.format&&e.push(`format=${t.format}`),t.quality&&e.push(`quality=${t.quality}`),e.join("&")}};const $y="2.91.0",Uy={"X-Client-Info":`storage-js/${$y}`};var Vb=class{constructor(t,e={},n,r){this.shouldThrowOnError=!1;const s=new URL(t);r!=null&&r.useNewHostname&&/supabase\.(co|in|red)$/.test(s.hostname)&&!s.hostname.includes("storage.supabase.")&&(s.hostname=s.hostname.replace("supabase.","storage.supabase.")),this.url=s.href.replace(/\/$/,""),this.headers=U(U({},Uy),e),this.fetch=Dd(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async listBuckets(t){var e=this;try{const n=e.listBucketOptionsToQueryString(t);return{data:await Fi(e.fetch,`${e.url}/bucket${n}`,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(de(n))return{data:null,error:n};throw n}}async getBucket(t){var e=this;try{return{data:await Fi(e.fetch,`${e.url}/bucket/${t}`,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(de(n))return{data:null,error:n};throw n}}async createBucket(t,e={public:!1}){var n=this;try{return{data:await Et(n.fetch,`${n.url}/bucket`,{id:t,name:t,type:e.type,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(de(r))return{data:null,error:r};throw r}}async updateBucket(t,e){var n=this;try{return{data:await xu(n.fetch,`${n.url}/bucket/${t}`,{id:t,name:t,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(de(r))return{data:null,error:r};throw r}}async emptyBucket(t){var e=this;try{return{data:await Et(e.fetch,`${e.url}/bucket/${t}/empty`,{},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(de(n))return{data:null,error:n};throw n}}async deleteBucket(t){var e=this;try{return{data:await Id(e.fetch,`${e.url}/bucket/${t}`,{},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(de(n))return{data:null,error:n};throw n}}listBucketOptionsToQueryString(t){const e={};return t&&("limit"in t&&(e.limit=String(t.limit)),"offset"in t&&(e.offset=String(t.offset)),t.search&&(e.search=t.search),t.sortColumn&&(e.sortColumn=t.sortColumn),t.sortOrder&&(e.sortOrder=t.sortOrder)),Object.keys(e).length>0?"?"+new URLSearchParams(e).toString():""}},qb=class{constructor(t,e={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=U(U({},Uy),e),this.fetch=Dd(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(t){var e=this;try{return{data:await Et(e.fetch,`${e.url}/bucket`,{name:t},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(de(n))return{data:null,error:n};throw n}}async listBuckets(t){var e=this;try{const n=new URLSearchParams;(t==null?void 0:t.limit)!==void 0&&n.set("limit",t.limit.toString()),(t==null?void 0:t.offset)!==void 0&&n.set("offset",t.offset.toString()),t!=null&&t.sortColumn&&n.set("sortColumn",t.sortColumn),t!=null&&t.sortOrder&&n.set("sortOrder",t.sortOrder),t!=null&&t.search&&n.set("search",t.search);const r=n.toString(),s=r?`${e.url}/bucket?${r}`:`${e.url}/bucket`;return{data:await Fi(e.fetch,s,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(de(n))return{data:null,error:n};throw n}}async deleteBucket(t){var e=this;try{return{data:await Id(e.fetch,`${e.url}/bucket/${t}`,{},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(de(n))return{data:null,error:n};throw n}}from(t){var e=this;if(!Mb(t))throw new ml("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const n=new Nb({baseUrl:this.url,catalogName:t,auth:{type:"custom",getHeaders:async()=>e.headers},fetch:this.fetch}),r=this.shouldThrowOnError;return new Proxy(n,{get(s,i){const a=s[i];return typeof a!="function"?a:async(...o)=>{try{return{data:await a.apply(s,o),error:null}}catch(l){if(r)throw l;return{data:null,error:l}}}}})}};const Ld={"X-Client-Info":`storage-js/${$y}`,"Content-Type":"application/json"};var Fy=class extends Error{constructor(t){super(t),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function ot(t){return typeof t=="object"&&t!==null&&"__isStorageVectorsError"in t}var rc=class extends Fy{constructor(t,e,n){super(t),this.name="StorageVectorsApiError",this.status=e,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},Kb=class extends Fy{constructor(t,e){super(t),this.name="StorageVectorsUnknownError",this.originalError=e}};const zd=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),Yb=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},Rf=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Gb=async(t,e,n)=>{if(t&&typeof t=="object"&&"status"in t&&"ok"in t&&typeof t.status=="number"&&!(n!=null&&n.noResolveJson)){const r=t.status||500,s=t;if(typeof s.json=="function")s.json().then(i=>{const a=(i==null?void 0:i.statusCode)||(i==null?void 0:i.code)||r+"";e(new rc(Rf(i),r,a))}).catch(()=>{const i=r+"";e(new rc(s.statusText||`HTTP ${r} error`,r,i))});else{const i=r+"";e(new rc(s.statusText||`HTTP ${r} error`,r,i))}}else e(new Kb(Rf(t),t))},Qb=(t,e,n,r)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return r?(Yb(r)?(s.headers=U({"Content-Type":"application/json"},e==null?void 0:e.headers),s.body=JSON.stringify(r)):s.body=r,U(U({},s),n)):s};async function Xb(t,e,n,r,s,i){return new Promise((a,o)=>{t(n,Qb(e,r,s,i)).then(l=>{if(!l.ok)throw l;if(r!=null&&r.noResolveJson)return l;const c=l.headers.get("content-type");return!c||!c.includes("application/json")?{}:l.json()}).then(l=>a(l)).catch(l=>Gb(l,o,r))})}async function lt(t,e,n,r,s){return Xb(t,"POST",e,r,s,n)}var Jb=class{constructor(t,e={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=U(U({},Ld),e),this.fetch=zd(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createIndex(t){var e=this;try{return{data:await lt(e.fetch,`${e.url}/CreateIndex`,t,{headers:e.headers})||{},error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(ot(n))return{data:null,error:n};throw n}}async getIndex(t,e){var n=this;try{return{data:await lt(n.fetch,`${n.url}/GetIndex`,{vectorBucketName:t,indexName:e},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(ot(r))return{data:null,error:r};throw r}}async listIndexes(t){var e=this;try{return{data:await lt(e.fetch,`${e.url}/ListIndexes`,t,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(ot(n))return{data:null,error:n};throw n}}async deleteIndex(t,e){var n=this;try{return{data:await lt(n.fetch,`${n.url}/DeleteIndex`,{vectorBucketName:t,indexName:e},{headers:n.headers})||{},error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(ot(r))return{data:null,error:r};throw r}}},Zb=class{constructor(t,e={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=U(U({},Ld),e),this.fetch=zd(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async putVectors(t){var e=this;try{if(t.vectors.length<1||t.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:await lt(e.fetch,`${e.url}/PutVectors`,t,{headers:e.headers})||{},error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(ot(n))return{data:null,error:n};throw n}}async getVectors(t){var e=this;try{return{data:await lt(e.fetch,`${e.url}/GetVectors`,t,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(ot(n))return{data:null,error:n};throw n}}async listVectors(t){var e=this;try{if(t.segmentCount!==void 0){if(t.segmentCount<1||t.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(t.segmentIndex!==void 0&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error(`segmentIndex must be between 0 and ${t.segmentCount-1}`)}return{data:await lt(e.fetch,`${e.url}/ListVectors`,t,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(ot(n))return{data:null,error:n};throw n}}async queryVectors(t){var e=this;try{return{data:await lt(e.fetch,`${e.url}/QueryVectors`,t,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(ot(n))return{data:null,error:n};throw n}}async deleteVectors(t){var e=this;try{if(t.keys.length<1||t.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:await lt(e.fetch,`${e.url}/DeleteVectors`,t,{headers:e.headers})||{},error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(ot(n))return{data:null,error:n};throw n}}},ek=class{constructor(t,e={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=U(U({},Ld),e),this.fetch=zd(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(t){var e=this;try{return{data:await lt(e.fetch,`${e.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:e.headers})||{},error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(ot(n))return{data:null,error:n};throw n}}async getBucket(t){var e=this;try{return{data:await lt(e.fetch,`${e.url}/GetVectorBucket`,{vectorBucketName:t},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(ot(n))return{data:null,error:n};throw n}}async listBuckets(t={}){var e=this;try{return{data:await lt(e.fetch,`${e.url}/ListVectorBuckets`,t,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(ot(n))return{data:null,error:n};throw n}}async deleteBucket(t){var e=this;try{return{data:await lt(e.fetch,`${e.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:e.headers})||{},error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(ot(n))return{data:null,error:n};throw n}}},tk=class extends ek{constructor(t,e={}){super(t,e.headers||{},e.fetch)}from(t){return new nk(this.url,this.headers,t,this.fetch)}async createBucket(t){var e=()=>super.createBucket,n=this;return e().call(n,t)}async getBucket(t){var e=()=>super.getBucket,n=this;return e().call(n,t)}async listBuckets(t={}){var e=()=>super.listBuckets,n=this;return e().call(n,t)}async deleteBucket(t){var e=()=>super.deleteBucket,n=this;return e().call(n,t)}},nk=class extends Jb{constructor(t,e,n,r){super(t,e,r),this.vectorBucketName=n}async createIndex(t){var e=()=>super.createIndex,n=this;return e().call(n,U(U({},t),{},{vectorBucketName:n.vectorBucketName}))}async listIndexes(t={}){var e=()=>super.listIndexes,n=this;return e().call(n,U(U({},t),{},{vectorBucketName:n.vectorBucketName}))}async getIndex(t){var e=()=>super.getIndex,n=this;return e().call(n,n.vectorBucketName,t)}async deleteIndex(t){var e=()=>super.deleteIndex,n=this;return e().call(n,n.vectorBucketName,t)}index(t){return new rk(this.url,this.headers,this.vectorBucketName,t,this.fetch)}},rk=class extends Zb{constructor(t,e,n,r,s){super(t,e,s),this.vectorBucketName=n,this.indexName=r}async putVectors(t){var e=()=>super.putVectors,n=this;return e().call(n,U(U({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async getVectors(t){var e=()=>super.getVectors,n=this;return e().call(n,U(U({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async listVectors(t={}){var e=()=>super.listVectors,n=this;return e().call(n,U(U({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async queryVectors(t){var e=()=>super.queryVectors,n=this;return e().call(n,U(U({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async deleteVectors(t){var e=()=>super.deleteVectors,n=this;return e().call(n,U(U({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}},sk=class extends Vb{constructor(t,e={},n,r){super(t,e,n,r)}from(t){return new Hb(this.url,this.headers,t,this.fetch)}get vectors(){return new tk(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new qb(this.url+"/iceberg",this.headers,this.fetch)}};const By="2.91.0",Hr=30*1e3,bu=3,sc=bu*Hr,ik="http://localhost:9999",ak="supabase.auth.token",ok={"X-Client-Info":`gotrue-js/${By}`},ku="X-Supabase-Api-Version",Wy={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},lk=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,ck=10*60*1e3;class Bi extends Error{constructor(e,n,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function I(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class uk extends Bi{constructor(e,n,r){super(e,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function dk(t){return I(t)&&t.name==="AuthApiError"}class dr extends Bi{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class pn extends Bi{constructor(e,n,r,s){super(e,r,s),this.name=n,this.status=r}}class st extends pn{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function hk(t){return I(t)&&t.name==="AuthSessionMissingError"}class Dr extends pn{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Ea extends pn{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class ja extends pn{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function fk(t){return I(t)&&t.name==="AuthImplicitGrantRedirectError"}class Af extends pn{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class pk extends pn{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class Su extends pn{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function ic(t){return I(t)&&t.name==="AuthRetryableFetchError"}class Mf extends pn{constructor(e,n,r){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class Eu extends pn{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const To="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Df=` 	
\r=`.split(""),mk=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<Df.length;e+=1)t[Df[e].charCodeAt(0)]=-2;for(let e=0;e<To.length;e+=1)t[To[e].charCodeAt(0)]=e;return t})();function If(t,e,n){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(To[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(To[r]),e.queuedBits-=6}}function Hy(t,e,n){const r=mk[t];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function Lf(t){const e=[],n=a=>{e.push(String.fromCodePoint(a))},r={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=a=>{vk(a,r,n)};for(let a=0;a<t.length;a+=1)Hy(t.charCodeAt(a),s,i);return e.join("")}function gk(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function yk(t,e){for(let n=0;n<t.length;n+=1){let r=t.charCodeAt(n);if(r>55295&&r<=56319){const s=(r-55296)*1024&65535;r=(t.charCodeAt(n+1)-56320&65535|s)+65536,n+=1}gk(r,e)}}function vk(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let r=1;r<6;r+=1)if(!(t>>7-r&1)){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function hs(t){const e=[],n={queue:0,queuedBits:0},r=s=>{e.push(s)};for(let s=0;s<t.length;s+=1)Hy(t.charCodeAt(s),n,r);return new Uint8Array(e)}function wk(t){const e=[];return yk(t,n=>e.push(n)),new Uint8Array(e)}function mr(t){const e=[],n={queue:0,queuedBits:0},r=s=>{e.push(s)};return t.forEach(s=>If(s,n,r)),If(null,n,r),e.join("")}function _k(t){return Math.round(Date.now()/1e3)+t}function xk(){return Symbol("auth-callback")}const Me=()=>typeof window<"u"&&typeof document<"u",er={tested:!1,writable:!1},Vy=()=>{if(!Me())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(er.tested)return er.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),er.tested=!0,er.writable=!0}catch{er.tested=!0,er.writable=!1}return er.writable};function bk(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((s,i)=>{e[i]=s})}catch{}return n.searchParams.forEach((r,s)=>{e[s]=r}),e}const qy=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),kk=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",Vr=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},tr=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Ae=async(t,e)=>{await t.removeItem(e)};class gl{constructor(){this.promise=new gl.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}gl.promiseConstructor=Promise;function ac(t){const e=t.split(".");if(e.length!==3)throw new Eu("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!lk.test(e[r]))throw new Eu("JWT not in base64url format");return{header:JSON.parse(Lf(e[0])),payload:JSON.parse(Lf(e[1])),signature:hs(e[2]),raw:{header:e[0],payload:e[1]}}}async function Sk(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function Ek(t,e){return new Promise((r,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const a=await t(i);if(!e(i,null,a)){r(a);return}}catch(a){if(!e(i,a)){s(a);return}}})()})}function jk(t){return("0"+t.toString(16)).substr(-2)}function Ck(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let s="";for(let i=0;i<56;i++)s+=n.charAt(Math.floor(Math.random()*r));return s}return crypto.getRandomValues(e),Array.from(e,jk).join("")}async function Pk(t){const n=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",n),s=new Uint8Array(r);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function Tk(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await Pk(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Ir(t,e,n=!1){const r=Ck();let s=r;n&&(s+="/PASSWORD_RECOVERY"),await Vr(t,`${e}-code-verifier`,s);const i=await Tk(r);return[i,r===i?"plain":"s256"]}const Nk=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Ok(t){const e=t.headers.get(ku);if(!e||!e.match(Nk))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function Rk(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function Ak(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Mk=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Lr(t){if(!Mk.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function oc(){const t={};return new Proxy(t,{get:(e,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Dk(t,e){return new Proxy(t,{get:(n,r,s)=>{if(r==="__isInsecureUserWarningProxy")return!0;if(typeof r=="symbol"){const i=r.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)"||i==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,r,s)}return!e.value&&typeof r=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(n,r,s)}})}function zf(t){return JSON.parse(JSON.stringify(t))}const or=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Ik=[502,503,504];async function $f(t){var e;if(!kk(t))throw new Su(or(t),0);if(Ik.includes(t.status))throw new Su(or(t),t.status);let n;try{n=await t.json()}catch(i){throw new dr(or(i),i)}let r;const s=Ok(t);if(s&&s.getTime()>=Wy["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new Mf(or(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new st}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((i,a)=>i&&typeof a=="string",!0))throw new Mf(or(n),t.status,n.weak_password.reasons);throw new uk(or(n),t.status||500,r)}const Lk=(t,e,n,r)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),n))};async function $(t,e,n,r){var s;const i=Object.assign({},r==null?void 0:r.headers);i[ku]||(i[ku]=Wy["2024-01-01"].name),r!=null&&r.jwt&&(i.Authorization=`Bearer ${r.jwt}`);const a=(s=r==null?void 0:r.query)!==null&&s!==void 0?s:{};r!=null&&r.redirectTo&&(a.redirect_to=r.redirectTo);const o=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",l=await zk(t,e,n+o,{headers:i,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(l):{data:Object.assign({},l),error:null}}async function zk(t,e,n,r,s,i){const a=Lk(e,r,s,i);let o;try{o=await t(n,Object.assign({},a))}catch(l){throw console.error(l),new Su(or(l),0)}if(o.ok||await $f(o),r!=null&&r.noResolveJson)return o;try{return await o.json()}catch(l){await $f(l)}}function kt(t){var e;let n=null;Fk(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=_k(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:r},error:null}}function Uf(t){const e=kt(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function En(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function $k(t){return{data:t,error:null}}function Uk(t){const{action_link:e,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i}=t,a=pl(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),o={action_link:e,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i},l=Object.assign({},a);return{data:{properties:o,user:l},error:null}}function Ff(t){return t}function Fk(t){return t.access_token&&t.refresh_token&&t.expires_in}const lc=["global","local","others"];class Bk{constructor({url:e="",headers:n={},fetch:r}){this.url=e,this.headers=n,this.fetch=qy(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,n=lc[0]){if(lc.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${lc.join(", ")}`);try{return await $(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(I(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,n={}){try{return await $(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:En})}catch(r){if(I(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:n}=e,r=pl(e,["options"]),s=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(s.new_email=r==null?void 0:r.newEmail,delete s.newEmail),await $(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:Uk,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(I(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await $(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:En})}catch(n){if(I(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,r,s,i,a,o,l;try{const c={nextPage:null,lastPage:0,total:0},u=await $(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(i=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:Ff});if(u.error)throw u.error;const h=await u.json(),f=(a=u.headers.get("x-total-count"))!==null&&a!==void 0?a:0,m=(l=(o=u.headers.get("link"))===null||o===void 0?void 0:o.split(","))!==null&&l!==void 0?l:[];return m.length>0&&(m.forEach(p=>{const v=parseInt(p.split(";")[0].split("=")[1].substring(0,1)),_=JSON.parse(p.split(";")[1].split("=")[1]);c[`${_}Page`]=v}),c.total=parseInt(f)),{data:Object.assign(Object.assign({},h),c),error:null}}catch(c){if(I(c))return{data:{users:[]},error:c};throw c}}async getUserById(e){Lr(e);try{return await $(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:En})}catch(n){if(I(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){Lr(e);try{return await $(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:En})}catch(r){if(I(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,n=!1){Lr(e);try{return await $(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:En})}catch(r){if(I(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){Lr(e.userId);try{const{data:n,error:r}=await $(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:n,error:r}}catch(n){if(I(n))return{data:null,error:n};throw n}}async _deleteFactor(e){Lr(e.userId),Lr(e.id);try{return{data:await $(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(I(n))return{data:null,error:n};throw n}}async _listOAuthClients(e){var n,r,s,i,a,o,l;try{const c={nextPage:null,lastPage:0,total:0},u=await $(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(i=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:Ff});if(u.error)throw u.error;const h=await u.json(),f=(a=u.headers.get("x-total-count"))!==null&&a!==void 0?a:0,m=(l=(o=u.headers.get("link"))===null||o===void 0?void 0:o.split(","))!==null&&l!==void 0?l:[];return m.length>0&&(m.forEach(p=>{const v=parseInt(p.split(";")[0].split("=")[1].substring(0,1)),_=JSON.parse(p.split(";")[1].split("=")[1]);c[`${_}Page`]=v}),c.total=parseInt(f)),{data:Object.assign(Object.assign({},h),c),error:null}}catch(c){if(I(c))return{data:{clients:[]},error:c};throw c}}async _createOAuthClient(e){try{return await $(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(I(n))return{data:null,error:n};throw n}}async _getOAuthClient(e){try{return await $(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(I(n))return{data:null,error:n};throw n}}async _updateOAuthClient(e,n){try{return await $(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:n,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(I(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(e){try{return await $(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if(I(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(e){try{return await $(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(I(n))return{data:null,error:n};throw n}}}function Bf(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}const zr={debug:!!(globalThis&&Vy()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Ky extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Wk extends Ky{}async function Hk(t,e,n){zr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),zr.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async s=>{if(s){zr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,s.name);try{return await n()}finally{zr.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,s.name)}}else{if(e===0)throw zr.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new Wk(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(zr.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function Vk(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function Yy(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function qk(t){return parseInt(t,16)}function Kk(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,r=>r.toString(16).padStart(2,"0")).join("")}function Yk(t){var e;const{chainId:n,domain:r,expirationTime:s,issuedAt:i=new Date,nonce:a,notBefore:o,requestId:l,resources:c,scheme:u,uri:h,version:f}=t;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(a&&a.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${a}`);if(!h)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(f!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${f}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const m=Yy(t.address),p=u?`${u}://${r}`:r,v=t.statement?`${t.statement}
`:"",_=`${p} wants you to sign in with your Ethereum account:
${m}

${v}`;let w=`URI: ${h}
Version: ${f}
Chain ID: ${n}${a?`
Nonce: ${a}`:""}
Issued At: ${i.toISOString()}`;if(s&&(w+=`
Expiration Time: ${s.toISOString()}`),o&&(w+=`
Not Before: ${o.toISOString()}`),l&&(w+=`
Request ID: ${l}`),c){let y=`
Resources:`;for(const g of c){if(!g||typeof g!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${g}`);y+=`
- ${g}`}w+=y}return`${_}
${w}`}class _e extends Error{constructor({message:e,code:n,cause:r,name:s}){var i;super(e,{cause:r}),this.__isWebAuthnError=!0,this.name=(i=s??(r instanceof Error?r.name:void 0))!==null&&i!==void 0?i:"Unknown Error",this.code=n}}class No extends _e{constructor(e,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:e}),this.name="WebAuthnUnknownError",this.originalError=n}}function Gk({error:t,options:e}){var n,r,s;const{publicKey:i}=e;if(!i)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new _e({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((n=i.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new _e({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((r=i.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new _e({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((s=i.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new _e({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new _e({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new _e({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return i.pubKeyCredParams.filter(o=>o.type==="public-key").length===0?new _e({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new _e({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const a=window.location.hostname;if(Gy(a)){if(i.rp.id!==a)return new _e({message:`The RP ID "${i.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new _e({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(i.user.id.byteLength<1||i.user.id.byteLength>64)return new _e({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new _e({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new _e({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function Qk({error:t,options:e}){const{publicKey:n}=e;if(!n)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new _e({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new _e({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const r=window.location.hostname;if(Gy(r)){if(n.rpId!==r)return new _e({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new _e({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new _e({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new _e({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}class Xk{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const Jk=new Xk;function Zk(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:n,excludeCredentials:r}=t,s=pl(t,["challenge","user","excludeCredentials"]),i=hs(e).buffer,a=Object.assign(Object.assign({},n),{id:hs(n.id).buffer}),o=Object.assign(Object.assign({},s),{challenge:i,user:a});if(r&&r.length>0){o.excludeCredentials=new Array(r.length);for(let l=0;l<r.length;l++){const c=r[l];o.excludeCredentials[l]=Object.assign(Object.assign({},c),{id:hs(c.id).buffer,type:c.type||"public-key",transports:c.transports})}}return o}function e1(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:n}=t,r=pl(t,["challenge","allowCredentials"]),s=hs(e).buffer,i=Object.assign(Object.assign({},r),{challenge:s});if(n&&n.length>0){i.allowCredentials=new Array(n.length);for(let a=0;a<n.length;a++){const o=n[a];i.allowCredentials[a]=Object.assign(Object.assign({},o),{id:hs(o.id).buffer,type:o.type||"public-key",transports:o.transports})}}return i}function t1(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t;return{id:t.id,rawId:t.id,response:{attestationObject:mr(new Uint8Array(t.response.attestationObject)),clientDataJSON:mr(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function n1(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t,r=t.getClientExtensionResults(),s=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:mr(new Uint8Array(s.authenticatorData)),clientDataJSON:mr(new Uint8Array(s.clientDataJSON)),signature:mr(new Uint8Array(s.signature)),userHandle:s.userHandle?mr(new Uint8Array(s.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function Gy(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function Wf(){var t,e;return!!(Me()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function r1(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new No("Browser returned unexpected credential type",e)}:{data:null,error:new No("Empty credential response",e)}}catch(e){return{data:null,error:Gk({error:e,options:t})}}}async function s1(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new No("Browser returned unexpected credential type",e)}:{data:null,error:new No("Empty credential response",e)}}catch(e){return{data:null,error:Qk({error:e,options:t})}}}const i1={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},a1={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Oo(...t){const e=s=>s!==null&&typeof s=="object"&&!Array.isArray(s),n=s=>s instanceof ArrayBuffer||ArrayBuffer.isView(s),r={};for(const s of t)if(s)for(const i in s){const a=s[i];if(a!==void 0)if(Array.isArray(a))r[i]=a;else if(n(a))r[i]=a;else if(e(a)){const o=r[i];e(o)?r[i]=Oo(o,a):r[i]=Oo(a)}else r[i]=a}return r}function o1(t,e){return Oo(i1,t,e||{})}function l1(t,e){return Oo(a1,t,e||{})}class c1{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:n,friendlyName:r,signal:s},i){try{const{data:a,error:o}=await this.client.mfa.challenge({factorId:e,webauthn:n});if(!a)return{data:null,error:o};const l=s??Jk.createNewAbortSignal();if(a.webauthn.type==="create"){const{user:c}=a.webauthn.credential_options.publicKey;c.name||(c.name=`${c.id}:${r}`),c.displayName||(c.displayName=c.name)}switch(a.webauthn.type){case"create":{const c=o1(a.webauthn.credential_options.publicKey,i==null?void 0:i.create),{data:u,error:h}=await r1({publicKey:c,signal:l});return u?{data:{factorId:e,challengeId:a.id,webauthn:{type:a.webauthn.type,credential_response:u}},error:null}:{data:null,error:h}}case"request":{const c=l1(a.webauthn.credential_options.publicKey,i==null?void 0:i.request),{data:u,error:h}=await s1(Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:c,signal:l}));return u?{data:{factorId:e,challengeId:a.id,webauthn:{type:a.webauthn.type,credential_response:u}},error:null}:{data:null,error:h}}}}catch(a){return I(a)?{data:null,error:a}:{data:null,error:new dr("Unexpected error in challenge",a)}}}async _verify({challengeId:e,factorId:n,webauthn:r}){return this.client.mfa.verify({factorId:n,challengeId:e,webauthn:r})}async _authenticate({factorId:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},i){if(!n)return{data:null,error:new Bi("rpId is required for WebAuthn authentication")};try{if(!Wf())return{data:null,error:new dr("Browser does not support WebAuthn",null)};const{data:a,error:o}=await this.challenge({factorId:e,webauthn:{rpId:n,rpOrigins:r},signal:s},{request:i});if(!a)return{data:null,error:o};const{webauthn:l}=a;return this._verify({factorId:e,challengeId:a.challengeId,webauthn:{type:l.type,rpId:n,rpOrigins:r,credential_response:l.credential_response}})}catch(a){return I(a)?{data:null,error:a}:{data:null,error:new dr("Unexpected error in authenticate",a)}}}async _register({friendlyName:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},i){if(!n)return{data:null,error:new Bi("rpId is required for WebAuthn registration")};try{if(!Wf())return{data:null,error:new dr("Browser does not support WebAuthn",null)};const{data:a,error:o}=await this._enroll({friendlyName:e});if(!a)return await this.client.mfa.listFactors().then(u=>{var h;return(h=u.data)===null||h===void 0?void 0:h.all.find(f=>f.factor_type==="webauthn"&&f.friendly_name===e&&f.status!=="unverified")}).then(u=>u?this.client.mfa.unenroll({factorId:u==null?void 0:u.id}):void 0),{data:null,error:o};const{data:l,error:c}=await this._challenge({factorId:a.id,friendlyName:a.friendly_name,webauthn:{rpId:n,rpOrigins:r},signal:s},{create:i});return l?this._verify({factorId:a.id,challengeId:l.challengeId,webauthn:{rpId:n,rpOrigins:r,type:l.webauthn.type,credential_response:l.webauthn.credential_response}}):{data:null,error:c}}catch(a){return I(a)?{data:null,error:a}:{data:null,error:new dr("Unexpected error in register",a)}}}}Vk();const u1={url:ik,storageKey:ak,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:ok,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function Hf(t,e,n){return await n()}const $r={};class Wi{get jwks(){var e,n;return(n=(e=$r[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(e){$r[this.storageKey]=Object.assign(Object.assign({},$r[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,n;return(n=(e=$r[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){$r[this.storageKey]=Object.assign(Object.assign({},$r[this.storageKey]),{cachedAt:e})}constructor(e){var n,r,s;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const i=Object.assign(Object.assign({},u1),e);if(this.storageKey=i.storageKey,this.instanceID=(n=Wi.nextInstanceID[this.storageKey])!==null&&n!==void 0?n:0,Wi.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.instanceID>0&&Me()){const a=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(a),this.logDebugMessages&&console.trace(a)}if(this.persistSession=i.persistSession,this.autoRefreshToken=i.autoRefreshToken,this.admin=new Bk({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=qy(i.fetch),this.lock=i.lock||Hf,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,this.throwOnError=i.throwOnError,this.lockAcquireTimeout=i.lockAcquireTimeout,i.lock?this.lock=i.lock:this.persistSession&&Me()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=Hk:this.lock=Hf,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new c1(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:Vy()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Bf(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=Bf(this.memoryStorage)),Me()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async a=>{this._debug("received broadcast notification from other tab or client",a),await this._notifyAllSubscribers(a.data.event,a.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${By}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let n={},r="none";if(Me()&&(n=bk(window.location.href),this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce")),Me()&&this.detectSessionInUrl&&r!=="none"){const{data:s,error:i}=await this._getSessionFromURL(n,r);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),fk(i)){const l=(e=i.details)===null||e===void 0?void 0:e.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:i}}return{error:i}}const{session:a,redirectType:o}=s;return this._debug("#_initialize()","detected session in URL",a,"redirect type",o),await this._saveSession(a),setTimeout(async()=>{o==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return I(n)?this._returnResult({error:n}):this._returnResult({error:new dr("Unexpected error during initialization",n)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,r,s;try{const i=await $(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.captchaToken}},xform:kt}),{data:a,error:o}=i;if(o||!a)return this._returnResult({data:{user:null,session:null},error:o});const l=a.session,c=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:c,session:l},error:null})}catch(i){if(I(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signUp(e){var n,r,s;try{let i;if("email"in e){const{email:u,password:h,options:f}=e;let m=null,p=null;this.flowType==="pkce"&&([m,p]=await Ir(this.storage,this.storageKey)),i=await $(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:u,password:h,data:(n=f==null?void 0:f.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:m,code_challenge_method:p},xform:kt})}else if("phone"in e){const{phone:u,password:h,options:f}=e;i=await $(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:h,data:(r=f==null?void 0:f.data)!==null&&r!==void 0?r:{},channel:(s=f==null?void 0:f.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:kt})}else throw new Ea("You must provide either an email or phone number and a password");const{data:a,error:o}=i;if(o||!a)return await Ae(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:o});const l=a.session,c=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:c,session:l},error:null})}catch(i){if(await Ae(this.storage,`${this.storageKey}-code-verifier`),I(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithPassword(e){try{let n;if("email"in e){const{email:i,password:a,options:o}=e;n=await $(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:Uf})}else if("phone"in e){const{phone:i,password:a,options:o}=e;n=await $(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:Uf})}else throw new Ea("You must provide either an email or phone number and a password");const{data:r,error:s}=n;if(s)return this._returnResult({data:{user:null,session:null},error:s});if(!r||!r.session||!r.user){const i=new Dr;return this._returnResult({data:{user:null,session:null},error:i})}return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),this._returnResult({data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:s})}catch(n){if(I(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOAuth(e){var n,r,s,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;switch(n){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(e){var n,r,s,i,a,o,l,c,u,h,f;let m,p;if("message"in e)m=e.message,p=e.signature;else{const{chain:v,wallet:_,statement:w,options:y}=e;let g;if(Me())if(typeof _=="object")g=_;else{const N=window;if("ethereum"in N&&typeof N.ethereum=="object"&&"request"in N.ethereum&&typeof N.ethereum.request=="function")g=N.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof _!="object"||!(y!=null&&y.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");g=_}const x=new URL((n=y==null?void 0:y.url)!==null&&n!==void 0?n:window.location.href),k=await g.request({method:"eth_requestAccounts"}).then(N=>N).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!k||k.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const b=Yy(k[0]);let E=(r=y==null?void 0:y.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!E){const N=await g.request({method:"eth_chainId"});E=qk(N)}const j={domain:x.host,address:b,statement:w,uri:x.href,version:"1",chainId:E,nonce:(s=y==null?void 0:y.signInWithEthereum)===null||s===void 0?void 0:s.nonce,issuedAt:(a=(i=y==null?void 0:y.signInWithEthereum)===null||i===void 0?void 0:i.issuedAt)!==null&&a!==void 0?a:new Date,expirationTime:(o=y==null?void 0:y.signInWithEthereum)===null||o===void 0?void 0:o.expirationTime,notBefore:(l=y==null?void 0:y.signInWithEthereum)===null||l===void 0?void 0:l.notBefore,requestId:(c=y==null?void 0:y.signInWithEthereum)===null||c===void 0?void 0:c.requestId,resources:(u=y==null?void 0:y.signInWithEthereum)===null||u===void 0?void 0:u.resources};m=Yk(j),p=await g.request({method:"personal_sign",params:[Kk(m),b]})}try{const{data:v,error:_}=await $(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:m,signature:p},!((h=e.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(f=e.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:kt});if(_)throw _;if(!v||!v.session||!v.user){const w=new Dr;return this._returnResult({data:{user:null,session:null},error:w})}return v.session&&(await this._saveSession(v.session),await this._notifyAllSubscribers("SIGNED_IN",v.session)),this._returnResult({data:Object.assign({},v),error:_})}catch(v){if(I(v))return this._returnResult({data:{user:null,session:null},error:v});throw v}}async signInWithSolana(e){var n,r,s,i,a,o,l,c,u,h,f,m;let p,v;if("message"in e)p=e.message,v=e.signature;else{const{chain:_,wallet:w,statement:y,options:g}=e;let x;if(Me())if(typeof w=="object")x=w;else{const b=window;if("solana"in b&&typeof b.solana=="object"&&("signIn"in b.solana&&typeof b.solana.signIn=="function"||"signMessage"in b.solana&&typeof b.solana.signMessage=="function"))x=b.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof w!="object"||!(g!=null&&g.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");x=w}const k=new URL((n=g==null?void 0:g.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in x&&x.signIn){const b=await x.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},g==null?void 0:g.signInWithSolana),{version:"1",domain:k.host,uri:k.href}),y?{statement:y}:null));let E;if(Array.isArray(b)&&b[0]&&typeof b[0]=="object")E=b[0];else if(b&&typeof b=="object"&&"signedMessage"in b&&"signature"in b)E=b;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in E&&"signature"in E&&(typeof E.signedMessage=="string"||E.signedMessage instanceof Uint8Array)&&E.signature instanceof Uint8Array)p=typeof E.signedMessage=="string"?E.signedMessage:new TextDecoder().decode(E.signedMessage),v=E.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in x)||typeof x.signMessage!="function"||!("publicKey"in x)||typeof x!="object"||!x.publicKey||!("toBase58"in x.publicKey)||typeof x.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");p=[`${k.host} wants you to sign in with your Solana account:`,x.publicKey.toBase58(),...y?["",y,""]:[""],"Version: 1",`URI: ${k.href}`,`Issued At: ${(s=(r=g==null?void 0:g.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=g==null?void 0:g.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${g.signInWithSolana.notBefore}`]:[],...!((a=g==null?void 0:g.signInWithSolana)===null||a===void 0)&&a.expirationTime?[`Expiration Time: ${g.signInWithSolana.expirationTime}`]:[],...!((o=g==null?void 0:g.signInWithSolana)===null||o===void 0)&&o.chainId?[`Chain ID: ${g.signInWithSolana.chainId}`]:[],...!((l=g==null?void 0:g.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${g.signInWithSolana.nonce}`]:[],...!((c=g==null?void 0:g.signInWithSolana)===null||c===void 0)&&c.requestId?[`Request ID: ${g.signInWithSolana.requestId}`]:[],...!((h=(u=g==null?void 0:g.signInWithSolana)===null||u===void 0?void 0:u.resources)===null||h===void 0)&&h.length?["Resources",...g.signInWithSolana.resources.map(E=>`- ${E}`)]:[]].join(`
`);const b=await x.signMessage(new TextEncoder().encode(p),"utf8");if(!b||!(b instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");v=b}}try{const{data:_,error:w}=await $(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:p,signature:mr(v)},!((f=e.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(m=e.options)===null||m===void 0?void 0:m.captchaToken}}:null),xform:kt});if(w)throw w;if(!_||!_.session||!_.user){const y=new Dr;return this._returnResult({data:{user:null,session:null},error:y})}return _.session&&(await this._saveSession(_.session),await this._notifyAllSubscribers("SIGNED_IN",_.session)),this._returnResult({data:Object.assign({},_),error:w})}catch(_){if(I(_))return this._returnResult({data:{user:null,session:null},error:_});throw _}}async _exchangeCodeForSession(e){const n=await tr(this.storage,`${this.storageKey}-code-verifier`),[r,s]=(n??"").split("/");try{if(!r&&this.flowType==="pkce")throw new pk;const{data:i,error:a}=await $(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:kt});if(await Ae(this.storage,`${this.storageKey}-code-verifier`),a)throw a;if(!i||!i.session||!i.user){const o=new Dr;return this._returnResult({data:{user:null,session:null,redirectType:null},error:o})}return i.session&&(await this._saveSession(i.session),setTimeout(async()=>{await this._notifyAllSubscribers("SIGNED_IN",i.session)},0)),this._returnResult({data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:a})}catch(i){if(await Ae(this.storage,`${this.storageKey}-code-verifier`),I(i))return this._returnResult({data:{user:null,session:null,redirectType:null},error:i});throw i}}async signInWithIdToken(e){try{const{options:n,provider:r,token:s,access_token:i,nonce:a}=e,o=await $(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,access_token:i,nonce:a,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:kt}),{data:l,error:c}=o;if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!l||!l.session||!l.user){const u=new Dr;return this._returnResult({data:{user:null,session:null},error:u})}return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),this._returnResult({data:l,error:c})}catch(n){if(I(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOtp(e){var n,r,s,i,a;try{if("email"in e){const{email:o,options:l}=e;let c=null,u=null;this.flowType==="pkce"&&([c,u]=await Ir(this.storage,this.storageKey));const{error:h}=await $(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:o,data:(n=l==null?void 0:l.data)!==null&&n!==void 0?n:{},create_user:(r=l==null?void 0:l.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:c,code_challenge_method:u},redirectTo:l==null?void 0:l.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:h})}if("phone"in e){const{phone:o,options:l}=e,{data:c,error:u}=await $(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:o,data:(s=l==null?void 0:l.data)!==null&&s!==void 0?s:{},create_user:(i=l==null?void 0:l.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(a=l==null?void 0:l.channel)!==null&&a!==void 0?a:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:u})}throw new Ea("You must provide either an email or phone number.")}catch(o){if(await Ae(this.storage,`${this.storageKey}-code-verifier`),I(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async verifyOtp(e){var n,r;try{let s,i;"options"in e&&(s=(n=e.options)===null||n===void 0?void 0:n.redirectTo,i=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:a,error:o}=await $(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:kt});if(o)throw o;if(!a)throw new Error("An error occurred on token verification.");const l=a.session,c=a.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),this._returnResult({data:{user:c,session:l},error:null})}catch(s){if(I(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithSSO(e){var n,r,s,i,a;try{let o=null,l=null;this.flowType==="pkce"&&([o,l]=await Ir(this.storage,this.storageKey));const c=await $(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((s=e==null?void 0:e.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:o,code_challenge_method:l}),headers:this.headers,xform:$k});return!((i=c.data)===null||i===void 0)&&i.url&&Me()&&!(!((a=e.options)===null||a===void 0)&&a.skipBrowserRedirect)&&window.location.assign(c.data.url),this._returnResult(c)}catch(o){if(await Ae(this.storage,`${this.storageKey}-code-verifier`),I(o))return this._returnResult({data:null,error:o});throw o}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;if(r)throw r;if(!n)throw new st;const{error:s}=await $(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return this._returnResult({data:{user:null,session:null},error:s})})}catch(e){if(I(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:r,type:s,options:i}=e,{error:a}=await $(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:a})}else if("phone"in e){const{phone:r,type:s,options:i}=e,{data:a,error:o}=await $(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:a==null?void 0:a.message_id},error:o})}throw new Ea("You must provide either an email or phone number and a type")}catch(n){if(I(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await tr(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<sc:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const a=await tr(this.userStorage,this.storageKey+"-user");a!=null&&a.user?e.user=a.user:e.user=oc()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const a={value:this.suppressGetSessionWarning};e.user=Dk(e.user,a),a.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?this._returnResult({data:{session:null},error:i}):this._returnResult({data:{session:s},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;const n=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return n.data.user&&(this.suppressGetSessionWarning=!0),n}async _getUser(e){try{return e?await $(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:En}):await this._useSession(async n=>{var r,s,i;const{data:a,error:o}=n;if(o)throw o;return!(!((r=a.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new st}:await $(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=a.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:En})})}catch(n){if(I(n))return hk(n)&&(await this._removeSession(),await Ae(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:n});throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async r=>{const{data:s,error:i}=r;if(i)throw i;if(!s.session)throw new st;const a=s.session;let o=null,l=null;this.flowType==="pkce"&&e.email!=null&&([o,l]=await Ir(this.storage,this.storageKey));const{data:c,error:u}=await $(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:o,code_challenge_method:l}),jwt:a.access_token,xform:En});if(u)throw u;return a.user=c.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),this._returnResult({data:{user:a.user},error:null})})}catch(r){if(await Ae(this.storage,`${this.storageKey}-code-verifier`),I(r))return this._returnResult({data:{user:null},error:r});throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new st;const n=Date.now()/1e3;let r=n,s=!0,i=null;const{payload:a}=ac(e.access_token);if(a.exp&&(r=a.exp,s=r<=n),s){const{data:o,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return this._returnResult({data:{user:null,session:null},error:l});if(!o)return{data:{user:null,session:null},error:null};i=o}else{const{data:o,error:l}=await this._getUser(e.access_token);if(l)throw l;i={access_token:e.access_token,refresh_token:e.refresh_token,user:o.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return this._returnResult({data:{user:i.user,session:i},error:null})}catch(n){if(I(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var r;if(!e){const{data:a,error:o}=n;if(o)throw o;e=(r=a.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new st;const{data:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?this._returnResult({data:{user:null,session:null},error:i}):s?this._returnResult({data:{user:s.user,session:s},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(n){if(I(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async _getSessionFromURL(e,n){try{if(!Me())throw new ja("No browser detected.");if(e.error||e.error_description||e.error_code)throw new ja(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new Af("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new ja("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Af("No code detected.");const{data:y,error:g}=await this._exchangeCodeForSession(e.code);if(g)throw g;const x=new URL(window.location.href);return x.searchParams.delete("code"),window.history.replaceState(window.history.state,"",x.toString()),{data:{session:y.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:s,access_token:i,refresh_token:a,expires_in:o,expires_at:l,token_type:c}=e;if(!i||!o||!a||!c)throw new ja("No session defined in URL");const u=Math.round(Date.now()/1e3),h=parseInt(o);let f=u+h;l&&(f=parseInt(l));const m=f-u;m*1e3<=Hr&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${m}s, should have been closer to ${h}s`);const p=f-h;u-p>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",p,f,u):u-p<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",p,f,u);const{data:v,error:_}=await this._getUser(i);if(_)throw _;const w={provider_token:r,provider_refresh_token:s,access_token:i,expires_in:h,expires_at:f,refresh_token:a,token_type:c,user:v.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:w,redirectType:e.type},error:null})}catch(r){if(I(r))return this._returnResult({data:{session:null,redirectType:null},error:r});throw r}}_isImplicitGrantCallback(e){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),e):!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await tr(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return this._returnResult({error:i});const a=(r=s.session)===null||r===void 0?void 0:r.access_token;if(a){const{error:o}=await this.admin.signOut(a,e);if(o&&!(dk(o)&&(o.status===404||o.status===401||o.status===403)))return this._returnResult({error:o})}return e!=="others"&&(await this._removeSession(),await Ae(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const n=xk(),r={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async n=>{var r,s;try{const{data:{session:i},error:a}=n;if(a)throw a;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,n={}){let r=null,s=null;this.flowType==="pkce"&&([r,s]=await Ir(this.storage,this.storageKey,!0));try{return await $(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(i){if(await Ae(this.storage,`${this.storageKey}-code-verifier`),I(i))return this._returnResult({data:null,error:i});throw i}}async getUserIdentities(){var e;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return this._returnResult({data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(n){if(I(n))return this._returnResult({data:null,error:n});throw n}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var n;try{const{data:r,error:s}=await this._useSession(async i=>{var a,o,l,c,u;const{data:h,error:f}=i;if(f)throw f;const m=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(a=e.options)===null||a===void 0?void 0:a.redirectTo,scopes:(o=e.options)===null||o===void 0?void 0:o.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await $(this.fetch,"GET",m,{headers:this.headers,jwt:(u=(c=h.session)===null||c===void 0?void 0:c.access_token)!==null&&u!==void 0?u:void 0})});if(s)throw s;return Me()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),this._returnResult({data:{provider:e.provider,url:r==null?void 0:r.url},error:null})}catch(r){if(I(r))return this._returnResult({data:{provider:e.provider,url:null},error:r});throw r}}async linkIdentityIdToken(e){return await this._useSession(async n=>{var r;try{const{error:s,data:{session:i}}=n;if(s)throw s;const{options:a,provider:o,token:l,access_token:c,nonce:u}=e,h=await $(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=i==null?void 0:i.access_token)!==null&&r!==void 0?r:void 0,body:{provider:o,id_token:l,access_token:c,nonce:u,link_identity:!0,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:kt}),{data:f,error:m}=h;return m?this._returnResult({data:{user:null,session:null},error:m}):!f||!f.session||!f.user?this._returnResult({data:{user:null,session:null},error:new Dr}):(f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("USER_UPDATED",f.session)),this._returnResult({data:f,error:m}))}catch(s){if(await Ae(this.storage,`${this.storageKey}-code-verifier`),I(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}})}async unlinkIdentity(e){try{return await this._useSession(async n=>{var r,s;const{data:i,error:a}=n;if(a)throw a;return await $(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(r=i.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0})})}catch(n){if(I(n))return this._returnResult({data:null,error:n});throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await Ek(async s=>(s>0&&await Sk(200*Math.pow(2,s-1)),this._debug(n,"refreshing attempt",s),await $(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:kt})),(s,i)=>{const a=200*Math.pow(2,s);return i&&ic(i)&&Date.now()+a-r<Hr})}catch(r){if(this._debug(n,"error",r),I(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",r),Me()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const s=await tr(this.storage,this.storageKey);if(s&&this.userStorage){let a=await tr(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!a&&(a={user:s.user},await Vr(this.userStorage,this.storageKey+"-user",a)),s.user=(e=a==null?void 0:a.user)!==null&&e!==void 0?e:oc()}else if(s&&!s.user&&!s.user){const a=await tr(this.storage,this.storageKey+"-user");a&&(a!=null&&a.user)?(s.user=a.user,await Ae(this.storage,this.storageKey+"-user"),await Vr(this.storage,this.storageKey,s)):s.user=oc()}if(this._debug(r,"session from storage",s),!this._isValidSession(s)){this._debug(r,"session is not valid"),s!==null&&await this._removeSession();return}const i=((n=s.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<sc;if(this._debug(r,`session has${i?"":" not"} expired with margin of ${sc}s`),i){if(this.autoRefreshToken&&s.refresh_token){const{error:a}=await this._callRefreshToken(s.refresh_token);a&&(console.error(a),ic(a)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:a,error:o}=await this._getUser(s.access_token);!o&&(a!=null&&a.user)?(s.user=a.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(a){console.error("Error getting user data:",a),this._debug(r,"error getting user data, skipping SIGNED_IN notification",a)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(r,"error",s),console.error(s);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var n,r;if(!e)throw new st;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new gl;const{data:i,error:a}=await this._refreshAccessToken(e);if(a)throw a;if(!i.session)throw new st;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const o={data:i.session,error:null};return this.refreshingDeferred.resolve(o),o}catch(i){if(this._debug(s,"error",i),I(i)){const a={data:null,error:i};return ic(i)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(a),a}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,n,r=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:n});const i=[],a=Array.from(this.stateChangeEmitters.values()).map(async o=>{try{await o.callback(e,n)}catch(l){i.push(l)}});if(await Promise.all(a),i.length>0){for(let o=0;o<i.length;o+=1)console.error(i[o]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await Ae(this.storage,`${this.storageKey}-code-verifier`);const n=Object.assign({},e),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await Vr(this.userStorage,this.storageKey+"-user",{user:n.user});const s=Object.assign({},n);delete s.user;const i=zf(s);await Vr(this.storage,this.storageKey,i)}else{const s=zf(n);await Vr(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await Ae(this.storage,this.storageKey),await Ae(this.storage,this.storageKey+"-code-verifier"),await Ae(this.storage,this.storageKey+"-user"),this.userStorage&&await Ae(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Me()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Hr);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e);const n=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=n,n&&typeof n=="object"&&typeof n.unref=="function"?n.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(n)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e);const n=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,n&&clearTimeout(n)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((r.expires_at*1e3-e)/Hr);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${Hr}ms, refresh threshold is ${bu} ticks`),s<=bu&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof Ky)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Me()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,r){const s=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&s.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&s.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[i,a]=await Ir(this.storage,this.storageKey),o=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(a)}`});s.push(o.toString())}if(r!=null&&r.queryParams){const i=new URLSearchParams(r.queryParams);s.push(i.toString())}return r!=null&&r.skipBrowserRedirect&&s.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;return i?this._returnResult({data:null,error:i}):await $(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(I(n))return this._returnResult({data:null,error:n});throw n}}async _enroll(e){try{return await this._useSession(async n=>{var r,s;const{data:i,error:a}=n;if(a)return this._returnResult({data:null,error:a});const o=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:l,error:c}=await $(this.fetch,"POST",`${this.url}/factors`,{body:o,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return c?this._returnResult({data:null,error:c}):(e.factorType==="totp"&&l.type==="totp"&&(!((s=l==null?void 0:l.totp)===null||s===void 0)&&s.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),this._returnResult({data:l,error:null}))})}catch(n){if(I(n))return this._returnResult({data:null,error:n});throw n}}async _verify(e){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return this._returnResult({data:null,error:i});const a=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?t1(e.webauthn.credential_response):n1(e.webauthn.credential_response)})}:{code:e.code}),{data:o,error:l}=await $(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:a,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return l?this._returnResult({data:null,error:l}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),this._returnResult({data:o,error:l}))})}catch(n){if(I(n))return this._returnResult({data:null,error:n});throw n}})}async _challenge(e){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return this._returnResult({data:null,error:i});const a=await $(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});if(a.error)return a;const{data:o}=a;if(o.type!=="webauthn")return{data:o,error:null};switch(o.webauthn.type){case"create":return{data:Object.assign(Object.assign({},o),{webauthn:Object.assign(Object.assign({},o.webauthn),{credential_options:Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:Zk(o.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},o),{webauthn:Object.assign(Object.assign({},o.webauthn),{credential_options:Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:e1(o.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(I(n))return this._returnResult({data:null,error:n});throw n}})}async _challengeAndVerify(e){const{data:n,error:r}=await this._challenge({factorId:e.factorId});return r?this._returnResult({data:null,error:r}):await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){var e;const{data:{user:n},error:r}=await this.getUser();if(r)return{data:null,error:r};const s={all:[],phone:[],totp:[],webauthn:[]};for(const i of(e=n==null?void 0:n.factors)!==null&&e!==void 0?e:[])s.all.push(i),i.status==="verified"&&s[i.factor_type].push(i);return{data:s,error:null}}async _getAuthenticatorAssuranceLevel(){var e,n;const{data:{session:r},error:s}=await this.getSession();if(s)return this._returnResult({data:null,error:s});if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:i}=ac(r.access_token);let a=null;i.aal&&(a=i.aal);let o=a;((n=(e=r.user.factors)===null||e===void 0?void 0:e.filter(u=>u.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(o="aal2");const c=i.amr||[];return{data:{currentLevel:a,nextLevel:o,currentAuthenticationMethods:c},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async n=>{const{data:{session:r},error:s}=n;return s?this._returnResult({data:null,error:s}):r?await $(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:r.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new st})})}catch(n){if(I(n))return this._returnResult({data:null,error:n});throw n}}async _approveAuthorization(e,n){try{return await this._useSession(async r=>{const{data:{session:s},error:i}=r;if(i)return this._returnResult({data:null,error:i});if(!s)return this._returnResult({data:null,error:new st});const a=await $(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"approve"},xform:o=>({data:o,error:null})});return a.data&&a.data.redirect_url&&Me()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(a.data.redirect_url),a})}catch(r){if(I(r))return this._returnResult({data:null,error:r});throw r}}async _denyAuthorization(e,n){try{return await this._useSession(async r=>{const{data:{session:s},error:i}=r;if(i)return this._returnResult({data:null,error:i});if(!s)return this._returnResult({data:null,error:new st});const a=await $(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"deny"},xform:o=>({data:o,error:null})});return a.data&&a.data.redirect_url&&Me()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(a.data.redirect_url),a})}catch(r){if(I(r))return this._returnResult({data:null,error:r});throw r}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;return r?this._returnResult({data:null,error:r}):n?await $(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,xform:s=>({data:s,error:null})}):this._returnResult({data:null,error:new st})})}catch(e){if(I(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async n=>{const{data:{session:r},error:s}=n;return s?this._returnResult({data:null,error:s}):r?(await $(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new st})})}catch(n){if(I(n))return this._returnResult({data:null,error:n});throw n}}async fetchJwk(e,n={keys:[]}){let r=n.keys.find(o=>o.kid===e);if(r)return r;const s=Date.now();if(r=this.jwks.keys.find(o=>o.kid===e),r&&this.jwks_cached_at+ck>s)return r;const{data:i,error:a}=await $(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=s,r=i.keys.find(o=>o.kid===e),!r)?null:r}async getClaims(e,n={}){try{let r=e;if(!r){const{data:m,error:p}=await this.getSession();if(p||!m.session)return this._returnResult({data:null,error:p});r=m.session.access_token}const{header:s,payload:i,signature:a,raw:{header:o,payload:l}}=ac(r);n!=null&&n.allowExpired||Rk(i.exp);const c=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!c){const{error:m}=await this.getUser(r);if(m)throw m;return{data:{claims:i,header:s,signature:a},error:null}}const u=Ak(s.alg),h=await crypto.subtle.importKey("jwk",c,u,!0,["verify"]);if(!await crypto.subtle.verify(u,h,a,wk(`${o}.${l}`)))throw new Eu("Invalid JWT signature");return{data:{claims:i,header:s,signature:a},error:null}}catch(r){if(I(r))return this._returnResult({data:null,error:r});throw r}}}Wi.nextInstanceID={};const d1=Wi,h1="2.91.0";let Qs="";typeof Deno<"u"?Qs="deno":typeof document<"u"?Qs="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Qs="react-native":Qs="node";const f1={"X-Client-Info":`supabase-js-${Qs}/${h1}`},p1={headers:f1},m1={schema:"public"},g1={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},y1={};function Hi(t){"@babel/helpers - typeof";return Hi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Hi(t)}function v1(t,e){if(Hi(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Hi(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function w1(t){var e=v1(t,"string");return Hi(e)=="symbol"?e:e+""}function _1(t,e,n){return(e=w1(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Vf(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function ge(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Vf(Object(n),!0).forEach(function(r){_1(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Vf(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}const x1=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),b1=()=>Headers,k1=(t,e,n)=>{const r=x1(n),s=b1();return async(i,a)=>{var o;const l=(o=await e())!==null&&o!==void 0?o:t;let c=new s(a==null?void 0:a.headers);return c.has("apikey")||c.set("apikey",t),c.has("Authorization")||c.set("Authorization",`Bearer ${l}`),r(i,ge(ge({},a),{},{headers:c}))}};function S1(t){return t.endsWith("/")?t:t+"/"}function E1(t,e){var n,r;const{db:s,auth:i,realtime:a,global:o}=t,{db:l,auth:c,realtime:u,global:h}=e,f={db:ge(ge({},l),s),auth:ge(ge({},c),i),realtime:ge(ge({},u),a),storage:{},global:ge(ge(ge({},h),o),{},{headers:ge(ge({},(n=h==null?void 0:h.headers)!==null&&n!==void 0?n:{}),(r=o==null?void 0:o.headers)!==null&&r!==void 0?r:{})}),accessToken:async()=>""};return t.accessToken?f.accessToken=t.accessToken:delete f.accessToken,f}function j1(t){const e=t==null?void 0:t.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(S1(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var C1=class extends d1{constructor(t){super(t)}},P1=class{constructor(t,e,n){var r,s;this.supabaseUrl=t,this.supabaseKey=e;const i=j1(t);if(!e)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",i),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",i),this.storageUrl=new URL("storage/v1",i),this.functionsUrl=new URL("functions/v1",i);const a=`sb-${i.hostname.split(".")[0]}-auth-token`,o={db:m1,realtime:y1,auth:ge(ge({},g1),{},{storageKey:a}),global:p1},l=E1(n??{},o);if(this.storageKey=(r=l.auth.storageKey)!==null&&r!==void 0?r:"",this.headers=(s=l.global.headers)!==null&&s!==void 0?s:{},l.accessToken)this.accessToken=l.accessToken,this.auth=new Proxy({},{get:(u,h)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(h)} is not possible`)}});else{var c;this.auth=this._initSupabaseAuthClient((c=l.auth)!==null&&c!==void 0?c:{},this.headers,l.global.fetch)}this.fetch=k1(e,this._getAccessToken.bind(this),l.global.fetch),this.realtime=this._initRealtimeClient(ge({headers:this.headers,accessToken:this._getAccessToken.bind(this)},l.realtime)),this.accessToken&&Promise.resolve(this.accessToken()).then(u=>this.realtime.setAuth(u)).catch(u=>console.warn("Failed to set initial Realtime auth token:",u)),this.rest=new ob(new URL("rest/v1",i).href,{headers:this.headers,schema:l.db.schema,fetch:this.fetch}),this.storage=new sk(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),l.accessToken||this._listenForAuthEvents()}get functions(){return new nb(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,e={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,e,n)}channel(t,e={config:{}}){return this.realtime.channel(t,e)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var t=this,e,n;if(t.accessToken)return await t.accessToken();const{data:r}=await t.auth.getSession();return(e=(n=r.session)===null||n===void 0?void 0:n.access_token)!==null&&e!==void 0?e:t.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:e,detectSessionInUrl:n,storage:r,userStorage:s,storageKey:i,flowType:a,lock:o,debug:l,throwOnError:c},u,h){const f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new C1({url:this.authUrl.href,headers:ge(ge({},f),u),storageKey:i,autoRefreshToken:t,persistSession:e,detectSessionInUrl:n,storage:r,userStorage:s,flowType:a,lock:o,debug:l,throwOnError:c,fetch:h,hasCustomAuthorizationHeader:Object.keys(this.headers).some(m=>m.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new Sb(this.realtimeUrl.href,ge(ge({},t),{},{params:ge(ge({},{apikey:this.supabaseKey}),t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,e)=>{this._handleTokenChanged(t,"CLIENT",e==null?void 0:e.access_token)})}_handleTokenChanged(t,e,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),e=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const T1=(t,e,n)=>new P1(t,e,n);function N1(){if(typeof window<"u")return!1;const t=globalThis.process;if(!t)return!1;const e=t.version;if(e==null)return!1;const n=e.match(/^v(\d+)\./);return n?parseInt(n[1],10)<=18:!1}N1()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Qy="https://ufppqvrblxcyzengswjb.supabase.co",Xy="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InVmcHBxdnJibHhjeXplbmdzd2piIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjkxMjMwMTIsImV4cCI6MjA4NDY5OTAxMn0.xiYNVgnX8GEyg5clT6LzywzV9oDV33EX54-ngQLDqrI";console.log("[Supabase] URL:",Qy);console.log("[Supabase] Key exists:",!0);console.log("[Supabase] Key preview:",Xy.substring(0,20)+"...");const z=T1(Qy,Xy,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0},realtime:{params:{eventsPerSecond:10}}});z.auth.getSession().then(({data:t,error:e})=>{e?console.error("[Supabase] Connection test failed:",e):console.log("[Supabase] Connection successful, session:",t.session?"exists":"none")});const oe=[{value:"ruang_rawat_inap",label:"Ruang Rawat Inap",color:"#10b981"},{value:"poli",label:"Poli",color:"#3b82f6"},{value:"casemix",label:"Casemix",color:"#8b5cf6"},{value:"rekam_medis",label:"Rekam Medis",color:"#f59e0b"},{value:"hilang",label:"Hilang",color:"#ef4444"}],qf={ADMIN:"admin",PETUGAS:"petugas"},Tt=10,Kf=5e3,Jy=S.createContext({}),It=()=>{const t=S.useContext(Jy);if(!t)throw new Error("useAuth must be used within AuthProvider");return t},O1=({children:t})=>{const[e,n]=S.useState(null),[r,s]=S.useState(null),[i,a]=S.useState(!0),[o,l]=S.useState(null),c=async g=>{var x,k;console.log("[Auth] Fetching profile for user:",g);try{const{data:b,error:E}=await z.from("profiles").select("*").eq("id",g).single();if(E)return E.code==="20"||(x=E.message)!=null&&x.includes("AbortError")?(console.log("[Auth] Profile fetch aborted (expected during reload)"),null):(console.error("[Auth] Profile fetch error:",E),null);console.log("[Auth] Profile fetched:",b),s(b);try{localStorage.setItem("app_user_profile",JSON.stringify(b))}catch(j){console.error("[Auth] Failed to cache profile:",j)}return b}catch(b){return b.name==="AbortError"||(k=b.message)!=null&&k.includes("AbortError")||console.error("[Auth] Error fetching profile:",b),null}},u=async()=>{e&&(a(!0),await c(e.id),a(!1))};S.useEffect(()=>{let g=!0;console.log("[Auth] Initializing auth state...");const x=localStorage.getItem("app_user_profile");if(x)try{const j=JSON.parse(x);console.log("[Auth] Loaded cached profile:",j),s(j)}catch{console.error("[Auth] Failed to parse cached profile"),localStorage.removeItem("app_user_profile")}const k=setTimeout(()=>{g&&i&&(console.warn("[Auth] Loading timeout - forcing completion"),a(!1))},5e3);(async()=>{try{const{data:{session:j},error:N}=await z.auth.getSession();N&&console.error("[Auth] Get session error:",N),console.log("[Auth] Initial session:",j?"exists":"none"),g&&(j!=null&&j.user?(n(j.user),c(j.user.id).then(T=>{!T&&!x&&console.warn("[Auth] No profile data available (fetch failed + no cache)")})):(n(null),s(null),localStorage.removeItem("app_user_profile")),a(!1))}catch(j){console.error("[Auth] Init error:",j),g&&a(!1)}})();const{data:{subscription:E}}=z.auth.onAuthStateChange(async(j,N)=>{console.log("[Auth] Auth state changed:",j,N?"has session":"no session"),g&&(N!=null&&N.user?(n(N.user),c(N.user.id)):(n(null),s(null),localStorage.removeItem("app_user_profile")),a(!1))});return()=>{g=!1,clearTimeout(k),E.unsubscribe()}},[]);const h=async(g,x)=>{var k;console.log("[Auth] Attempting sign in for:",g);try{l(null);const{data:b,error:E}=await z.auth.signInWithPassword({email:g,password:x});if(E)throw console.error("[Auth] Sign in error:",E),E;return console.log("[Auth] Sign in successful:",(k=b.user)==null?void 0:k.id),z.rpc("log_activity",{p_aksi:"LOGIN",p_details:{email:g}}).then(({error:j})=>{j&&console.warn("[Auth] Log activity error (non-critical):",j)}),{data:b,error:null}}catch(b){return console.error("[Auth] Sign in failed:",b),l(b.message),{data:null,error:b}}},f=async(g,x,k={})=>{console.log("[Auth] Attempting sign up for:",g);try{l(null);const{data:b,error:E}=await z.auth.signUp({email:g,password:x,options:{data:k}});if(E)throw console.error("[Auth] Sign up error:",E),E;return console.log("[Auth] Sign up successful:",b),{data:b,error:null}}catch(b){return console.error("[Auth] Sign up failed:",b),l(b.message),{data:null,error:b}}},m=async()=>{console.log("[Auth] Signing out...");try{z.rpc("log_activity",{p_aksi:"LOGOUT"}).then(({error:x})=>{x&&console.warn("[Auth] Logout log error (non-critical):",x)});const{error:g}=await z.auth.signOut();g&&console.warn("[Auth] Sign out error (backend):",g),console.log("[Auth] Signed out successfully (or forced locally)")}catch(g){console.error("[Auth] Error signing out:",g)}finally{n(null),s(null),l(null)}},p=async g=>{console.log("[Auth] Updating password...");try{l(null);const{data:x,error:k}=await z.auth.updateUser({password:g});if(k)throw console.error("[Auth] Update password error:",k),k;return console.log("[Auth] Password updated successfully"),{data:x,error:null}}catch(x){return console.error("[Auth] Update password failed:",x),l(x.message),{data:null,error:x}}},v=async g=>{console.log("[Auth] Updating profile:",g);try{l(null);const{data:x,error:k}=await z.from("profiles").update(g).eq("id",e.id).select().single();if(k)throw console.error("[Auth] Update profile error:",k),k;return console.log("[Auth] Profile updated:",x),s(x),{data:x,error:null}}catch(x){return console.error("[Auth] Update profile failed:",x),l(x.message),{data:null,error:x}}},_=(r==null?void 0:r.role)===qf.ADMIN,w=(r==null?void 0:r.role)===qf.PETUGAS,y={user:e,profile:r,loading:i,error:o,signIn:h,signUp:f,signOut:m,updatePassword:p,updateProfile:v,refreshProfile:u,isAdmin:_,isPetugas:w};return d.jsx(Jy.Provider,{value:y,children:t})};/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var R1={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A1=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),H=(t,e)=>{const n=S.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:a,className:o="",children:l,...c},u)=>S.createElement("svg",{ref:u,...R1,width:s,height:s,stroke:r,strokeWidth:a?Number(i)*24/Number(s):i,className:["lucide",`lucide-${A1(t)}`,o].join(" "),...c},[...e.map(([h,f])=>S.createElement(h,f)),...Array.isArray(l)?l:[l]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ro=H("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $d=H("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M1=H("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ju=H("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zy=H("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yf=H("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ud=H("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fd=H("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yl=H("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vi=H("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ev=H("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D1=H("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tv=H("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vn=H("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I1=H("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L1=H("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z1=H("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nv=H("Key",[["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["path",{d:"m15.5 7.5 3 3L22 7l-3-3",key:"1rn1fs"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $1=H("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bd=H("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rv=H("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sv=H("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ks=H("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U1=H("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iv=H("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const av=H("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cu=H("Printer",[["polyline",{points:"6 9 6 2 18 2 18 9",key:"1306q4"}],["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["rect",{width:"12",height:"8",x:"6",y:"14",key:"5ipwut"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ss=H("QrCode",[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F1=H("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B1=H("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pu=H("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fn=H("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W1=H("ShieldCheck",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ov=H("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lv=H("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cv=H("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H1=H("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V1=H("UserX",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qi=H("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ao=H("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jr=H("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),uv=S.createContext({}),mn=()=>{const t=S.useContext(uv);if(!t)throw new Error("useToast must be used within ToastProvider");return t},q1=({children:t})=>{const[e,n]=S.useState([]),r=S.useCallback(u=>{const h=Date.now()+Math.random(),f={id:h,type:"info",duration:5e3,...u};return n(m=>[...m,f]),f.duration>0&&setTimeout(()=>{s(h)},f.duration),h},[]),s=S.useCallback(u=>{n(h=>h.filter(f=>f.id!==u))},[]),i=S.useCallback((u,h={})=>r({type:"success",message:u,...h}),[r]),a=S.useCallback((u,h={})=>r({type:"error",message:u,...h}),[r]),o=S.useCallback((u,h={})=>r({type:"warning",message:u,...h}),[r]),l=S.useCallback((u,h={})=>r({type:"info",message:u,...h}),[r]),c={success:d.jsx(Ud,{size:20,color:"#10b981"}),error:d.jsx($d,{size:20,color:"#ef4444"}),warning:d.jsx(M1,{size:20,color:"#f59e0b"}),info:d.jsx(z1,{size:20,color:"#3b82f6"})};return d.jsxs(uv.Provider,{value:{addToast:r,removeToast:s,success:i,error:a,warning:o,info:l},children:[t,d.jsx("div",{className:"toast-container",children:e.map(u=>d.jsxs("div",{className:`toast ${u.type}`,children:[d.jsx("span",{className:"toast-icon",children:c[u.type]}),d.jsxs("div",{className:"toast-content",children:[u.title&&d.jsx("div",{className:"toast-title",children:u.title}),d.jsx("div",{className:"toast-message",children:u.message})]}),u.onUndo&&d.jsx("button",{className:"toast-undo",onClick:()=>{u.onUndo(),s(u.id)},children:"Undo"}),d.jsx("button",{className:"toast-close",onClick:()=>s(u.id),children:d.jsx(jr,{size:16})})]},u.id))})]})},K1=()=>{const[t,e]=S.useState(""),[n,r]=S.useState(""),[s,i]=S.useState(!1),[a,o]=S.useState(!1),[l,c]=S.useState(""),{signIn:u}=It(),{error:h}=mn();Zn();const f=async m=>{if(m.preventDefault(),c(""),!t||!n){c("Email dan password harus diisi"),h("Email dan password harus diisi");return}console.log("[Login] Attempting login for:",t),o(!0);const{data:p,error:v}=await u(t,n);if(o(!1),v){console.error("[Login] Login failed:",v);let _=v.message;_.includes("Invalid login credentials")?_="Email atau password salah":_.includes("Email not confirmed")?_="Email belum dikonfirmasi":_.includes("Invalid API key")?_="Konfigurasi Supabase tidak valid. Periksa ANON KEY di .env":_.includes("Failed to fetch")&&(_="Tidak dapat terhubung ke server. Periksa koneksi internet dan URL Supabase."),c(_),h(_);return}console.log("[Login] Login successful!")};return d.jsx("div",{className:"login-page",children:d.jsxs("div",{className:"login-card",children:[d.jsxs("div",{className:"login-header",children:[d.jsxs("div",{className:"login-logo",children:[d.jsx("div",{className:"login-logo-icon",children:d.jsx(Ss,{size:28})}),d.jsx("span",{children:"RM Tracer"})]}),d.jsx("p",{className:"login-tagline",children:"Sistem Pelacakan Rekam Medis"})]}),d.jsxs("form",{className:"login-body",onSubmit:f,children:[l&&d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",padding:"12px",marginBottom:"16px",background:"var(--error-light)",color:"#b91c1c",borderRadius:"var(--radius-lg)",fontSize:"0.875rem"},children:[d.jsx($d,{size:18}),d.jsx("span",{children:l})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{className:"form-label",htmlFor:"email",children:"Email"}),d.jsxs("div",{style:{position:"relative"},children:[d.jsx(sv,{size:18,style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)",color:"var(--text-muted)"}}),d.jsx("input",{type:"email",id:"email",className:"form-input",placeholder:"nama@rumahsakit.com",value:t,onChange:m=>e(m.target.value),style:{paddingLeft:"40px"},autoComplete:"email",disabled:a})]})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{className:"form-label",htmlFor:"password",children:"Password"}),d.jsxs("div",{style:{position:"relative"},children:[d.jsx(Bd,{size:18,style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)",color:"var(--text-muted)"}}),d.jsx("input",{type:s?"text":"password",id:"password",className:"form-input",placeholder:"Masukkan password",value:n,onChange:m=>r(m.target.value),style:{paddingLeft:"40px",paddingRight:"40px"},autoComplete:"current-password",disabled:a}),d.jsx("button",{type:"button",onClick:()=>i(!s),style:{position:"absolute",right:"12px",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",cursor:"pointer",color:"var(--text-muted)",padding:"4px"},children:s?d.jsx(D1,{size:18}):d.jsx(tv,{size:18})})]})]}),d.jsx("button",{type:"submit",className:"btn btn-primary btn-block btn-lg mt-lg",disabled:a,children:a?d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"spinner",style:{width:20,height:20}}),d.jsx("span",{children:"Memproses..."})]}):d.jsx("span",{children:"Masuk"})}),d.jsxs("div",{style:{marginTop:"16px",padding:"12px",background:"var(--gray-100)",borderRadius:"var(--radius-md)",fontSize:"0.75rem",color:"var(--text-muted)"},children:[d.jsx("strong",{children:"Debug:"})," Buka Browser Console (F12) untuk melihat log detail"]})]}),d.jsx("div",{className:"login-footer",children:d.jsx("p",{children:"Rekam Medis Tracer System  2024"})})]})})},Y1=()=>{const{profile:t,signOut:e}=It(),n=Zn(),[r,s]=S.useState(!1),[i,a]=S.useState(!1),o=async()=>{confirm("Apakah Anda yakin ingin keluar aplikasi?")&&(a(!0),await new Promise(u=>setTimeout(u,800)),await e(),n("/login"))},l=[{path:"/admin",icon:$1,label:"Dashboard",end:!0},{path:"/admin/patients",icon:Vn,label:"Pasien & Berkas"},{path:"/admin/users",icon:Ao,label:"Manajemen User"},{path:"/admin/logs",icon:Ro,label:"Log Aktivitas"},{path:"/admin/profile",icon:Ao,label:"Profil Saya"}],c=u=>u?u.split(" ").map(h=>h[0]).join("").toUpperCase().slice(0,2):"U";return d.jsxs("div",{className:"app-layout",children:[i&&d.jsx(jl,{}),d.jsx("button",{className:"btn btn-icon btn-ghost no-print",onClick:()=>s(!r),style:{position:"fixed",top:"1rem",left:"1rem",zIndex:250,display:"none"},id:"mobile-menu-btn",children:r?d.jsx(jr,{size:24}):d.jsx(U1,{size:24})}),d.jsxs("aside",{className:`sidebar ${r?"open":""}`,children:[d.jsx("div",{className:"sidebar-header",children:d.jsxs("div",{className:"sidebar-logo",children:[d.jsx(Ss,{size:28}),d.jsx("span",{children:"RM Tracer"})]})}),d.jsx("nav",{className:"sidebar-nav",children:l.map(u=>d.jsxs(Ry,{to:u.path,end:u.end,className:({isActive:h})=>`nav-item ${h?"active":""}`,onClick:()=>s(!1),children:[d.jsx(u.icon,{className:"nav-item-icon",size:20}),d.jsx("span",{children:u.label})]},u.path))}),d.jsxs("div",{className:"sidebar-footer",children:[d.jsxs("div",{className:"user-info",children:[d.jsx("div",{className:"user-avatar",children:c(t==null?void 0:t.nama)}),d.jsxs("div",{className:"user-details",children:[d.jsx("div",{className:"user-name",children:(t==null?void 0:t.nama)||"User"}),d.jsx("div",{className:"user-role",children:(t==null?void 0:t.role)||"Admin"})]})]}),d.jsxs("button",{className:"btn btn-ghost btn-block mt-sm",onClick:o,style:{justifyContent:"flex-start"},children:[d.jsx(rv,{size:18}),d.jsx("span",{children:"Keluar"})]})]})]}),r&&d.jsx("div",{className:"no-print",style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.5)",zIndex:199,display:"none"},id:"sidebar-overlay",onClick:()=>s(!1)}),d.jsx("main",{className:"main-content",children:d.jsx(Ny,{})}),d.jsx("style",{children:`
        @media (max-width: 1024px) {
          #mobile-menu-btn {
            display: flex !important;
          }
          #sidebar-overlay {
            display: block !important;
          }
        }
      `})]})};function ne(t){const e=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&e==="[object Date]"?new t.constructor(+t):typeof t=="number"||e==="[object Number]"||typeof t=="string"||e==="[object String]"?new Date(t):new Date(NaN)}function qn(t,e){return t instanceof Date?new t.constructor(e):new Date(e)}const dv=6048e5,G1=864e5,hv=6e4,fv=36e5,Ca=43200,Gf=1440;let Q1={};function sa(){return Q1}function Ki(t,e){var o,l,c,u;const n=sa(),r=(e==null?void 0:e.weekStartsOn)??((l=(o=e==null?void 0:e.locale)==null?void 0:o.options)==null?void 0:l.weekStartsOn)??n.weekStartsOn??((u=(c=n.locale)==null?void 0:c.options)==null?void 0:u.weekStartsOn)??0,s=ne(t),i=s.getDay(),a=(i<r?7:0)+i-r;return s.setDate(s.getDate()-a),s.setHours(0,0,0,0),s}function Mo(t){return Ki(t,{weekStartsOn:1})}function pv(t){const e=ne(t),n=e.getFullYear(),r=qn(t,0);r.setFullYear(n+1,0,4),r.setHours(0,0,0,0);const s=Mo(r),i=qn(t,0);i.setFullYear(n,0,4),i.setHours(0,0,0,0);const a=Mo(i);return e.getTime()>=s.getTime()?n+1:e.getTime()>=a.getTime()?n:n-1}function Qf(t){const e=ne(t);return e.setHours(0,0,0,0),e}function Do(t){const e=ne(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function X1(t,e){const n=Qf(t),r=Qf(e),s=+n-Do(n),i=+r-Do(r);return Math.round((s-i)/G1)}function J1(t){const e=pv(t),n=qn(t,0);return n.setFullYear(e,0,4),n.setHours(0,0,0,0),Mo(n)}function Za(t,e){const n=ne(t),r=ne(e),s=n.getTime()-r.getTime();return s<0?-1:s>0?1:s}function Z1(t){return qn(t,Date.now())}function eS(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function vl(t){if(!eS(t)&&typeof t!="number")return!1;const e=ne(t);return!isNaN(Number(e))}function tS(t,e){const n=ne(t),r=ne(e),s=n.getFullYear()-r.getFullYear(),i=n.getMonth()-r.getMonth();return s*12+i}function nS(t){return e=>{const r=(t?Math[t]:Math.trunc)(e);return r===0?0:r}}function rS(t,e){return+ne(t)-+ne(e)}function sS(t){const e=ne(t);return e.setHours(23,59,59,999),e}function iS(t){const e=ne(t),n=e.getMonth();return e.setFullYear(e.getFullYear(),n+1,0),e.setHours(23,59,59,999),e}function aS(t){const e=ne(t);return+sS(e)==+iS(e)}function oS(t,e){const n=ne(t),r=ne(e),s=Za(n,r),i=Math.abs(tS(n,r));let a;if(i<1)a=0;else{n.getMonth()===1&&n.getDate()>27&&n.setDate(30),n.setMonth(n.getMonth()-s*i);let o=Za(n,r)===-s;aS(ne(t))&&i===1&&Za(t,r)===1&&(o=!1),a=s*(i-Number(o))}return a===0?0:a}function lS(t,e,n){const r=rS(t,e)/1e3;return nS(n==null?void 0:n.roundingMethod)(r)}function cS(t){const e=ne(t),n=qn(t,0);return n.setFullYear(e.getFullYear(),0,1),n.setHours(0,0,0,0),n}const uS={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},dS=(t,e,n)=>{let r;const s=uS[t];return typeof s=="string"?r=s:e===1?r=s.one:r=s.other.replace("{{count}}",e.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function fs(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const hS={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},fS={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},pS={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},mS={date:fs({formats:hS,defaultWidth:"full"}),time:fs({formats:fS,defaultWidth:"full"}),dateTime:fs({formats:pS,defaultWidth:"full"})},gS={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},yS=(t,e,n,r)=>gS[t];function Ht(t){return(e,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let s;if(r==="formatting"&&t.formattingValues){const a=t.defaultFormattingWidth||t.defaultWidth,o=n!=null&&n.width?String(n.width):a;s=t.formattingValues[o]||t.formattingValues[a]}else{const a=t.defaultWidth,o=n!=null&&n.width?String(n.width):t.defaultWidth;s=t.values[o]||t.values[a]}const i=t.argumentCallback?t.argumentCallback(e):e;return s[i]}}const vS={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},wS={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},_S={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},xS={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},bS={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},kS={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},SS=(t,e)=>{const n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},ES={ordinalNumber:SS,era:Ht({values:vS,defaultWidth:"wide"}),quarter:Ht({values:wS,defaultWidth:"wide",argumentCallback:t=>t-1}),month:Ht({values:_S,defaultWidth:"wide"}),day:Ht({values:xS,defaultWidth:"wide"}),dayPeriod:Ht({values:bS,defaultWidth:"wide",formattingValues:kS,defaultFormattingWidth:"wide"})};function Vt(t){return(e,n={})=>{const r=n.width,s=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],i=e.match(s);if(!i)return null;const a=i[0],o=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],l=Array.isArray(o)?CS(o,h=>h.test(a)):jS(o,h=>h.test(a));let c;c=t.valueCallback?t.valueCallback(l):l,c=n.valueCallback?n.valueCallback(c):c;const u=e.slice(a.length);return{value:c,rest:u}}}function jS(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function CS(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function mv(t){return(e,n={})=>{const r=e.match(t.matchPattern);if(!r)return null;const s=r[0],i=e.match(t.parsePattern);if(!i)return null;let a=t.valueCallback?t.valueCallback(i[0]):i[0];a=n.valueCallback?n.valueCallback(a):a;const o=e.slice(s.length);return{value:a,rest:o}}}const PS=/^(\d+)(th|st|nd|rd)?/i,TS=/\d+/i,NS={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},OS={any:[/^b/i,/^(a|c)/i]},RS={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},AS={any:[/1/i,/2/i,/3/i,/4/i]},MS={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},DS={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},IS={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},LS={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},zS={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},$S={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},US={ordinalNumber:mv({matchPattern:PS,parsePattern:TS,valueCallback:t=>parseInt(t,10)}),era:Vt({matchPatterns:NS,defaultMatchWidth:"wide",parsePatterns:OS,defaultParseWidth:"any"}),quarter:Vt({matchPatterns:RS,defaultMatchWidth:"wide",parsePatterns:AS,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Vt({matchPatterns:MS,defaultMatchWidth:"wide",parsePatterns:DS,defaultParseWidth:"any"}),day:Vt({matchPatterns:IS,defaultMatchWidth:"wide",parsePatterns:LS,defaultParseWidth:"any"}),dayPeriod:Vt({matchPatterns:zS,defaultMatchWidth:"any",parsePatterns:$S,defaultParseWidth:"any"})},gv={code:"en-US",formatDistance:dS,formatLong:mS,formatRelative:yS,localize:ES,match:US,options:{weekStartsOn:0,firstWeekContainsDate:1}};function FS(t){const e=ne(t);return X1(e,cS(e))+1}function BS(t){const e=ne(t),n=+Mo(e)-+J1(e);return Math.round(n/dv)+1}function yv(t,e){var u,h,f,m;const n=ne(t),r=n.getFullYear(),s=sa(),i=(e==null?void 0:e.firstWeekContainsDate)??((h=(u=e==null?void 0:e.locale)==null?void 0:u.options)==null?void 0:h.firstWeekContainsDate)??s.firstWeekContainsDate??((m=(f=s.locale)==null?void 0:f.options)==null?void 0:m.firstWeekContainsDate)??1,a=qn(t,0);a.setFullYear(r+1,0,i),a.setHours(0,0,0,0);const o=Ki(a,e),l=qn(t,0);l.setFullYear(r,0,i),l.setHours(0,0,0,0);const c=Ki(l,e);return n.getTime()>=o.getTime()?r+1:n.getTime()>=c.getTime()?r:r-1}function WS(t,e){var o,l,c,u;const n=sa(),r=(e==null?void 0:e.firstWeekContainsDate)??((l=(o=e==null?void 0:e.locale)==null?void 0:o.options)==null?void 0:l.firstWeekContainsDate)??n.firstWeekContainsDate??((u=(c=n.locale)==null?void 0:c.options)==null?void 0:u.firstWeekContainsDate)??1,s=yv(t,e),i=qn(t,0);return i.setFullYear(s,0,r),i.setHours(0,0,0,0),Ki(i,e)}function HS(t,e){const n=ne(t),r=+Ki(n,e)-+WS(n,e);return Math.round(r/dv)+1}function Q(t,e){const n=t<0?"-":"",r=Math.abs(t).toString().padStart(e,"0");return n+r}const vn={y(t,e){const n=t.getFullYear(),r=n>0?n:1-n;return Q(e==="yy"?r%100:r,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):Q(n+1,2)},d(t,e){return Q(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,e){return Q(t.getHours()%12||12,e.length)},H(t,e){return Q(t.getHours(),e.length)},m(t,e){return Q(t.getMinutes(),e.length)},s(t,e){return Q(t.getSeconds(),e.length)},S(t,e){const n=e.length,r=t.getMilliseconds(),s=Math.trunc(r*Math.pow(10,n-3));return Q(s,e.length)}},Ur={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Xf={G:function(t,e,n){const r=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const r=t.getFullYear(),s=r>0?r:1-r;return n.ordinalNumber(s,{unit:"year"})}return vn.y(t,e)},Y:function(t,e,n,r){const s=yv(t,r),i=s>0?s:1-s;if(e==="YY"){const a=i%100;return Q(a,2)}return e==="Yo"?n.ordinalNumber(i,{unit:"year"}):Q(i,e.length)},R:function(t,e){const n=pv(t);return Q(n,e.length)},u:function(t,e){const n=t.getFullYear();return Q(n,e.length)},Q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return Q(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return Q(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,e,n){const r=t.getMonth();switch(e){case"M":case"MM":return vn.M(t,e);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(t,e,n){const r=t.getMonth();switch(e){case"L":return String(r+1);case"LL":return Q(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(t,e,n,r){const s=HS(t,r);return e==="wo"?n.ordinalNumber(s,{unit:"week"}):Q(s,e.length)},I:function(t,e,n){const r=BS(t);return e==="Io"?n.ordinalNumber(r,{unit:"week"}):Q(r,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):vn.d(t,e)},D:function(t,e,n){const r=FS(t);return e==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):Q(r,e.length)},E:function(t,e,n){const r=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(t,e,n,r){const s=t.getDay(),i=(s-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(i);case"ee":return Q(i,2);case"eo":return n.ordinalNumber(i,{unit:"day"});case"eee":return n.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(s,{width:"short",context:"formatting"});case"eeee":default:return n.day(s,{width:"wide",context:"formatting"})}},c:function(t,e,n,r){const s=t.getDay(),i=(s-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(i);case"cc":return Q(i,e.length);case"co":return n.ordinalNumber(i,{unit:"day"});case"ccc":return n.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(s,{width:"narrow",context:"standalone"});case"cccccc":return n.day(s,{width:"short",context:"standalone"});case"cccc":default:return n.day(s,{width:"wide",context:"standalone"})}},i:function(t,e,n){const r=t.getDay(),s=r===0?7:r;switch(e){case"i":return String(s);case"ii":return Q(s,e.length);case"io":return n.ordinalNumber(s,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(t,e,n){const s=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(t,e,n){const r=t.getHours();let s;switch(r===12?s=Ur.noon:r===0?s=Ur.midnight:s=r/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(t,e,n){const r=t.getHours();let s;switch(r>=17?s=Ur.evening:r>=12?s=Ur.afternoon:r>=4?s=Ur.morning:s=Ur.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let r=t.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return vn.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):vn.H(t,e)},K:function(t,e,n){const r=t.getHours()%12;return e==="Ko"?n.ordinalNumber(r,{unit:"hour"}):Q(r,e.length)},k:function(t,e,n){let r=t.getHours();return r===0&&(r=24),e==="ko"?n.ordinalNumber(r,{unit:"hour"}):Q(r,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):vn.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):vn.s(t,e)},S:function(t,e){return vn.S(t,e)},X:function(t,e,n){const r=t.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return Zf(r);case"XXXX":case"XX":return lr(r);case"XXXXX":case"XXX":default:return lr(r,":")}},x:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"x":return Zf(r);case"xxxx":case"xx":return lr(r);case"xxxxx":case"xxx":default:return lr(r,":")}},O:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+Jf(r,":");case"OOOO":default:return"GMT"+lr(r,":")}},z:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+Jf(r,":");case"zzzz":default:return"GMT"+lr(r,":")}},t:function(t,e,n){const r=Math.trunc(t.getTime()/1e3);return Q(r,e.length)},T:function(t,e,n){const r=t.getTime();return Q(r,e.length)}};function Jf(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),s=Math.trunc(r/60),i=r%60;return i===0?n+String(s):n+String(s)+e+Q(i,2)}function Zf(t,e){return t%60===0?(t>0?"-":"+")+Q(Math.abs(t)/60,2):lr(t,e)}function lr(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),s=Q(Math.trunc(r/60),2),i=Q(r%60,2);return n+s+e+i}const ep=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},vv=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},VS=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],r=n[1],s=n[2];if(!s)return ep(t,e);let i;switch(r){case"P":i=e.dateTime({width:"short"});break;case"PP":i=e.dateTime({width:"medium"});break;case"PPP":i=e.dateTime({width:"long"});break;case"PPPP":default:i=e.dateTime({width:"full"});break}return i.replace("{{date}}",ep(r,e)).replace("{{time}}",vv(s,e))},qS={p:vv,P:VS},KS=/^D+$/,YS=/^Y+$/,GS=["D","DD","YY","YYYY"];function QS(t){return KS.test(t)}function XS(t){return YS.test(t)}function JS(t,e,n){const r=ZS(t,e,n);if(console.warn(r),GS.includes(t))throw new RangeError(r)}function ZS(t,e,n){const r=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const eE=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,tE=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,nE=/^'([^]*?)'?$/,rE=/''/g,sE=/[a-zA-Z]/;function iE(t,e,n){var u,h,f,m,p,v,_,w;const r=sa(),s=(n==null?void 0:n.locale)??r.locale??gv,i=(n==null?void 0:n.firstWeekContainsDate)??((h=(u=n==null?void 0:n.locale)==null?void 0:u.options)==null?void 0:h.firstWeekContainsDate)??r.firstWeekContainsDate??((m=(f=r.locale)==null?void 0:f.options)==null?void 0:m.firstWeekContainsDate)??1,a=(n==null?void 0:n.weekStartsOn)??((v=(p=n==null?void 0:n.locale)==null?void 0:p.options)==null?void 0:v.weekStartsOn)??r.weekStartsOn??((w=(_=r.locale)==null?void 0:_.options)==null?void 0:w.weekStartsOn)??0,o=ne(t);if(!vl(o))throw new RangeError("Invalid time value");let l=e.match(tE).map(y=>{const g=y[0];if(g==="p"||g==="P"){const x=qS[g];return x(y,s.formatLong)}return y}).join("").match(eE).map(y=>{if(y==="''")return{isToken:!1,value:"'"};const g=y[0];if(g==="'")return{isToken:!1,value:aE(y)};if(Xf[g])return{isToken:!0,value:y};if(g.match(sE))throw new RangeError("Format string contains an unescaped latin alphabet character `"+g+"`");return{isToken:!1,value:y}});s.localize.preprocessor&&(l=s.localize.preprocessor(o,l));const c={firstWeekContainsDate:i,weekStartsOn:a,locale:s};return l.map(y=>{if(!y.isToken)return y.value;const g=y.value;(!(n!=null&&n.useAdditionalWeekYearTokens)&&XS(g)||!(n!=null&&n.useAdditionalDayOfYearTokens)&&QS(g))&&JS(g,e,String(t));const x=Xf[g[0]];return x(o,g,s.localize,c)}).join("")}function aE(t){const e=t.match(nE);return e?e[1].replace(rE,"'"):t}function oE(t,e,n){const r=sa(),s=(n==null?void 0:n.locale)??r.locale??gv,i=2520,a=Za(t,e);if(isNaN(a))throw new RangeError("Invalid time value");const o=Object.assign({},n,{addSuffix:n==null?void 0:n.addSuffix,comparison:a});let l,c;a>0?(l=ne(e),c=ne(t)):(l=ne(t),c=ne(e));const u=lS(c,l),h=(Do(c)-Do(l))/1e3,f=Math.round((u-h)/60);let m;if(f<2)return n!=null&&n.includeSeconds?u<5?s.formatDistance("lessThanXSeconds",5,o):u<10?s.formatDistance("lessThanXSeconds",10,o):u<20?s.formatDistance("lessThanXSeconds",20,o):u<40?s.formatDistance("halfAMinute",0,o):u<60?s.formatDistance("lessThanXMinutes",1,o):s.formatDistance("xMinutes",1,o):f===0?s.formatDistance("lessThanXMinutes",1,o):s.formatDistance("xMinutes",f,o);if(f<45)return s.formatDistance("xMinutes",f,o);if(f<90)return s.formatDistance("aboutXHours",1,o);if(f<Gf){const p=Math.round(f/60);return s.formatDistance("aboutXHours",p,o)}else{if(f<i)return s.formatDistance("xDays",1,o);if(f<Ca){const p=Math.round(f/Gf);return s.formatDistance("xDays",p,o)}else if(f<Ca*2)return m=Math.round(f/Ca),s.formatDistance("aboutXMonths",m,o)}if(m=oS(c,l),m<12){const p=Math.round(f/Ca);return s.formatDistance("xMonths",p,o)}else{const p=m%12,v=Math.trunc(m/12);return p<3?s.formatDistance("aboutXYears",v,o):p<9?s.formatDistance("overXYears",v,o):s.formatDistance("almostXYears",v+1,o)}}function lE(t,e){return oE(t,Z1(t),e)}function Wd(t,e){const r=hE(t);let s;if(r.date){const l=fE(r.date,2);s=pE(l.restDateString,l.year)}if(!s||isNaN(s.getTime()))return new Date(NaN);const i=s.getTime();let a=0,o;if(r.time&&(a=mE(r.time),isNaN(a)))return new Date(NaN);if(r.timezone){if(o=gE(r.timezone),isNaN(o))return new Date(NaN)}else{const l=new Date(i+a),c=new Date(0);return c.setFullYear(l.getUTCFullYear(),l.getUTCMonth(),l.getUTCDate()),c.setHours(l.getUTCHours(),l.getUTCMinutes(),l.getUTCSeconds(),l.getUTCMilliseconds()),c}return new Date(i+a+o)}const Pa={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},cE=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,uE=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,dE=/^([+-])(\d{2})(?::?(\d{2}))?$/;function hE(t){const e={},n=t.split(Pa.dateTimeDelimiter);let r;if(n.length>2)return e;if(/:/.test(n[0])?r=n[0]:(e.date=n[0],r=n[1],Pa.timeZoneDelimiter.test(e.date)&&(e.date=t.split(Pa.timeZoneDelimiter)[0],r=t.substr(e.date.length,t.length))),r){const s=Pa.timezone.exec(r);s?(e.time=r.replace(s[1],""),e.timezone=s[1]):e.time=r}return e}function fE(t,e){const n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),r=t.match(n);if(!r)return{year:NaN,restDateString:""};const s=r[1]?parseInt(r[1]):null,i=r[2]?parseInt(r[2]):null;return{year:i===null?s:i*100,restDateString:t.slice((r[1]||r[2]).length)}}function pE(t,e){if(e===null)return new Date(NaN);const n=t.match(cE);if(!n)return new Date(NaN);const r=!!n[4],s=Us(n[1]),i=Us(n[2])-1,a=Us(n[3]),o=Us(n[4]),l=Us(n[5])-1;if(r)return xE(e,o,l)?yE(e,o,l):new Date(NaN);{const c=new Date(0);return!wE(e,i,a)||!_E(e,s)?new Date(NaN):(c.setUTCFullYear(e,i,Math.max(s,a)),c)}}function Us(t){return t?parseInt(t):1}function mE(t){const e=t.match(uE);if(!e)return NaN;const n=cc(e[1]),r=cc(e[2]),s=cc(e[3]);return bE(n,r,s)?n*fv+r*hv+s*1e3:NaN}function cc(t){return t&&parseFloat(t.replace(",","."))||0}function gE(t){if(t==="Z")return 0;const e=t.match(dE);if(!e)return 0;const n=e[1]==="+"?-1:1,r=parseInt(e[2]),s=e[3]&&parseInt(e[3])||0;return kE(r,s)?n*(r*fv+s*hv):NaN}function yE(t,e,n){const r=new Date(0);r.setUTCFullYear(t,0,4);const s=r.getUTCDay()||7,i=(e-1)*7+n+1-s;return r.setUTCDate(r.getUTCDate()+i),r}const vE=[31,null,31,30,31,30,31,31,30,31,30,31];function wv(t){return t%400===0||t%4===0&&t%100!==0}function wE(t,e,n){return e>=0&&e<=11&&n>=1&&n<=(vE[e]||(wv(t)?29:28))}function _E(t,e){return e>=1&&e<=(wv(t)?366:365)}function xE(t,e,n){return e>=1&&e<=53&&n>=0&&n<=6}function bE(t,e,n){return t===24?e===0&&n===0:n>=0&&n<60&&e>=0&&e<60&&t>=0&&t<25}function kE(t,e){return e>=0&&e<=59}const SE={lessThanXSeconds:{one:"kurang dari 1 detik",other:"kurang dari {{count}} detik"},xSeconds:{one:"1 detik",other:"{{count}} detik"},halfAMinute:"setengah menit",lessThanXMinutes:{one:"kurang dari 1 menit",other:"kurang dari {{count}} menit"},xMinutes:{one:"1 menit",other:"{{count}} menit"},aboutXHours:{one:"sekitar 1 jam",other:"sekitar {{count}} jam"},xHours:{one:"1 jam",other:"{{count}} jam"},xDays:{one:"1 hari",other:"{{count}} hari"},aboutXWeeks:{one:"sekitar 1 minggu",other:"sekitar {{count}} minggu"},xWeeks:{one:"1 minggu",other:"{{count}} minggu"},aboutXMonths:{one:"sekitar 1 bulan",other:"sekitar {{count}} bulan"},xMonths:{one:"1 bulan",other:"{{count}} bulan"},aboutXYears:{one:"sekitar 1 tahun",other:"sekitar {{count}} tahun"},xYears:{one:"1 tahun",other:"{{count}} tahun"},overXYears:{one:"lebih dari 1 tahun",other:"lebih dari {{count}} tahun"},almostXYears:{one:"hampir 1 tahun",other:"hampir {{count}} tahun"}},EE=(t,e,n)=>{let r;const s=SE[t];return typeof s=="string"?r=s:e===1?r=s.one:r=s.other.replace("{{count}}",e.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"dalam waktu "+r:r+" yang lalu":r},jE={full:"EEEE, d MMMM yyyy",long:"d MMMM yyyy",medium:"d MMM yyyy",short:"d/M/yyyy"},CE={full:"HH.mm.ss",long:"HH.mm.ss",medium:"HH.mm",short:"HH.mm"},PE={full:"{{date}} 'pukul' {{time}}",long:"{{date}} 'pukul' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},TE={date:fs({formats:jE,defaultWidth:"full"}),time:fs({formats:CE,defaultWidth:"full"}),dateTime:fs({formats:PE,defaultWidth:"full"})},NE={lastWeek:"eeee 'lalu pukul' p",yesterday:"'Kemarin pukul' p",today:"'Hari ini pukul' p",tomorrow:"'Besok pukul' p",nextWeek:"eeee 'pukul' p",other:"P"},OE=(t,e,n,r)=>NE[t],RE={narrow:["SM","M"],abbreviated:["SM","M"],wide:["Sebelum Masehi","Masehi"]},AE={narrow:["1","2","3","4"],abbreviated:["K1","K2","K3","K4"],wide:["Kuartal ke-1","Kuartal ke-2","Kuartal ke-3","Kuartal ke-4"]},ME={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","Mei","Jun","Jul","Agt","Sep","Okt","Nov","Des"],wide:["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"]},DE={narrow:["M","S","S","R","K","J","S"],short:["Min","Sen","Sel","Rab","Kam","Jum","Sab"],abbreviated:["Min","Sen","Sel","Rab","Kam","Jum","Sab"],wide:["Minggu","Senin","Selasa","Rabu","Kamis","Jumat","Sabtu"]},IE={narrow:{am:"AM",pm:"PM",midnight:"tengah malam",noon:"tengah hari",morning:"pagi",afternoon:"siang",evening:"sore",night:"malam"},abbreviated:{am:"AM",pm:"PM",midnight:"tengah malam",noon:"tengah hari",morning:"pagi",afternoon:"siang",evening:"sore",night:"malam"},wide:{am:"AM",pm:"PM",midnight:"tengah malam",noon:"tengah hari",morning:"pagi",afternoon:"siang",evening:"sore",night:"malam"}},LE={narrow:{am:"AM",pm:"PM",midnight:"tengah malam",noon:"tengah hari",morning:"pagi",afternoon:"siang",evening:"sore",night:"malam"},abbreviated:{am:"AM",pm:"PM",midnight:"tengah malam",noon:"tengah hari",morning:"pagi",afternoon:"siang",evening:"sore",night:"malam"},wide:{am:"AM",pm:"PM",midnight:"tengah malam",noon:"tengah hari",morning:"pagi",afternoon:"siang",evening:"sore",night:"malam"}},zE=(t,e)=>"ke-"+Number(t),$E={ordinalNumber:zE,era:Ht({values:RE,defaultWidth:"wide"}),quarter:Ht({values:AE,defaultWidth:"wide",argumentCallback:t=>t-1}),month:Ht({values:ME,defaultWidth:"wide"}),day:Ht({values:DE,defaultWidth:"wide"}),dayPeriod:Ht({values:IE,defaultWidth:"wide",formattingValues:LE,defaultFormattingWidth:"wide"})},UE=/^ke-(\d+)?/i,FE=/\d+/i,BE={narrow:/^(sm|m)/i,abbreviated:/^(s\.?\s?m\.?|s\.?\s?e\.?\s?u\.?|m\.?|e\.?\s?u\.?)/i,wide:/^(sebelum masehi|sebelum era umum|masehi|era umum)/i},WE={any:[/^s/i,/^(m|e)/i]},HE={narrow:/^[1234]/i,abbreviated:/^K-?\s[1234]/i,wide:/^Kuartal ke-?\s?[1234]/i},VE={any:[/1/i,/2/i,/3/i,/4/i]},qE={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|mei|jun|jul|agt|sep|okt|nov|des)/i,wide:/^(januari|februari|maret|april|mei|juni|juli|agustus|september|oktober|november|desember)/i},KE={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^ma/i,/^ap/i,/^me/i,/^jun/i,/^jul/i,/^ag/i,/^s/i,/^o/i,/^n/i,/^d/i]},YE={narrow:/^[srkjm]/i,short:/^(min|sen|sel|rab|kam|jum|sab)/i,abbreviated:/^(min|sen|sel|rab|kam|jum|sab)/i,wide:/^(minggu|senin|selasa|rabu|kamis|jumat|sabtu)/i},GE={narrow:[/^m/i,/^s/i,/^s/i,/^r/i,/^k/i,/^j/i,/^s/i],any:[/^m/i,/^sen/i,/^sel/i,/^r/i,/^k/i,/^j/i,/^sa/i]},QE={narrow:/^(a|p|tengah m|tengah h|(di(\swaktu)?) (pagi|siang|sore|malam))/i,any:/^([ap]\.?\s?m\.?|tengah malam|tengah hari|(di(\swaktu)?) (pagi|siang|sore|malam))/i},XE={any:{am:/^a/i,pm:/^pm/i,midnight:/^tengah m/i,noon:/^tengah h/i,morning:/pagi/i,afternoon:/siang/i,evening:/sore/i,night:/malam/i}},JE={ordinalNumber:mv({matchPattern:UE,parsePattern:FE,valueCallback:t=>parseInt(t,10)}),era:Vt({matchPatterns:BE,defaultMatchWidth:"wide",parsePatterns:WE,defaultParseWidth:"any"}),quarter:Vt({matchPatterns:HE,defaultMatchWidth:"wide",parsePatterns:VE,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Vt({matchPatterns:qE,defaultMatchWidth:"wide",parsePatterns:KE,defaultParseWidth:"any"}),day:Vt({matchPatterns:YE,defaultMatchWidth:"wide",parsePatterns:GE,defaultParseWidth:"any"}),dayPeriod:Vt({matchPatterns:QE,defaultMatchWidth:"any",parsePatterns:XE,defaultParseWidth:"any"})},_v={code:"id",formatDistance:EE,formatLong:TE,formatRelative:OE,localize:$E,match:JE,options:{weekStartsOn:1,firstWeekContainsDate:1}},Kn=(t,e="dd MMM yyyy")=>{if(!t)return"-";const n=typeof t=="string"?Wd(t):t;return vl(n)?iE(n,e,{locale:_v}):"-"},Io=t=>Kn(t,"dd MMM yyyy, HH:mm"),xv=t=>{if(!t)return"-";const e=typeof t=="string"?Wd(t):t;return vl(e)?lE(e,{addSuffix:!0,locale:_v}):"-"},pi=t=>`RMTRACER:${t}`,ZE=t=>t?t.startsWith("RMTRACER:")?t.replace("RMTRACER:",""):t:null,ej=()=>{const t=new Date().getFullYear().toString().slice(-2),e=(new Date().getMonth()+1).toString().padStart(2,"0"),n=Math.floor(Math.random()*1e4).toString().padStart(4,"0");return`RM-${t}${e}${n}`},tj=(t,e)=>{if(!t||t.length===0)return;const n=Object.keys(t[0]),s=[n.join(","),...t.map(l=>n.map(c=>{const u=l[c];return typeof u=="string"&&(u.includes(",")||u.includes('"'))?`"${u.replace(/"/g,'""')}"`:u??""}).join(","))].join(`
`),i=new Blob([s],{type:"text/csv;charset=utf-8;"}),a=URL.createObjectURL(i),o=document.createElement("a");o.setAttribute("href",a),o.setAttribute("download",`${e}.csv`),document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(a)},Rt=(t,e)=>{const n=e.find(r=>r.value===t);return(n==null?void 0:n.color)||"#6b7280"},Mt=(t,e)=>{const n=e.find(r=>r.value===t);return(n==null?void 0:n.label)||t},wl=(t,e)=>{let n;return function(...s){const i=()=>{clearTimeout(n),t(...s)};clearTimeout(n),n=setTimeout(i,e)}},_l=t=>{if(!t)return"-";const e=new Date,n=typeof t=="string"?Wd(t):t;if(!vl(n))return"-";let r=e.getFullYear()-n.getFullYear();const s=e.getMonth()-n.getMonth();return(s<0||s===0&&e.getDate()<n.getDate())&&r--,`${r} tahun`};/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function ia(t){return t+.5|0}const Tn=(t,e,n)=>Math.max(Math.min(t,n),e);function Xs(t){return Tn(ia(t*2.55),0,255)}function Bn(t){return Tn(ia(t*255),0,255)}function tn(t){return Tn(ia(t/2.55)/100,0,1)}function tp(t){return Tn(ia(t*100),0,100)}const pt={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Tu=[..."0123456789ABCDEF"],nj=t=>Tu[t&15],rj=t=>Tu[(t&240)>>4]+Tu[t&15],Ta=t=>(t&240)>>4===(t&15),sj=t=>Ta(t.r)&&Ta(t.g)&&Ta(t.b)&&Ta(t.a);function ij(t){var e=t.length,n;return t[0]==="#"&&(e===4||e===5?n={r:255&pt[t[1]]*17,g:255&pt[t[2]]*17,b:255&pt[t[3]]*17,a:e===5?pt[t[4]]*17:255}:(e===7||e===9)&&(n={r:pt[t[1]]<<4|pt[t[2]],g:pt[t[3]]<<4|pt[t[4]],b:pt[t[5]]<<4|pt[t[6]],a:e===9?pt[t[7]]<<4|pt[t[8]]:255})),n}const aj=(t,e)=>t<255?e(t):"";function oj(t){var e=sj(t)?nj:rj;return t?"#"+e(t.r)+e(t.g)+e(t.b)+aj(t.a,e):void 0}const lj=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function bv(t,e,n){const r=e*Math.min(n,1-n),s=(i,a=(i+t/30)%12)=>n-r*Math.max(Math.min(a-3,9-a,1),-1);return[s(0),s(8),s(4)]}function cj(t,e,n){const r=(s,i=(s+t/60)%6)=>n-n*e*Math.max(Math.min(i,4-i,1),0);return[r(5),r(3),r(1)]}function uj(t,e,n){const r=bv(t,1,.5);let s;for(e+n>1&&(s=1/(e+n),e*=s,n*=s),s=0;s<3;s++)r[s]*=1-e-n,r[s]+=e;return r}function dj(t,e,n,r,s){return t===s?(e-n)/r+(e<n?6:0):e===s?(n-t)/r+2:(t-e)/r+4}function Hd(t){const n=t.r/255,r=t.g/255,s=t.b/255,i=Math.max(n,r,s),a=Math.min(n,r,s),o=(i+a)/2;let l,c,u;return i!==a&&(u=i-a,c=o>.5?u/(2-i-a):u/(i+a),l=dj(n,r,s,u,i),l=l*60+.5),[l|0,c||0,o]}function Vd(t,e,n,r){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,r)).map(Bn)}function qd(t,e,n){return Vd(bv,t,e,n)}function hj(t,e,n){return Vd(uj,t,e,n)}function fj(t,e,n){return Vd(cj,t,e,n)}function kv(t){return(t%360+360)%360}function pj(t){const e=lj.exec(t);let n=255,r;if(!e)return;e[5]!==r&&(n=e[6]?Xs(+e[5]):Bn(+e[5]));const s=kv(+e[2]),i=+e[3]/100,a=+e[4]/100;return e[1]==="hwb"?r=hj(s,i,a):e[1]==="hsv"?r=fj(s,i,a):r=qd(s,i,a),{r:r[0],g:r[1],b:r[2],a:n}}function mj(t,e){var n=Hd(t);n[0]=kv(n[0]+e),n=qd(n),t.r=n[0],t.g=n[1],t.b=n[2]}function gj(t){if(!t)return;const e=Hd(t),n=e[0],r=tp(e[1]),s=tp(e[2]);return t.a<255?`hsla(${n}, ${r}%, ${s}%, ${tn(t.a)})`:`hsl(${n}, ${r}%, ${s}%)`}const np={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},rp={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function yj(){const t={},e=Object.keys(rp),n=Object.keys(np);let r,s,i,a,o;for(r=0;r<e.length;r++){for(a=o=e[r],s=0;s<n.length;s++)i=n[s],o=o.replace(i,np[i]);i=parseInt(rp[a],16),t[o]=[i>>16&255,i>>8&255,i&255]}return t}let Na;function vj(t){Na||(Na=yj(),Na.transparent=[0,0,0,0]);const e=Na[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const wj=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function _j(t){const e=wj.exec(t);let n=255,r,s,i;if(e){if(e[7]!==r){const a=+e[7];n=e[8]?Xs(a):Tn(a*255,0,255)}return r=+e[1],s=+e[3],i=+e[5],r=255&(e[2]?Xs(r):Tn(r,0,255)),s=255&(e[4]?Xs(s):Tn(s,0,255)),i=255&(e[6]?Xs(i):Tn(i,0,255)),{r,g:s,b:i,a:n}}}function xj(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${tn(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const uc=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,Fr=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function bj(t,e,n){const r=Fr(tn(t.r)),s=Fr(tn(t.g)),i=Fr(tn(t.b));return{r:Bn(uc(r+n*(Fr(tn(e.r))-r))),g:Bn(uc(s+n*(Fr(tn(e.g))-s))),b:Bn(uc(i+n*(Fr(tn(e.b))-i))),a:t.a+n*(e.a-t.a)}}function Oa(t,e,n){if(t){let r=Hd(t);r[e]=Math.max(0,Math.min(r[e]+r[e]*n,e===0?360:1)),r=qd(r),t.r=r[0],t.g=r[1],t.b=r[2]}}function Sv(t,e){return t&&Object.assign(e||{},t)}function sp(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=Bn(t[3]))):(e=Sv(t,{r:0,g:0,b:0,a:1}),e.a=Bn(e.a)),e}function kj(t){return t.charAt(0)==="r"?_j(t):pj(t)}class Yi{constructor(e){if(e instanceof Yi)return e;const n=typeof e;let r;n==="object"?r=sp(e):n==="string"&&(r=ij(e)||vj(e)||kj(e)),this._rgb=r,this._valid=!!r}get valid(){return this._valid}get rgb(){var e=Sv(this._rgb);return e&&(e.a=tn(e.a)),e}set rgb(e){this._rgb=sp(e)}rgbString(){return this._valid?xj(this._rgb):void 0}hexString(){return this._valid?oj(this._rgb):void 0}hslString(){return this._valid?gj(this._rgb):void 0}mix(e,n){if(e){const r=this.rgb,s=e.rgb;let i;const a=n===i?.5:n,o=2*a-1,l=r.a-s.a,c=((o*l===-1?o:(o+l)/(1+o*l))+1)/2;i=1-c,r.r=255&c*r.r+i*s.r+.5,r.g=255&c*r.g+i*s.g+.5,r.b=255&c*r.b+i*s.b+.5,r.a=a*r.a+(1-a)*s.a,this.rgb=r}return this}interpolate(e,n){return e&&(this._rgb=bj(this._rgb,e._rgb,n)),this}clone(){return new Yi(this.rgb)}alpha(e){return this._rgb.a=Bn(e),this}clearer(e){const n=this._rgb;return n.a*=1-e,this}greyscale(){const e=this._rgb,n=ia(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=n,this}opaquer(e){const n=this._rgb;return n.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return Oa(this._rgb,2,e),this}darken(e){return Oa(this._rgb,2,-e),this}saturate(e){return Oa(this._rgb,1,e),this}desaturate(e){return Oa(this._rgb,1,-e),this}rotate(e){return mj(this._rgb,e),this}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function Gt(){}const Sj=(()=>{let t=0;return()=>t++})();function Be(t){return t==null}function Ie(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function G(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function dn(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function zt(t,e){return dn(t)?t:e}function J(t,e){return typeof t>"u"?e:t}const Ej=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100:+t/e,Ev=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function ae(t,e,n){if(t&&typeof t.call=="function")return t.apply(n,e)}function X(t,e,n,r){let s,i,a;if(Ie(t))for(i=t.length,s=0;s<i;s++)e.call(n,t[s],s);else if(G(t))for(a=Object.keys(t),i=a.length,s=0;s<i;s++)e.call(n,t[a[s]],a[s])}function Lo(t,e){let n,r,s,i;if(!t||!e||t.length!==e.length)return!1;for(n=0,r=t.length;n<r;++n)if(s=t[n],i=e[n],s.datasetIndex!==i.datasetIndex||s.index!==i.index)return!1;return!0}function zo(t){if(Ie(t))return t.map(zo);if(G(t)){const e=Object.create(null),n=Object.keys(t),r=n.length;let s=0;for(;s<r;++s)e[n[s]]=zo(t[n[s]]);return e}return t}function jv(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function jj(t,e,n,r){if(!jv(t))return;const s=e[t],i=n[t];G(s)&&G(i)?Gi(s,i,r):e[t]=zo(i)}function Gi(t,e,n){const r=Ie(e)?e:[e],s=r.length;if(!G(t))return t;n=n||{};const i=n.merger||jj;let a;for(let o=0;o<s;++o){if(a=r[o],!G(a))continue;const l=Object.keys(a);for(let c=0,u=l.length;c<u;++c)i(l[c],t,a,n)}return t}function mi(t,e){return Gi(t,e,{merger:Cj})}function Cj(t,e,n){if(!jv(t))return;const r=e[t],s=n[t];G(r)&&G(s)?mi(r,s):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=zo(s))}const ip={"":t=>t,x:t=>t.x,y:t=>t.y};function Pj(t){const e=t.split("."),n=[];let r="";for(const s of e)r+=s,r.endsWith("\\")?r=r.slice(0,-1)+".":(n.push(r),r="");return n}function Tj(t){const e=Pj(t);return n=>{for(const r of e){if(r==="")break;n=n&&n[r]}return n}}function Qi(t,e){return(ip[e]||(ip[e]=Tj(e)))(t)}function Kd(t){return t.charAt(0).toUpperCase()+t.slice(1)}const $o=t=>typeof t<"u",Yn=t=>typeof t=="function",ap=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0};function Nj(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const le=Math.PI,be=2*le,Uo=Number.POSITIVE_INFINITY,Oj=le/180,Ce=le/2,nr=le/4,op=le*2/3,lp=Math.sign;function Rj(t){const e=[],n=Math.sqrt(t);let r;for(r=1;r<n;r++)t%r===0&&(e.push(r),e.push(t/r));return n===(n|0)&&e.push(n),e.sort((s,i)=>s-i).pop(),e}function Aj(t){return typeof t=="symbol"||typeof t=="object"&&t!==null&&!(Symbol.toPrimitive in t||"toString"in t||"valueOf"in t)}function Fo(t){return!Aj(t)&&!isNaN(parseFloat(t))&&isFinite(t)}function gr(t){return t*(le/180)}function Mj(t){return t*(180/le)}function Cv(t,e){const n=e.x-t.x,r=e.y-t.y,s=Math.sqrt(n*n+r*r);let i=Math.atan2(r,n);return i<-.5*le&&(i+=be),{angle:i,distance:s}}function Dj(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function Bt(t){return(t%be+be)%be}function Bo(t,e,n,r){const s=Bt(t),i=Bt(e),a=Bt(n),o=Bt(i-s),l=Bt(a-s),c=Bt(s-i),u=Bt(s-a);return s===i||s===a||r&&i===a||o>l&&c<u}function vt(t,e,n){return Math.max(e,Math.min(n,t))}function Ij(t){return vt(t,-32768,32767)}function Js(t,e,n,r=1e-6){return t>=Math.min(e,n)-r&&t<=Math.max(e,n)+r}function Yd(t,e,n){n=n||(a=>t[a]<e);let r=t.length-1,s=0,i;for(;r-s>1;)i=s+r>>1,n(i)?s=i:r=i;return{lo:s,hi:r}}const Nu=(t,e,n,r)=>Yd(t,n,r?s=>{const i=t[s][e];return i<n||i===n&&t[s+1][e]===n}:s=>t[s][e]<n),Lj=(t,e,n)=>Yd(t,n,r=>t[r][e]>=n);function zj(t,e,n){let r=0,s=t.length;for(;r<s&&t[r]<e;)r++;for(;s>r&&t[s-1]>n;)s--;return r>0||s<t.length?t.slice(r,s):t}const Pv=["push","pop","shift","splice","unshift"];function $j(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),Pv.forEach(n=>{const r="_onData"+Kd(n),s=t[n];Object.defineProperty(t,n,{configurable:!0,enumerable:!1,value(...i){const a=s.apply(this,i);return t._chartjs.listeners.forEach(o=>{typeof o[r]=="function"&&o[r](...i)}),a}})})}function cp(t,e){const n=t._chartjs;if(!n)return;const r=n.listeners,s=r.indexOf(e);s!==-1&&r.splice(s,1),!(r.length>0)&&(Pv.forEach(i=>{delete t[i]}),delete t._chartjs)}function Uj(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const Tv=function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame}();function Nv(t,e){let n=[],r=!1;return function(...s){n=s,r||(r=!0,Tv.call(window,()=>{r=!1,t.apply(e,n)}))}}function Fj(t,e){let n;return function(...r){return e?(clearTimeout(n),n=setTimeout(t,e,r)):t.apply(this,r),e}}const Ov=t=>t==="start"?"left":t==="end"?"right":"center",it=(t,e,n)=>t==="start"?e:t==="end"?n:(e+n)/2,Bj=(t,e,n,r)=>t===(r?"left":"right")?n:t==="center"?(e+n)/2:e,Ra=t=>t===0||t===1,up=(t,e,n)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*be/n)),dp=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*be/n)+1,gi={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*Ce)+1,easeOutSine:t=>Math.sin(t*Ce),easeInOutSine:t=>-.5*(Math.cos(le*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>Ra(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>Ra(t)?t:up(t,.075,.3),easeOutElastic:t=>Ra(t)?t:dp(t,.075,.3),easeInOutElastic(t){return Ra(t)?t:t<.5?.5*up(t*2,.1125,.45):.5+.5*dp(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-gi.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?gi.easeInBounce(t*2)*.5:gi.easeOutBounce(t*2-1)*.5+.5};function Rv(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function hp(t){return Rv(t)?t:new Yi(t)}function dc(t){return Rv(t)?t:new Yi(t).saturate(.5).darken(.1).hexString()}const Wj=["x","y","borderWidth","radius","tension"],Hj=["color","borderColor","backgroundColor"];function Vj(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:Hj},numbers:{type:"number",properties:Wj}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function qj(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const fp=new Map;function Kj(t,e){e=e||{};const n=t+JSON.stringify(e);let r=fp.get(n);return r||(r=new Intl.NumberFormat(t,e),fp.set(n,r)),r}function Yj(t,e,n){return Kj(e,n).format(t)}const Gj={values(t){return Ie(t)?t:""+t}};var Qj={formatters:Gj};function Xj(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,n)=>n.lineWidth,tickColor:(e,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Qj.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const Cr=Object.create(null),Ou=Object.create(null);function yi(t,e){if(!e)return t;const n=e.split(".");for(let r=0,s=n.length;r<s;++r){const i=n[r];t=t[i]||(t[i]=Object.create(null))}return t}function hc(t,e,n){return typeof e=="string"?Gi(yi(t,e),n):Gi(yi(t,""),e)}class Jj{constructor(e,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=r=>r.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(r,s)=>dc(s.backgroundColor),this.hoverBorderColor=(r,s)=>dc(s.borderColor),this.hoverColor=(r,s)=>dc(s.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(n)}set(e,n){return hc(this,e,n)}get(e){return yi(this,e)}describe(e,n){return hc(Ou,e,n)}override(e,n){return hc(Cr,e,n)}route(e,n,r,s){const i=yi(this,e),a=yi(this,r),o="_"+n;Object.defineProperties(i,{[o]:{value:i[n],writable:!0},[n]:{enumerable:!0,get(){const l=this[o],c=a[s];return G(l)?Object.assign({},c,l):J(l,c)},set(l){this[o]=l}}})}apply(e){e.forEach(n=>n(this))}}var we=new Jj({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[Vj,qj,Xj]);function Zj(t){return!t||Be(t.size)||Be(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function pp(t,e,n,r,s){let i=e[s];return i||(i=e[s]=t.measureText(s).width,n.push(s)),i>r&&(r=i),r}function rr(t,e,n){const r=t.currentDevicePixelRatio,s=n!==0?Math.max(n/2,.5):0;return Math.round((e-s)*r)/r+s}function mp(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function gp(t,e,n,r){Av(t,e,n,r,null)}function Av(t,e,n,r,s){let i,a,o,l,c,u,h,f;const m=e.pointStyle,p=e.rotation,v=e.radius;let _=(p||0)*Oj;if(m&&typeof m=="object"&&(i=m.toString(),i==="[object HTMLImageElement]"||i==="[object HTMLCanvasElement]")){t.save(),t.translate(n,r),t.rotate(_),t.drawImage(m,-m.width/2,-m.height/2,m.width,m.height),t.restore();return}if(!(isNaN(v)||v<=0)){switch(t.beginPath(),m){default:s?t.ellipse(n,r,s/2,v,0,0,be):t.arc(n,r,v,0,be),t.closePath();break;case"triangle":u=s?s/2:v,t.moveTo(n+Math.sin(_)*u,r-Math.cos(_)*v),_+=op,t.lineTo(n+Math.sin(_)*u,r-Math.cos(_)*v),_+=op,t.lineTo(n+Math.sin(_)*u,r-Math.cos(_)*v),t.closePath();break;case"rectRounded":c=v*.516,l=v-c,a=Math.cos(_+nr)*l,h=Math.cos(_+nr)*(s?s/2-c:l),o=Math.sin(_+nr)*l,f=Math.sin(_+nr)*(s?s/2-c:l),t.arc(n-h,r-o,c,_-le,_-Ce),t.arc(n+f,r-a,c,_-Ce,_),t.arc(n+h,r+o,c,_,_+Ce),t.arc(n-f,r+a,c,_+Ce,_+le),t.closePath();break;case"rect":if(!p){l=Math.SQRT1_2*v,u=s?s/2:l,t.rect(n-u,r-l,2*u,2*l);break}_+=nr;case"rectRot":h=Math.cos(_)*(s?s/2:v),a=Math.cos(_)*v,o=Math.sin(_)*v,f=Math.sin(_)*(s?s/2:v),t.moveTo(n-h,r-o),t.lineTo(n+f,r-a),t.lineTo(n+h,r+o),t.lineTo(n-f,r+a),t.closePath();break;case"crossRot":_+=nr;case"cross":h=Math.cos(_)*(s?s/2:v),a=Math.cos(_)*v,o=Math.sin(_)*v,f=Math.sin(_)*(s?s/2:v),t.moveTo(n-h,r-o),t.lineTo(n+h,r+o),t.moveTo(n+f,r-a),t.lineTo(n-f,r+a);break;case"star":h=Math.cos(_)*(s?s/2:v),a=Math.cos(_)*v,o=Math.sin(_)*v,f=Math.sin(_)*(s?s/2:v),t.moveTo(n-h,r-o),t.lineTo(n+h,r+o),t.moveTo(n+f,r-a),t.lineTo(n-f,r+a),_+=nr,h=Math.cos(_)*(s?s/2:v),a=Math.cos(_)*v,o=Math.sin(_)*v,f=Math.sin(_)*(s?s/2:v),t.moveTo(n-h,r-o),t.lineTo(n+h,r+o),t.moveTo(n+f,r-a),t.lineTo(n-f,r+a);break;case"line":a=s?s/2:Math.cos(_)*v,o=Math.sin(_)*v,t.moveTo(n-a,r-o),t.lineTo(n+a,r+o);break;case"dash":t.moveTo(n,r),t.lineTo(n+Math.cos(_)*(s?s/2:v),r+Math.sin(_)*v);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function Mv(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function Gd(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function Qd(t){t.restore()}function eC(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),Be(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function tC(t,e,n,r,s){if(s.strikethrough||s.underline){const i=t.measureText(r),a=e-i.actualBoundingBoxLeft,o=e+i.actualBoundingBoxRight,l=n-i.actualBoundingBoxAscent,c=n+i.actualBoundingBoxDescent,u=s.strikethrough?(l+c)/2:c;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=s.decorationWidth||2,t.moveTo(a,u),t.lineTo(o,u),t.stroke()}}function nC(t,e){const n=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=n}function Wo(t,e,n,r,s,i={}){const a=Ie(e)?e:[e],o=i.strokeWidth>0&&i.strokeColor!=="";let l,c;for(t.save(),t.font=s.string,eC(t,i),l=0;l<a.length;++l)c=a[l],i.backdrop&&nC(t,i.backdrop),o&&(i.strokeColor&&(t.strokeStyle=i.strokeColor),Be(i.strokeWidth)||(t.lineWidth=i.strokeWidth),t.strokeText(c,n,r,i.maxWidth)),t.fillText(c,n,r,i.maxWidth),tC(t,n,r,c,i),r+=Number(s.lineHeight);t.restore()}function Ru(t,e){const{x:n,y:r,w:s,h:i,radius:a}=e;t.arc(n+a.topLeft,r+a.topLeft,a.topLeft,1.5*le,le,!0),t.lineTo(n,r+i-a.bottomLeft),t.arc(n+a.bottomLeft,r+i-a.bottomLeft,a.bottomLeft,le,Ce,!0),t.lineTo(n+s-a.bottomRight,r+i),t.arc(n+s-a.bottomRight,r+i-a.bottomRight,a.bottomRight,Ce,0,!0),t.lineTo(n+s,r+a.topRight),t.arc(n+s-a.topRight,r+a.topRight,a.topRight,0,-Ce,!0),t.lineTo(n+a.topLeft,r)}const rC=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,sC=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function iC(t,e){const n=(""+t).match(rC);if(!n||n[1]==="normal")return e*1.2;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100;break}return e*t}const aC=t=>+t||0;function Xd(t,e){const n={},r=G(e),s=r?Object.keys(e):e,i=G(t)?r?a=>J(t[a],t[e[a]]):a=>t[a]:()=>t;for(const a of s)n[a]=aC(i(a));return n}function oC(t){return Xd(t,{top:"y",right:"x",bottom:"y",left:"x"})}function vi(t){return Xd(t,["topLeft","topRight","bottomLeft","bottomRight"])}function Dt(t){const e=oC(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function Ze(t,e){t=t||{},e=e||we.font;let n=J(t.size,e.size);typeof n=="string"&&(n=parseInt(n,10));let r=J(t.style,e.style);r&&!(""+r).match(sC)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);const s={family:J(t.family,e.family),lineHeight:iC(J(t.lineHeight,e.lineHeight),n),size:n,style:r,weight:J(t.weight,e.weight),string:""};return s.string=Zj(s),s}function Aa(t,e,n,r){let s,i,a;for(s=0,i=t.length;s<i;++s)if(a=t[s],a!==void 0&&a!==void 0)return a}function lC(t,e,n){const{min:r,max:s}=t,i=Ev(e,(s-r)/2),a=(o,l)=>n&&o===0?0:o+l;return{min:a(r,-Math.abs(i)),max:a(s,i)}}function Os(t,e){return Object.assign(Object.create(t),e)}function Jd(t,e=[""],n,r,s=()=>t[0]){const i=n||t;typeof r>"u"&&(r=zv("_fallback",t));const a={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:i,_fallback:r,_getTarget:s,override:o=>Jd([o,...t],e,i,r)};return new Proxy(a,{deleteProperty(o,l){return delete o[l],delete o._keys,delete t[0][l],!0},get(o,l){return Iv(o,l,()=>gC(l,e,t,o))},getOwnPropertyDescriptor(o,l){return Reflect.getOwnPropertyDescriptor(o._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(o,l){return vp(o).includes(l)},ownKeys(o){return vp(o)},set(o,l,c){const u=o._storage||(o._storage=s());return o[l]=u[l]=c,delete o._keys,!0}})}function Es(t,e,n,r){const s={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:Dv(t,r),setContext:i=>Es(t,i,n,r),override:i=>Es(t.override(i),e,n,r)};return new Proxy(s,{deleteProperty(i,a){return delete i[a],delete t[a],!0},get(i,a,o){return Iv(i,a,()=>uC(i,a,o))},getOwnPropertyDescriptor(i,a){return i._descriptors.allKeys?Reflect.has(t,a)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,a)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(i,a){return Reflect.has(t,a)},ownKeys(){return Reflect.ownKeys(t)},set(i,a,o){return t[a]=o,delete i[a],!0}})}function Dv(t,e={scriptable:!0,indexable:!0}){const{_scriptable:n=e.scriptable,_indexable:r=e.indexable,_allKeys:s=e.allKeys}=t;return{allKeys:s,scriptable:n,indexable:r,isScriptable:Yn(n)?n:()=>n,isIndexable:Yn(r)?r:()=>r}}const cC=(t,e)=>t?t+Kd(e):e,Zd=(t,e)=>G(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function Iv(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];const r=n();return t[e]=r,r}function uC(t,e,n){const{_proxy:r,_context:s,_subProxy:i,_descriptors:a}=t;let o=r[e];return Yn(o)&&a.isScriptable(e)&&(o=dC(e,o,t,n)),Ie(o)&&o.length&&(o=hC(e,o,t,a.isIndexable)),Zd(e,o)&&(o=Es(o,s,i&&i[e],a)),o}function dC(t,e,n,r){const{_proxy:s,_context:i,_subProxy:a,_stack:o}=n;if(o.has(t))throw new Error("Recursion detected: "+Array.from(o).join("->")+"->"+t);o.add(t);let l=e(i,a||r);return o.delete(t),Zd(t,l)&&(l=eh(s._scopes,s,t,l)),l}function hC(t,e,n,r){const{_proxy:s,_context:i,_subProxy:a,_descriptors:o}=n;if(typeof i.index<"u"&&r(t))return e[i.index%e.length];if(G(e[0])){const l=e,c=s._scopes.filter(u=>u!==l);e=[];for(const u of l){const h=eh(c,s,t,u);e.push(Es(h,i,a&&a[t],o))}}return e}function Lv(t,e,n){return Yn(t)?t(e,n):t}const fC=(t,e)=>t===!0?e:typeof t=="string"?Qi(e,t):void 0;function pC(t,e,n,r,s){for(const i of e){const a=fC(n,i);if(a){t.add(a);const o=Lv(a._fallback,n,s);if(typeof o<"u"&&o!==n&&o!==r)return o}else if(a===!1&&typeof r<"u"&&n!==r)return null}return!1}function eh(t,e,n,r){const s=e._rootScopes,i=Lv(e._fallback,n,r),a=[...t,...s],o=new Set;o.add(r);let l=yp(o,a,n,i||n,r);return l===null||typeof i<"u"&&i!==n&&(l=yp(o,a,i,l,r),l===null)?!1:Jd(Array.from(o),[""],s,i,()=>mC(e,n,r))}function yp(t,e,n,r,s){for(;n;)n=pC(t,e,n,r,s);return n}function mC(t,e,n){const r=t._getTarget();e in r||(r[e]={});const s=r[e];return Ie(s)&&G(n)?n:s||{}}function gC(t,e,n,r){let s;for(const i of e)if(s=zv(cC(i,t),n),typeof s<"u")return Zd(t,s)?eh(n,r,t,s):s}function zv(t,e){for(const n of e){if(!n)continue;const r=n[t];if(typeof r<"u")return r}}function vp(t){let e=t._keys;return e||(e=t._keys=yC(t._scopes)),e}function yC(t){const e=new Set;for(const n of t)for(const r of Object.keys(n).filter(s=>!s.startsWith("_")))e.add(r);return Array.from(e)}function th(){return typeof window<"u"&&typeof document<"u"}function nh(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function Ho(t,e,n){let r;return typeof t=="string"?(r=parseInt(t,10),t.indexOf("%")!==-1&&(r=r/100*e.parentNode[n])):r=t,r}const xl=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function vC(t,e){return xl(t).getPropertyValue(e)}const wC=["top","right","bottom","left"];function _r(t,e,n){const r={};n=n?"-"+n:"";for(let s=0;s<4;s++){const i=wC[s];r[i]=parseFloat(t[e+"-"+i+n])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}const _C=(t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot);function xC(t,e){const n=t.touches,r=n&&n.length?n[0]:t,{offsetX:s,offsetY:i}=r;let a=!1,o,l;if(_C(s,i,t.target))o=s,l=i;else{const c=e.getBoundingClientRect();o=r.clientX-c.left,l=r.clientY-c.top,a=!0}return{x:o,y:l,box:a}}function cr(t,e){if("native"in t)return t;const{canvas:n,currentDevicePixelRatio:r}=e,s=xl(n),i=s.boxSizing==="border-box",a=_r(s,"padding"),o=_r(s,"border","width"),{x:l,y:c,box:u}=xC(t,n),h=a.left+(u&&o.left),f=a.top+(u&&o.top);let{width:m,height:p}=e;return i&&(m-=a.width+o.width,p-=a.height+o.height),{x:Math.round((l-h)/m*n.width/r),y:Math.round((c-f)/p*n.height/r)}}function bC(t,e,n){let r,s;if(e===void 0||n===void 0){const i=t&&nh(t);if(!i)e=t.clientWidth,n=t.clientHeight;else{const a=i.getBoundingClientRect(),o=xl(i),l=_r(o,"border","width"),c=_r(o,"padding");e=a.width-c.width-l.width,n=a.height-c.height-l.height,r=Ho(o.maxWidth,i,"clientWidth"),s=Ho(o.maxHeight,i,"clientHeight")}}return{width:e,height:n,maxWidth:r||Uo,maxHeight:s||Uo}}const Nn=t=>Math.round(t*10)/10;function kC(t,e,n,r){const s=xl(t),i=_r(s,"margin"),a=Ho(s.maxWidth,t,"clientWidth")||Uo,o=Ho(s.maxHeight,t,"clientHeight")||Uo,l=bC(t,e,n);let{width:c,height:u}=l;if(s.boxSizing==="content-box"){const f=_r(s,"border","width"),m=_r(s,"padding");c-=m.width+f.width,u-=m.height+f.height}return c=Math.max(0,c-i.width),u=Math.max(0,r?c/r:u-i.height),c=Nn(Math.min(c,a,l.maxWidth)),u=Nn(Math.min(u,o,l.maxHeight)),c&&!u&&(u=Nn(c/2)),(e!==void 0||n!==void 0)&&r&&l.height&&u>l.height&&(u=l.height,c=Nn(Math.floor(u*r))),{width:c,height:u}}function wp(t,e,n){const r=e||1,s=Nn(t.height*r),i=Nn(t.width*r);t.height=Nn(t.height),t.width=Nn(t.width);const a=t.canvas;return a.style&&(n||!a.style.height&&!a.style.width)&&(a.style.height=`${t.height}px`,a.style.width=`${t.width}px`),t.currentDevicePixelRatio!==r||a.height!==s||a.width!==i?(t.currentDevicePixelRatio=r,a.height=s,a.width=i,t.ctx.setTransform(r,0,0,r,0,0),!0):!1}const SC=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};th()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t}();function _p(t,e){const n=vC(t,e),r=n&&n.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}const EC=function(t,e){return{x(n){return t+t+e-n},setWidth(n){e=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,r){return n-r},leftForLtr(n,r){return n-r}}},jC=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function ps(t,e,n){return t?EC(e,n):jC()}function $v(t,e){let n,r;(e==="ltr"||e==="rtl")&&(n=t.canvas.style,r=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=r)}function Uv(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function Ma(t,e,n){return t.options.clip?t[n]:e[n]}function CC(t,e){const{xScale:n,yScale:r}=t;return n&&r?{left:Ma(n,e,"left"),right:Ma(n,e,"right"),top:Ma(r,e,"top"),bottom:Ma(r,e,"bottom")}:e}function PC(t,e){const n=e._clip;if(n.disabled)return!1;const r=CC(e,t.chartArea);return{left:n.left===!1?0:r.left-(n.left===!0?0:n.left),right:n.right===!1?t.width:r.right+(n.right===!0?0:n.right),top:n.top===!1?0:r.top-(n.top===!0?0:n.top),bottom:n.bottom===!1?t.height:r.bottom+(n.bottom===!0?0:n.bottom)}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class TC{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,n,r,s){const i=n.listeners[s],a=n.duration;i.forEach(o=>o({chart:e,initial:n.initial,numSteps:a,currentStep:Math.min(r-n.start,a)}))}_refresh(){this._request||(this._running=!0,this._request=Tv.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let n=0;this._charts.forEach((r,s)=>{if(!r.running||!r.items.length)return;const i=r.items;let a=i.length-1,o=!1,l;for(;a>=0;--a)l=i[a],l._active?(l._total>r.duration&&(r.duration=l._total),l.tick(e),o=!0):(i[a]=i[i.length-1],i.pop());o&&(s.draw(),this._notify(s,r,e,"progress")),i.length||(r.running=!1,this._notify(s,r,e,"complete"),r.initial=!1),n+=i.length}),this._lastDate=e,n===0&&(this._running=!1)}_getAnims(e){const n=this._charts;let r=n.get(e);return r||(r={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(e,r)),r}listen(e,n,r){this._getAnims(e).listeners[n].push(r)}add(e,n){!n||!n.length||this._getAnims(e).items.push(...n)}has(e){return this._getAnims(e).items.length>0}start(e){const n=this._charts.get(e);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((r,s)=>Math.max(r,s._duration),0),this._refresh())}running(e){if(!this._running)return!1;const n=this._charts.get(e);return!(!n||!n.running||!n.items.length)}stop(e){const n=this._charts.get(e);if(!n||!n.items.length)return;const r=n.items;let s=r.length-1;for(;s>=0;--s)r[s].cancel();n.items=[],this._notify(e,n,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var Qt=new TC;const xp="transparent",NC={boolean(t,e,n){return n>.5?e:t},color(t,e,n){const r=hp(t||xp),s=r.valid&&hp(e||xp);return s&&s.valid?s.mix(r,n).hexString():e},number(t,e,n){return t+(e-t)*n}};class OC{constructor(e,n,r,s){const i=n[r];s=Aa([e.to,s,i,e.from]);const a=Aa([e.from,i,s]);this._active=!0,this._fn=e.fn||NC[e.type||typeof a],this._easing=gi[e.easing]||gi.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=n,this._prop=r,this._from=a,this._to=s,this._promises=void 0}active(){return this._active}update(e,n,r){if(this._active){this._notify(!1);const s=this._target[this._prop],i=r-this._start,a=this._duration-i;this._start=r,this._duration=Math.floor(Math.max(a,e.duration)),this._total+=i,this._loop=!!e.loop,this._to=Aa([e.to,n,s,e.from]),this._from=Aa([e.from,s,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const n=e-this._start,r=this._duration,s=this._prop,i=this._from,a=this._loop,o=this._to;let l;if(this._active=i!==o&&(a||n<r),!this._active){this._target[s]=o,this._notify(!0);return}if(n<0){this._target[s]=i;return}l=n/r%2,l=a&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[s]=this._fn(i,o,l)}wait(){const e=this._promises||(this._promises=[]);return new Promise((n,r)=>{e.push({res:n,rej:r})})}_notify(e){const n=e?"res":"rej",r=this._promises||[];for(let s=0;s<r.length;s++)r[s][n]()}}class Fv{constructor(e,n){this._chart=e,this._properties=new Map,this.configure(n)}configure(e){if(!G(e))return;const n=Object.keys(we.animation),r=this._properties;Object.getOwnPropertyNames(e).forEach(s=>{const i=e[s];if(!G(i))return;const a={};for(const o of n)a[o]=i[o];(Ie(i.properties)&&i.properties||[s]).forEach(o=>{(o===s||!r.has(o))&&r.set(o,a)})})}_animateOptions(e,n){const r=n.options,s=AC(e,r);if(!s)return[];const i=this._createAnimations(s,r);return r.$shared&&RC(e.options.$animations,r).then(()=>{e.options=r},()=>{}),i}_createAnimations(e,n){const r=this._properties,s=[],i=e.$animations||(e.$animations={}),a=Object.keys(n),o=Date.now();let l;for(l=a.length-1;l>=0;--l){const c=a[l];if(c.charAt(0)==="$")continue;if(c==="options"){s.push(...this._animateOptions(e,n));continue}const u=n[c];let h=i[c];const f=r.get(c);if(h)if(f&&h.active()){h.update(f,u,o);continue}else h.cancel();if(!f||!f.duration){e[c]=u;continue}i[c]=h=new OC(f,e,c,u),s.push(h)}return s}update(e,n){if(this._properties.size===0){Object.assign(e,n);return}const r=this._createAnimations(e,n);if(r.length)return Qt.add(this._chart,r),!0}}function RC(t,e){const n=[],r=Object.keys(e);for(let s=0;s<r.length;s++){const i=t[r[s]];i&&i.active()&&n.push(i.wait())}return Promise.all(n)}function AC(t,e){if(!e)return;let n=t.options;if(!n){t.options=e;return}return n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function bp(t,e){const n=t&&t.options||{},r=n.reverse,s=n.min===void 0?e:0,i=n.max===void 0?e:0;return{start:r?i:s,end:r?s:i}}function MC(t,e,n){if(n===!1)return!1;const r=bp(t,n),s=bp(e,n);return{top:s.end,right:r.end,bottom:s.start,left:r.start}}function DC(t){let e,n,r,s;return G(t)?(e=t.top,n=t.right,r=t.bottom,s=t.left):e=n=r=s=t,{top:e,right:n,bottom:r,left:s,disabled:t===!1}}function Bv(t,e){const n=[],r=t._getSortedDatasetMetas(e);let s,i;for(s=0,i=r.length;s<i;++s)n.push(r[s].index);return n}function kp(t,e,n,r={}){const s=t.keys,i=r.mode==="single";let a,o,l,c;if(e===null)return;let u=!1;for(a=0,o=s.length;a<o;++a){if(l=+s[a],l===n){if(u=!0,r.all)continue;break}c=t.values[l],dn(c)&&(i||e===0||lp(e)===lp(c))&&(e+=c)}return!u&&!r.all?0:e}function IC(t,e){const{iScale:n,vScale:r}=e,s=n.axis==="x"?"x":"y",i=r.axis==="x"?"x":"y",a=Object.keys(t),o=new Array(a.length);let l,c,u;for(l=0,c=a.length;l<c;++l)u=a[l],o[l]={[s]:u,[i]:t[u]};return o}function fc(t,e){const n=t&&t.options.stacked;return n||n===void 0&&e.stack!==void 0}function LC(t,e,n){return`${t.id}.${e.id}.${n.stack||n.type}`}function zC(t){const{min:e,max:n,minDefined:r,maxDefined:s}=t.getUserBounds();return{min:r?e:Number.NEGATIVE_INFINITY,max:s?n:Number.POSITIVE_INFINITY}}function $C(t,e,n){const r=t[e]||(t[e]={});return r[n]||(r[n]={})}function Sp(t,e,n,r){for(const s of e.getMatchingVisibleMetas(r).reverse()){const i=t[s.index];if(n&&i>0||!n&&i<0)return s.index}return null}function Ep(t,e){const{chart:n,_cachedMeta:r}=t,s=n._stacks||(n._stacks={}),{iScale:i,vScale:a,index:o}=r,l=i.axis,c=a.axis,u=LC(i,a,r),h=e.length;let f;for(let m=0;m<h;++m){const p=e[m],{[l]:v,[c]:_}=p,w=p._stacks||(p._stacks={});f=w[c]=$C(s,u,v),f[o]=_,f._top=Sp(f,a,!0,r.type),f._bottom=Sp(f,a,!1,r.type);const y=f._visualValues||(f._visualValues={});y[o]=_}}function pc(t,e){const n=t.scales;return Object.keys(n).filter(r=>n[r].axis===e).shift()}function UC(t,e){return Os(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function FC(t,e,n){return Os(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}function Fs(t,e){const n=t.controller.index,r=t.vScale&&t.vScale.axis;if(r){e=e||t._parsed;for(const s of e){const i=s._stacks;if(!i||i[r]===void 0||i[r][n]===void 0)return;delete i[r][n],i[r]._visualValues!==void 0&&i[r]._visualValues[n]!==void 0&&delete i[r]._visualValues[n]}}}const mc=t=>t==="reset"||t==="none",jp=(t,e)=>e?t:Object.assign({},t),BC=(t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:Bv(n,!0),values:null};class wi{constructor(e,n){this.chart=e,this._ctx=e.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=fc(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&Fs(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,n=this._cachedMeta,r=this.getDataset(),s=(h,f,m,p)=>h==="x"?f:h==="r"?p:m,i=n.xAxisID=J(r.xAxisID,pc(e,"x")),a=n.yAxisID=J(r.yAxisID,pc(e,"y")),o=n.rAxisID=J(r.rAxisID,pc(e,"r")),l=n.indexAxis,c=n.iAxisID=s(l,i,a,o),u=n.vAxisID=s(l,a,i,o);n.xScale=this.getScaleForId(i),n.yScale=this.getScaleForId(a),n.rScale=this.getScaleForId(o),n.iScale=this.getScaleForId(c),n.vScale=this.getScaleForId(u)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const n=this._cachedMeta;return e===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&cp(this._data,this),e._stacked&&Fs(e)}_dataCheck(){const e=this.getDataset(),n=e.data||(e.data=[]),r=this._data;if(G(n)){const s=this._cachedMeta;this._data=IC(n,s)}else if(r!==n){if(r){cp(r,this);const s=this._cachedMeta;Fs(s),s._parsed=[]}n&&Object.isExtensible(n)&&$j(n,this),this._syncList=[],this._data=n}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const n=this._cachedMeta,r=this.getDataset();let s=!1;this._dataCheck();const i=n._stacked;n._stacked=fc(n.vScale,n),n.stack!==r.stack&&(s=!0,Fs(n),n.stack=r.stack),this._resyncElements(e),(s||i!==n._stacked)&&(Ep(this,n._parsed),n._stacked=fc(n.vScale,n))}configure(){const e=this.chart.config,n=e.datasetScopeKeys(this._type),r=e.getOptionScopes(this.getDataset(),n,!0);this.options=e.createResolver(r,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,n){const{_cachedMeta:r,_data:s}=this,{iScale:i,_stacked:a}=r,o=i.axis;let l=e===0&&n===s.length?!0:r._sorted,c=e>0&&r._parsed[e-1],u,h,f;if(this._parsing===!1)r._parsed=s,r._sorted=!0,f=s;else{Ie(s[e])?f=this.parseArrayData(r,s,e,n):G(s[e])?f=this.parseObjectData(r,s,e,n):f=this.parsePrimitiveData(r,s,e,n);const m=()=>h[o]===null||c&&h[o]<c[o];for(u=0;u<n;++u)r._parsed[u+e]=h=f[u],l&&(m()&&(l=!1),c=h);r._sorted=l}a&&Ep(this,f)}parsePrimitiveData(e,n,r,s){const{iScale:i,vScale:a}=e,o=i.axis,l=a.axis,c=i.getLabels(),u=i===a,h=new Array(s);let f,m,p;for(f=0,m=s;f<m;++f)p=f+r,h[f]={[o]:u||i.parse(c[p],p),[l]:a.parse(n[p],p)};return h}parseArrayData(e,n,r,s){const{xScale:i,yScale:a}=e,o=new Array(s);let l,c,u,h;for(l=0,c=s;l<c;++l)u=l+r,h=n[u],o[l]={x:i.parse(h[0],u),y:a.parse(h[1],u)};return o}parseObjectData(e,n,r,s){const{xScale:i,yScale:a}=e,{xAxisKey:o="x",yAxisKey:l="y"}=this._parsing,c=new Array(s);let u,h,f,m;for(u=0,h=s;u<h;++u)f=u+r,m=n[f],c[u]={x:i.parse(Qi(m,o),f),y:a.parse(Qi(m,l),f)};return c}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,n,r){const s=this.chart,i=this._cachedMeta,a=n[e.axis],o={keys:Bv(s,!0),values:n._stacks[e.axis]._visualValues};return kp(o,a,i.index,{mode:r})}updateRangeFromParsed(e,n,r,s){const i=r[n.axis];let a=i===null?NaN:i;const o=s&&r._stacks[n.axis];s&&o&&(s.values=o,a=kp(s,i,this._cachedMeta.index)),e.min=Math.min(e.min,a),e.max=Math.max(e.max,a)}getMinMax(e,n){const r=this._cachedMeta,s=r._parsed,i=r._sorted&&e===r.iScale,a=s.length,o=this._getOtherScale(e),l=BC(n,r,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:u,max:h}=zC(o);let f,m;function p(){m=s[f];const v=m[o.axis];return!dn(m[e.axis])||u>v||h<v}for(f=0;f<a&&!(!p()&&(this.updateRangeFromParsed(c,e,m,l),i));++f);if(i){for(f=a-1;f>=0;--f)if(!p()){this.updateRangeFromParsed(c,e,m,l);break}}return c}getAllParsedValues(e){const n=this._cachedMeta._parsed,r=[];let s,i,a;for(s=0,i=n.length;s<i;++s)a=n[s][e.axis],dn(a)&&r.push(a);return r}getMaxOverflow(){return!1}getLabelAndValue(e){const n=this._cachedMeta,r=n.iScale,s=n.vScale,i=this.getParsed(e);return{label:r?""+r.getLabelForValue(i[r.axis]):"",value:s?""+s.getLabelForValue(i[s.axis]):""}}_update(e){const n=this._cachedMeta;this.update(e||"default"),n._clip=DC(J(this.options.clip,MC(n.xScale,n.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,n=this.chart,r=this._cachedMeta,s=r.data||[],i=n.chartArea,a=[],o=this._drawStart||0,l=this._drawCount||s.length-o,c=this.options.drawActiveElementsOnTop;let u;for(r.dataset&&r.dataset.draw(e,i,o,l),u=o;u<o+l;++u){const h=s[u];h.hidden||(h.active&&c?a.push(h):h.draw(e,i))}for(u=0;u<a.length;++u)a[u].draw(e,i)}getStyle(e,n){const r=n?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(r):this.resolveDataElementOptions(e||0,r)}getContext(e,n,r){const s=this.getDataset();let i;if(e>=0&&e<this._cachedMeta.data.length){const a=this._cachedMeta.data[e];i=a.$context||(a.$context=FC(this.getContext(),e,a)),i.parsed=this.getParsed(e),i.raw=s.data[e],i.index=i.dataIndex=e}else i=this.$context||(this.$context=UC(this.chart.getContext(),this.index)),i.dataset=s,i.index=i.datasetIndex=this.index;return i.active=!!n,i.mode=r,i}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,n){return this._resolveElementOptions(this.dataElementType.id,n,e)}_resolveElementOptions(e,n="default",r){const s=n==="active",i=this._cachedDataOpts,a=e+"-"+n,o=i[a],l=this.enableOptionSharing&&$o(r);if(o)return jp(o,l);const c=this.chart.config,u=c.datasetElementScopeKeys(this._type,e),h=s?[`${e}Hover`,"hover",e,""]:[e,""],f=c.getOptionScopes(this.getDataset(),u),m=Object.keys(we.elements[e]),p=()=>this.getContext(r,s,n),v=c.resolveNamedOptions(f,m,p,h);return v.$shared&&(v.$shared=l,i[a]=Object.freeze(jp(v,l))),v}_resolveAnimations(e,n,r){const s=this.chart,i=this._cachedDataOpts,a=`animation-${n}`,o=i[a];if(o)return o;let l;if(s.options.animation!==!1){const u=this.chart.config,h=u.datasetAnimationScopeKeys(this._type,n),f=u.getOptionScopes(this.getDataset(),h);l=u.createResolver(f,this.getContext(e,r,n))}const c=new Fv(s,l&&l.animations);return l&&l._cacheable&&(i[a]=Object.freeze(c)),c}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,n){return!n||mc(e)||this.chart._animationsDisabled}_getSharedOptions(e,n){const r=this.resolveDataElementOptions(e,n),s=this._sharedOptions,i=this.getSharedOptions(r),a=this.includeOptions(n,i)||i!==s;return this.updateSharedOptions(i,n,r),{sharedOptions:i,includeOptions:a}}updateElement(e,n,r,s){mc(s)?Object.assign(e,r):this._resolveAnimations(n,s).update(e,r)}updateSharedOptions(e,n,r){e&&!mc(n)&&this._resolveAnimations(void 0,n).update(e,r)}_setStyle(e,n,r,s){e.active=s;const i=this.getStyle(n,s);this._resolveAnimations(n,r,s).update(e,{options:!s&&this.getSharedOptions(i)||i})}removeHoverStyle(e,n,r){this._setStyle(e,r,"active",!1)}setHoverStyle(e,n,r){this._setStyle(e,r,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const n=this._data,r=this._cachedMeta.data;for(const[o,l,c]of this._syncList)this[o](l,c);this._syncList=[];const s=r.length,i=n.length,a=Math.min(i,s);a&&this.parse(0,a),i>s?this._insertElements(s,i-s,e):i<s&&this._removeElements(i,s-i)}_insertElements(e,n,r=!0){const s=this._cachedMeta,i=s.data,a=e+n;let o;const l=c=>{for(c.length+=n,o=c.length-1;o>=a;o--)c[o]=c[o-n]};for(l(i),o=e;o<a;++o)i[o]=new this.dataElementType;this._parsing&&l(s._parsed),this.parse(e,n),r&&this.updateElements(i,e,n,"reset")}updateElements(e,n,r,s){}_removeElements(e,n){const r=this._cachedMeta;if(this._parsing){const s=r._parsed.splice(e,n);r._stacked&&Fs(r,s)}r.data.splice(e,n)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[n,r,s]=e;this[n](r,s)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,n){n&&this._sync(["_removeElements",e,n]);const r=arguments.length-2;r&&this._sync(["_insertElements",e,r])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}V(wi,"defaults",{}),V(wi,"datasetElementType",null),V(wi,"dataElementType",null);function WC(t,e,n){let r=1,s=1,i=0,a=0;if(e<be){const o=t,l=o+e,c=Math.cos(o),u=Math.sin(o),h=Math.cos(l),f=Math.sin(l),m=(g,x,k)=>Bo(g,o,l,!0)?1:Math.max(x,x*n,k,k*n),p=(g,x,k)=>Bo(g,o,l,!0)?-1:Math.min(x,x*n,k,k*n),v=m(0,c,h),_=m(Ce,u,f),w=p(le,c,h),y=p(le+Ce,u,f);r=(v-w)/2,s=(_-y)/2,i=-(v+w)/2,a=-(_+y)/2}return{ratioX:r,ratioY:s,offsetX:i,offsetY:a}}class Zs extends wi{constructor(e,n){super(e,n),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,n){const r=this.getDataset().data,s=this._cachedMeta;if(this._parsing===!1)s._parsed=r;else{let i=l=>+r[l];if(G(r[e])){const{key:l="value"}=this._parsing;i=c=>+Qi(r[c],l)}let a,o;for(a=e,o=e+n;a<o;++a)s._parsed[a]=i(a)}}_getRotation(){return gr(this.options.rotation-90)}_getCircumference(){return gr(this.options.circumference)}_getRotationExtents(){let e=be,n=-be;for(let r=0;r<this.chart.data.datasets.length;++r)if(this.chart.isDatasetVisible(r)&&this.chart.getDatasetMeta(r).type===this._type){const s=this.chart.getDatasetMeta(r).controller,i=s._getRotation(),a=s._getCircumference();e=Math.min(e,i),n=Math.max(n,i+a)}return{rotation:e,circumference:n-e}}update(e){const n=this.chart,{chartArea:r}=n,s=this._cachedMeta,i=s.data,a=this.getMaxBorderWidth()+this.getMaxOffset(i)+this.options.spacing,o=Math.max((Math.min(r.width,r.height)-a)/2,0),l=Math.min(Ej(this.options.cutout,o),1),c=this._getRingWeight(this.index),{circumference:u,rotation:h}=this._getRotationExtents(),{ratioX:f,ratioY:m,offsetX:p,offsetY:v}=WC(h,u,l),_=(r.width-a)/f,w=(r.height-a)/m,y=Math.max(Math.min(_,w)/2,0),g=Ev(this.options.radius,y),x=Math.max(g*l,0),k=(g-x)/this._getVisibleDatasetWeightTotal();this.offsetX=p*g,this.offsetY=v*g,s.total=this.calculateTotal(),this.outerRadius=g-k*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-k*c,0),this.updateElements(i,0,i.length,e)}_circumference(e,n){const r=this.options,s=this._cachedMeta,i=this._getCircumference();return n&&r.animation.animateRotate||!this.chart.getDataVisibility(e)||s._parsed[e]===null||s.data[e].hidden?0:this.calculateCircumference(s._parsed[e]*i/be)}updateElements(e,n,r,s){const i=s==="reset",a=this.chart,o=a.chartArea,c=a.options.animation,u=(o.left+o.right)/2,h=(o.top+o.bottom)/2,f=i&&c.animateScale,m=f?0:this.innerRadius,p=f?0:this.outerRadius,{sharedOptions:v,includeOptions:_}=this._getSharedOptions(n,s);let w=this._getRotation(),y;for(y=0;y<n;++y)w+=this._circumference(y,i);for(y=n;y<n+r;++y){const g=this._circumference(y,i),x=e[y],k={x:u+this.offsetX,y:h+this.offsetY,startAngle:w,endAngle:w+g,circumference:g,outerRadius:p,innerRadius:m};_&&(k.options=v||this.resolveDataElementOptions(y,x.active?"active":s)),w+=g,this.updateElement(x,y,k,s)}}calculateTotal(){const e=this._cachedMeta,n=e.data;let r=0,s;for(s=0;s<n.length;s++){const i=e._parsed[s];i!==null&&!isNaN(i)&&this.chart.getDataVisibility(s)&&!n[s].hidden&&(r+=Math.abs(i))}return r}calculateCircumference(e){const n=this._cachedMeta.total;return n>0&&!isNaN(e)?be*(Math.abs(e)/n):0}getLabelAndValue(e){const n=this._cachedMeta,r=this.chart,s=r.data.labels||[],i=Yj(n._parsed[e],r.options.locale);return{label:s[e]||"",value:i}}getMaxBorderWidth(e){let n=0;const r=this.chart;let s,i,a,o,l;if(!e){for(s=0,i=r.data.datasets.length;s<i;++s)if(r.isDatasetVisible(s)){a=r.getDatasetMeta(s),e=a.data,o=a.controller;break}}if(!e)return 0;for(s=0,i=e.length;s<i;++s)l=o.resolveDataElementOptions(s),l.borderAlign!=="inner"&&(n=Math.max(n,l.borderWidth||0,l.hoverBorderWidth||0));return n}getMaxOffset(e){let n=0;for(let r=0,s=e.length;r<s;++r){const i=this.resolveDataElementOptions(r);n=Math.max(n,i.offset||0,i.hoverOffset||0)}return n}_getRingWeightOffset(e){let n=0;for(let r=0;r<e;++r)this.chart.isDatasetVisible(r)&&(n+=this._getRingWeight(r));return n}_getRingWeight(e){return Math.max(J(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}V(Zs,"id","doughnut"),V(Zs,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),V(Zs,"descriptors",{_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")}),V(Zs,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const n=e.data,{labels:{pointStyle:r,textAlign:s,color:i,useBorderRadius:a,borderRadius:o}}=e.legend.options;return n.labels.length&&n.datasets.length?n.labels.map((l,c)=>{const h=e.getDatasetMeta(0).controller.getStyle(c);return{text:l,fillStyle:h.backgroundColor,fontColor:i,hidden:!e.getDataVisibility(c),lineDash:h.borderDash,lineDashOffset:h.borderDashOffset,lineJoin:h.borderJoinStyle,lineWidth:h.borderWidth,strokeStyle:h.borderColor,textAlign:s,pointStyle:r,borderRadius:a&&(o||h.borderRadius),index:c}}):[]}},onClick(e,n,r){r.chart.toggleDataVisibility(n.index),r.chart.update()}}}});function sr(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class rh{constructor(e){V(this,"options");this.options=e||{}}static override(e){Object.assign(rh.prototype,e)}init(){}formats(){return sr()}parse(){return sr()}format(){return sr()}add(){return sr()}diff(){return sr()}startOf(){return sr()}endOf(){return sr()}}var HC={_date:rh};function VC(t,e,n,r){const{controller:s,data:i,_sorted:a}=t,o=s._cachedMeta.iScale,l=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null;if(o&&e===o.axis&&e!=="r"&&a&&i.length){const c=o._reversePixels?Lj:Nu;if(r){if(s._sharedOptions){const u=i[0],h=typeof u.getRange=="function"&&u.getRange(e);if(h){const f=c(i,e,n-h),m=c(i,e,n+h);return{lo:f.lo,hi:m.hi}}}}else{const u=c(i,e,n);if(l){const{vScale:h}=s._cachedMeta,{_parsed:f}=t,m=f.slice(0,u.lo+1).reverse().findIndex(v=>!Be(v[h.axis]));u.lo-=Math.max(0,m);const p=f.slice(u.hi).findIndex(v=>!Be(v[h.axis]));u.hi+=Math.max(0,p)}return u}}return{lo:0,hi:i.length-1}}function bl(t,e,n,r,s){const i=t.getSortedVisibleDatasetMetas(),a=n[e];for(let o=0,l=i.length;o<l;++o){const{index:c,data:u}=i[o],{lo:h,hi:f}=VC(i[o],e,a,s);for(let m=h;m<=f;++m){const p=u[m];p.skip||r(p,c,m)}}}function qC(t){const e=t.indexOf("x")!==-1,n=t.indexOf("y")!==-1;return function(r,s){const i=e?Math.abs(r.x-s.x):0,a=n?Math.abs(r.y-s.y):0;return Math.sqrt(Math.pow(i,2)+Math.pow(a,2))}}function gc(t,e,n,r,s){const i=[];return!s&&!t.isPointInArea(e)||bl(t,n,e,function(o,l,c){!s&&!Mv(o,t.chartArea,0)||o.inRange(e.x,e.y,r)&&i.push({element:o,datasetIndex:l,index:c})},!0),i}function KC(t,e,n,r){let s=[];function i(a,o,l){const{startAngle:c,endAngle:u}=a.getProps(["startAngle","endAngle"],r),{angle:h}=Cv(a,{x:e.x,y:e.y});Bo(h,c,u)&&s.push({element:a,datasetIndex:o,index:l})}return bl(t,n,e,i),s}function YC(t,e,n,r,s,i){let a=[];const o=qC(n);let l=Number.POSITIVE_INFINITY;function c(u,h,f){const m=u.inRange(e.x,e.y,s);if(r&&!m)return;const p=u.getCenterPoint(s);if(!(!!i||t.isPointInArea(p))&&!m)return;const _=o(e,p);_<l?(a=[{element:u,datasetIndex:h,index:f}],l=_):_===l&&a.push({element:u,datasetIndex:h,index:f})}return bl(t,n,e,c),a}function yc(t,e,n,r,s,i){return!i&&!t.isPointInArea(e)?[]:n==="r"&&!r?KC(t,e,n,s):YC(t,e,n,r,s,i)}function Cp(t,e,n,r,s){const i=[],a=n==="x"?"inXRange":"inYRange";let o=!1;return bl(t,n,e,(l,c,u)=>{l[a]&&l[a](e[n],s)&&(i.push({element:l,datasetIndex:c,index:u}),o=o||l.inRange(e.x,e.y,s))}),r&&!o?[]:i}var GC={modes:{index(t,e,n,r){const s=cr(e,t),i=n.axis||"x",a=n.includeInvisible||!1,o=n.intersect?gc(t,s,i,r,a):yc(t,s,i,!1,r,a),l=[];return o.length?(t.getSortedVisibleDatasetMetas().forEach(c=>{const u=o[0].index,h=c.data[u];h&&!h.skip&&l.push({element:h,datasetIndex:c.index,index:u})}),l):[]},dataset(t,e,n,r){const s=cr(e,t),i=n.axis||"xy",a=n.includeInvisible||!1;let o=n.intersect?gc(t,s,i,r,a):yc(t,s,i,!1,r,a);if(o.length>0){const l=o[0].datasetIndex,c=t.getDatasetMeta(l).data;o=[];for(let u=0;u<c.length;++u)o.push({element:c[u],datasetIndex:l,index:u})}return o},point(t,e,n,r){const s=cr(e,t),i=n.axis||"xy",a=n.includeInvisible||!1;return gc(t,s,i,r,a)},nearest(t,e,n,r){const s=cr(e,t),i=n.axis||"xy",a=n.includeInvisible||!1;return yc(t,s,i,n.intersect,r,a)},x(t,e,n,r){const s=cr(e,t);return Cp(t,s,"x",n.intersect,r)},y(t,e,n,r){const s=cr(e,t);return Cp(t,s,"y",n.intersect,r)}}};const Wv=["left","top","right","bottom"];function Bs(t,e){return t.filter(n=>n.pos===e)}function Pp(t,e){return t.filter(n=>Wv.indexOf(n.pos)===-1&&n.box.axis===e)}function Ws(t,e){return t.sort((n,r)=>{const s=e?r:n,i=e?n:r;return s.weight===i.weight?s.index-i.index:s.weight-i.weight})}function QC(t){const e=[];let n,r,s,i,a,o;for(n=0,r=(t||[]).length;n<r;++n)s=t[n],{position:i,options:{stack:a,stackWeight:o=1}}=s,e.push({index:n,box:s,pos:i,horizontal:s.isHorizontal(),weight:s.weight,stack:a&&i+a,stackWeight:o});return e}function XC(t){const e={};for(const n of t){const{stack:r,pos:s,stackWeight:i}=n;if(!r||!Wv.includes(s))continue;const a=e[r]||(e[r]={count:0,placed:0,weight:0,size:0});a.count++,a.weight+=i}return e}function JC(t,e){const n=XC(t),{vBoxMaxWidth:r,hBoxMaxHeight:s}=e;let i,a,o;for(i=0,a=t.length;i<a;++i){o=t[i];const{fullSize:l}=o.box,c=n[o.stack],u=c&&o.stackWeight/c.weight;o.horizontal?(o.width=u?u*r:l&&e.availableWidth,o.height=s):(o.width=r,o.height=u?u*s:l&&e.availableHeight)}return n}function ZC(t){const e=QC(t),n=Ws(e.filter(c=>c.box.fullSize),!0),r=Ws(Bs(e,"left"),!0),s=Ws(Bs(e,"right")),i=Ws(Bs(e,"top"),!0),a=Ws(Bs(e,"bottom")),o=Pp(e,"x"),l=Pp(e,"y");return{fullSize:n,leftAndTop:r.concat(i),rightAndBottom:s.concat(l).concat(a).concat(o),chartArea:Bs(e,"chartArea"),vertical:r.concat(s).concat(l),horizontal:i.concat(a).concat(o)}}function Tp(t,e,n,r){return Math.max(t[n],e[n])+Math.max(t[r],e[r])}function Hv(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function e2(t,e,n,r){const{pos:s,box:i}=n,a=t.maxPadding;if(!G(s)){n.size&&(t[s]-=n.size);const h=r[n.stack]||{size:0,count:1};h.size=Math.max(h.size,n.horizontal?i.height:i.width),n.size=h.size/h.count,t[s]+=n.size}i.getPadding&&Hv(a,i.getPadding());const o=Math.max(0,e.outerWidth-Tp(a,t,"left","right")),l=Math.max(0,e.outerHeight-Tp(a,t,"top","bottom")),c=o!==t.w,u=l!==t.h;return t.w=o,t.h=l,n.horizontal?{same:c,other:u}:{same:u,other:c}}function t2(t){const e=t.maxPadding;function n(r){const s=Math.max(e[r]-t[r],0);return t[r]+=s,s}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}function n2(t,e){const n=e.maxPadding;function r(s){const i={left:0,top:0,right:0,bottom:0};return s.forEach(a=>{i[a]=Math.max(e[a],n[a])}),i}return r(t?["left","right"]:["top","bottom"])}function ei(t,e,n,r){const s=[];let i,a,o,l,c,u;for(i=0,a=t.length,c=0;i<a;++i){o=t[i],l=o.box,l.update(o.width||e.w,o.height||e.h,n2(o.horizontal,e));const{same:h,other:f}=e2(e,n,o,r);c|=h&&s.length,u=u||f,l.fullSize||s.push(o)}return c&&ei(s,e,n,r)||u}function Da(t,e,n,r,s){t.top=n,t.left=e,t.right=e+r,t.bottom=n+s,t.width=r,t.height=s}function Np(t,e,n,r){const s=n.padding;let{x:i,y:a}=e;for(const o of t){const l=o.box,c=r[o.stack]||{placed:0,weight:1},u=o.stackWeight/c.weight||1;if(o.horizontal){const h=e.w*u,f=c.size||l.height;$o(c.start)&&(a=c.start),l.fullSize?Da(l,s.left,a,n.outerWidth-s.right-s.left,f):Da(l,e.left+c.placed,a,h,f),c.start=a,c.placed+=h,a=l.bottom}else{const h=e.h*u,f=c.size||l.width;$o(c.start)&&(i=c.start),l.fullSize?Da(l,i,s.top,f,n.outerHeight-s.bottom-s.top):Da(l,i,e.top+c.placed,f,h),c.start=i,c.placed+=h,i=l.right}}e.x=i,e.y=a}var On={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(n){e.draw(n)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;n!==-1&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,r){if(!t)return;const s=Dt(t.options.layout.padding),i=Math.max(e-s.width,0),a=Math.max(n-s.height,0),o=ZC(t.boxes),l=o.vertical,c=o.horizontal;X(t.boxes,v=>{typeof v.beforeLayout=="function"&&v.beforeLayout()});const u=l.reduce((v,_)=>_.box.options&&_.box.options.display===!1?v:v+1,0)||1,h=Object.freeze({outerWidth:e,outerHeight:n,padding:s,availableWidth:i,availableHeight:a,vBoxMaxWidth:i/2/u,hBoxMaxHeight:a/2}),f=Object.assign({},s);Hv(f,Dt(r));const m=Object.assign({maxPadding:f,w:i,h:a,x:s.left,y:s.top},s),p=JC(l.concat(c),h);ei(o.fullSize,m,h,p),ei(l,m,h,p),ei(c,m,h,p)&&ei(l,m,h,p),t2(m),Np(o.leftAndTop,m,h,p),m.x+=m.w,m.y+=m.h,Np(o.rightAndBottom,m,h,p),t.chartArea={left:m.left,top:m.top,right:m.left+m.w,bottom:m.top+m.h,height:m.h,width:m.w},X(o.chartArea,v=>{const _=v.box;Object.assign(_,t.chartArea),_.update(m.w,m.h,{left:0,top:0,right:0,bottom:0})})}};class Vv{acquireContext(e,n){}releaseContext(e){return!1}addEventListener(e,n,r){}removeEventListener(e,n,r){}getDevicePixelRatio(){return 1}getMaximumSize(e,n,r,s){return n=Math.max(0,n||e.width),r=r||e.height,{width:n,height:Math.max(0,s?Math.floor(n/s):r)}}isAttached(e){return!0}updateConfig(e){}}class r2 extends Vv{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const eo="$chartjs",s2={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},Op=t=>t===null||t==="";function i2(t,e){const n=t.style,r=t.getAttribute("height"),s=t.getAttribute("width");if(t[eo]={initial:{height:r,width:s,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",Op(s)){const i=_p(t,"width");i!==void 0&&(t.width=i)}if(Op(r))if(t.style.height==="")t.height=t.width/(e||2);else{const i=_p(t,"height");i!==void 0&&(t.height=i)}return t}const qv=SC?{passive:!0}:!1;function a2(t,e,n){t&&t.addEventListener(e,n,qv)}function o2(t,e,n){t&&t.canvas&&t.canvas.removeEventListener(e,n,qv)}function l2(t,e){const n=s2[t.type]||t.type,{x:r,y:s}=cr(t,e);return{type:n,chart:e,native:t,x:r!==void 0?r:null,y:s!==void 0?s:null}}function Vo(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function c2(t,e,n){const r=t.canvas,s=new MutationObserver(i=>{let a=!1;for(const o of i)a=a||Vo(o.addedNodes,r),a=a&&!Vo(o.removedNodes,r);a&&n()});return s.observe(document,{childList:!0,subtree:!0}),s}function u2(t,e,n){const r=t.canvas,s=new MutationObserver(i=>{let a=!1;for(const o of i)a=a||Vo(o.removedNodes,r),a=a&&!Vo(o.addedNodes,r);a&&n()});return s.observe(document,{childList:!0,subtree:!0}),s}const Xi=new Map;let Rp=0;function Kv(){const t=window.devicePixelRatio;t!==Rp&&(Rp=t,Xi.forEach((e,n)=>{n.currentDevicePixelRatio!==t&&e()}))}function d2(t,e){Xi.size||window.addEventListener("resize",Kv),Xi.set(t,e)}function h2(t){Xi.delete(t),Xi.size||window.removeEventListener("resize",Kv)}function f2(t,e,n){const r=t.canvas,s=r&&nh(r);if(!s)return;const i=Nv((o,l)=>{const c=s.clientWidth;n(o,l),c<s.clientWidth&&n()},window),a=new ResizeObserver(o=>{const l=o[0],c=l.contentRect.width,u=l.contentRect.height;c===0&&u===0||i(c,u)});return a.observe(s),d2(t,i),a}function vc(t,e,n){n&&n.disconnect(),e==="resize"&&h2(t)}function p2(t,e,n){const r=t.canvas,s=Nv(i=>{t.ctx!==null&&n(l2(i,t))},t);return a2(r,e,s),s}class m2 extends Vv{acquireContext(e,n){const r=e&&e.getContext&&e.getContext("2d");return r&&r.canvas===e?(i2(e,n),r):null}releaseContext(e){const n=e.canvas;if(!n[eo])return!1;const r=n[eo].initial;["height","width"].forEach(i=>{const a=r[i];Be(a)?n.removeAttribute(i):n.setAttribute(i,a)});const s=r.style||{};return Object.keys(s).forEach(i=>{n.style[i]=s[i]}),n.width=n.width,delete n[eo],!0}addEventListener(e,n,r){this.removeEventListener(e,n);const s=e.$proxies||(e.$proxies={}),a={attach:c2,detach:u2,resize:f2}[n]||p2;s[n]=a(e,n,r)}removeEventListener(e,n){const r=e.$proxies||(e.$proxies={}),s=r[n];if(!s)return;({attach:vc,detach:vc,resize:vc}[n]||o2)(e,n,s),r[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,n,r,s){return kC(e,n,r,s)}isAttached(e){const n=e&&nh(e);return!!(n&&n.isConnected)}}function g2(t){return!th()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?r2:m2}class Pr{constructor(){V(this,"x");V(this,"y");V(this,"active",!1);V(this,"options");V(this,"$animations")}tooltipPosition(e){const{x:n,y:r}=this.getProps(["x","y"],e);return{x:n,y:r}}hasValue(){return Fo(this.x)&&Fo(this.y)}getProps(e,n){const r=this.$animations;if(!n||!r)return this;const s={};return e.forEach(i=>{s[i]=r[i]&&r[i].active()?r[i]._to:this[i]}),s}}V(Pr,"defaults",{}),V(Pr,"defaultRoutes");function y2(t,e){const n=t.options.ticks,r=v2(t),s=Math.min(n.maxTicksLimit||r,r),i=n.major.enabled?_2(e):[],a=i.length,o=i[0],l=i[a-1],c=[];if(a>s)return x2(e,c,i,a/s),c;const u=w2(i,e,s);if(a>0){let h,f;const m=a>1?Math.round((l-o)/(a-1)):null;for(Ia(e,c,u,Be(m)?0:o-m,o),h=0,f=a-1;h<f;h++)Ia(e,c,u,i[h],i[h+1]);return Ia(e,c,u,l,Be(m)?e.length:l+m),c}return Ia(e,c,u),c}function v2(t){const e=t.options.offset,n=t._tickSize(),r=t._length/n+(e?0:1),s=t._maxLength/n;return Math.floor(Math.min(r,s))}function w2(t,e,n){const r=b2(t),s=e.length/n;if(!r)return Math.max(s,1);const i=Rj(r);for(let a=0,o=i.length-1;a<o;a++){const l=i[a];if(l>s)return l}return Math.max(s,1)}function _2(t){const e=[];let n,r;for(n=0,r=t.length;n<r;n++)t[n].major&&e.push(n);return e}function x2(t,e,n,r){let s=0,i=n[0],a;for(r=Math.ceil(r),a=0;a<t.length;a++)a===i&&(e.push(t[a]),s++,i=n[s*r])}function Ia(t,e,n,r,s){const i=J(r,0),a=Math.min(J(s,t.length),t.length);let o=0,l,c,u;for(n=Math.ceil(n),s&&(l=s-r,n=l/Math.floor(l/n)),u=i;u<0;)o++,u=Math.round(i+o*n);for(c=Math.max(i,0);c<a;c++)c===u&&(e.push(t[c]),o++,u=Math.round(i+o*n))}function b2(t){const e=t.length;let n,r;if(e<2)return!1;for(r=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==r)return!1;return r}const k2=t=>t==="left"?"right":t==="right"?"left":t,Ap=(t,e,n)=>e==="top"||e==="left"?t[e]+n:t[e]-n,Mp=(t,e)=>Math.min(e||t,t);function Dp(t,e){const n=[],r=t.length/e,s=t.length;let i=0;for(;i<s;i+=r)n.push(t[Math.floor(i)]);return n}function S2(t,e,n){const r=t.ticks.length,s=Math.min(e,r-1),i=t._startPixel,a=t._endPixel,o=1e-6;let l=t.getPixelForTick(s),c;if(!(n&&(r===1?c=Math.max(l-i,a-l):e===0?c=(t.getPixelForTick(1)-l)/2:c=(l-t.getPixelForTick(s-1))/2,l+=s<e?c:-c,l<i-o||l>a+o)))return l}function E2(t,e){X(t,n=>{const r=n.gc,s=r.length/2;let i;if(s>e){for(i=0;i<s;++i)delete n.data[r[i]];r.splice(0,s)}})}function Hs(t){return t.drawTicks?t.tickLength:0}function Ip(t,e){if(!t.display)return 0;const n=Ze(t.font,e),r=Dt(t.padding);return(Ie(t.text)?t.text.length:1)*n.lineHeight+r.height}function j2(t,e){return Os(t,{scale:e,type:"scale"})}function C2(t,e,n){return Os(t,{tick:n,index:e,type:"tick"})}function P2(t,e,n){let r=Ov(t);return(n&&e!=="right"||!n&&e==="right")&&(r=k2(r)),r}function T2(t,e,n,r){const{top:s,left:i,bottom:a,right:o,chart:l}=t,{chartArea:c,scales:u}=l;let h=0,f,m,p;const v=a-s,_=o-i;if(t.isHorizontal()){if(m=it(r,i,o),G(n)){const w=Object.keys(n)[0],y=n[w];p=u[w].getPixelForValue(y)+v-e}else n==="center"?p=(c.bottom+c.top)/2+v-e:p=Ap(t,n,e);f=o-i}else{if(G(n)){const w=Object.keys(n)[0],y=n[w];m=u[w].getPixelForValue(y)-_+e}else n==="center"?m=(c.left+c.right)/2-_+e:m=Ap(t,n,e);p=it(r,a,s),h=n==="left"?-Ce:Ce}return{titleX:m,titleY:p,maxWidth:f,rotation:h}}class kl extends Pr{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,n){return e}getUserBounds(){let{_userMin:e,_userMax:n,_suggestedMin:r,_suggestedMax:s}=this;return e=zt(e,Number.POSITIVE_INFINITY),n=zt(n,Number.NEGATIVE_INFINITY),r=zt(r,Number.POSITIVE_INFINITY),s=zt(s,Number.NEGATIVE_INFINITY),{min:zt(e,r),max:zt(n,s),minDefined:dn(e),maxDefined:dn(n)}}getMinMax(e){let{min:n,max:r,minDefined:s,maxDefined:i}=this.getUserBounds(),a;if(s&&i)return{min:n,max:r};const o=this.getMatchingVisibleMetas();for(let l=0,c=o.length;l<c;++l)a=o[l].controller.getMinMax(this,e),s||(n=Math.min(n,a.min)),i||(r=Math.max(r,a.max));return n=i&&n>r?r:n,r=s&&n>r?n:r,{min:zt(n,zt(r,n)),max:zt(r,zt(n,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){ae(this.options.beforeUpdate,[this])}update(e,n,r){const{beginAtZero:s,grace:i,ticks:a}=this.options,o=a.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=n,this._margins=r=Object.assign({left:0,right:0,top:0,bottom:0},r),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+r.left+r.right:this.height+r.top+r.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=lC(this,i,s),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=o<this.ticks.length;this._convertTicksToLabels(l?Dp(this.ticks,o):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),a.display&&(a.autoSkip||a.source==="auto")&&(this.ticks=y2(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,n,r;this.isHorizontal()?(n=this.left,r=this.right):(n=this.top,r=this.bottom,e=!e),this._startPixel=n,this._endPixel=r,this._reversePixels=e,this._length=r-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){ae(this.options.afterUpdate,[this])}beforeSetDimensions(){ae(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){ae(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),ae(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){ae(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const n=this.options.ticks;let r,s,i;for(r=0,s=e.length;r<s;r++)i=e[r],i.label=ae(n.callback,[i.value,r,e],this)}afterTickToLabelConversion(){ae(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){ae(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,n=e.ticks,r=Mp(this.ticks.length,e.ticks.maxTicksLimit),s=n.minRotation||0,i=n.maxRotation;let a=s,o,l,c;if(!this._isVisible()||!n.display||s>=i||r<=1||!this.isHorizontal()){this.labelRotation=s;return}const u=this._getLabelSizes(),h=u.widest.width,f=u.highest.height,m=vt(this.chart.width-h,0,this.maxWidth);o=e.offset?this.maxWidth/r:m/(r-1),h+6>o&&(o=m/(r-(e.offset?.5:1)),l=this.maxHeight-Hs(e.grid)-n.padding-Ip(e.title,this.chart.options.font),c=Math.sqrt(h*h+f*f),a=Mj(Math.min(Math.asin(vt((u.highest.height+6)/o,-1,1)),Math.asin(vt(l/c,-1,1))-Math.asin(vt(f/c,-1,1)))),a=Math.max(s,Math.min(i,a))),this.labelRotation=a}afterCalculateLabelRotation(){ae(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){ae(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:n,options:{ticks:r,title:s,grid:i}}=this,a=this._isVisible(),o=this.isHorizontal();if(a){const l=Ip(s,n.options.font);if(o?(e.width=this.maxWidth,e.height=Hs(i)+l):(e.height=this.maxHeight,e.width=Hs(i)+l),r.display&&this.ticks.length){const{first:c,last:u,widest:h,highest:f}=this._getLabelSizes(),m=r.padding*2,p=gr(this.labelRotation),v=Math.cos(p),_=Math.sin(p);if(o){const w=r.mirror?0:_*h.width+v*f.height;e.height=Math.min(this.maxHeight,e.height+w+m)}else{const w=r.mirror?0:v*h.width+_*f.height;e.width=Math.min(this.maxWidth,e.width+w+m)}this._calculatePadding(c,u,_,v)}}this._handleMargins(),o?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,n,r,s){const{ticks:{align:i,padding:a},position:o}=this.options,l=this.labelRotation!==0,c=o!=="top"&&this.axis==="x";if(this.isHorizontal()){const u=this.getPixelForTick(0)-this.left,h=this.right-this.getPixelForTick(this.ticks.length-1);let f=0,m=0;l?c?(f=s*e.width,m=r*n.height):(f=r*e.height,m=s*n.width):i==="start"?m=n.width:i==="end"?f=e.width:i!=="inner"&&(f=e.width/2,m=n.width/2),this.paddingLeft=Math.max((f-u+a)*this.width/(this.width-u),0),this.paddingRight=Math.max((m-h+a)*this.width/(this.width-h),0)}else{let u=n.height/2,h=e.height/2;i==="start"?(u=0,h=e.height):i==="end"&&(u=n.height,h=0),this.paddingTop=u+a,this.paddingBottom=h+a}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){ae(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:n}=this.options;return n==="top"||n==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let n,r;for(n=0,r=e.length;n<r;n++)Be(e[n].label)&&(e.splice(n,1),r--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const n=this.options.ticks.sampleSize;let r=this.ticks;n<r.length&&(r=Dp(r,n)),this._labelSizes=e=this._computeLabelSizes(r,r.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,n,r){const{ctx:s,_longestTextCache:i}=this,a=[],o=[],l=Math.floor(n/Mp(n,r));let c=0,u=0,h,f,m,p,v,_,w,y,g,x,k;for(h=0;h<n;h+=l){if(p=e[h].label,v=this._resolveTickFontOptions(h),s.font=_=v.string,w=i[_]=i[_]||{data:{},gc:[]},y=v.lineHeight,g=x=0,!Be(p)&&!Ie(p))g=pp(s,w.data,w.gc,g,p),x=y;else if(Ie(p))for(f=0,m=p.length;f<m;++f)k=p[f],!Be(k)&&!Ie(k)&&(g=pp(s,w.data,w.gc,g,k),x+=y);a.push(g),o.push(x),c=Math.max(g,c),u=Math.max(x,u)}E2(i,n);const b=a.indexOf(c),E=o.indexOf(u),j=N=>({width:a[N]||0,height:o[N]||0});return{first:j(0),last:j(n-1),widest:j(b),highest:j(E),widths:a,heights:o}}getLabelForValue(e){return e}getPixelForValue(e,n){return NaN}getValueForPixel(e){}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const n=this._startPixel+e*this._length;return Ij(this._alignToPixels?rr(this.chart,n,0):n)}getDecimalForPixel(e){const n=(e-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:n}=this;return e<0&&n<0?n:e>0&&n>0?e:0}getContext(e){const n=this.ticks||[];if(e>=0&&e<n.length){const r=n[e];return r.$context||(r.$context=C2(this.getContext(),e,r))}return this.$context||(this.$context=j2(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,n=gr(this.labelRotation),r=Math.abs(Math.cos(n)),s=Math.abs(Math.sin(n)),i=this._getLabelSizes(),a=e.autoSkipPadding||0,o=i?i.widest.width+a:0,l=i?i.highest.height+a:0;return this.isHorizontal()?l*r>o*s?o/r:l/s:l*s<o*r?l/r:o/s}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const n=this.axis,r=this.chart,s=this.options,{grid:i,position:a,border:o}=s,l=i.offset,c=this.isHorizontal(),h=this.ticks.length+(l?1:0),f=Hs(i),m=[],p=o.setContext(this.getContext()),v=p.display?p.width:0,_=v/2,w=function(B){return rr(r,B,v)};let y,g,x,k,b,E,j,N,T,L,F,K;if(a==="top")y=w(this.bottom),E=this.bottom-f,N=y-_,L=w(e.top)+_,K=e.bottom;else if(a==="bottom")y=w(this.top),L=e.top,K=w(e.bottom)-_,E=y+_,N=this.top+f;else if(a==="left")y=w(this.right),b=this.right-f,j=y-_,T=w(e.left)+_,F=e.right;else if(a==="right")y=w(this.left),T=e.left,F=w(e.right)-_,b=y+_,j=this.left+f;else if(n==="x"){if(a==="center")y=w((e.top+e.bottom)/2+.5);else if(G(a)){const B=Object.keys(a)[0],W=a[B];y=w(this.chart.scales[B].getPixelForValue(W))}L=e.top,K=e.bottom,E=y+_,N=E+f}else if(n==="y"){if(a==="center")y=w((e.left+e.right)/2);else if(G(a)){const B=Object.keys(a)[0],W=a[B];y=w(this.chart.scales[B].getPixelForValue(W))}b=y-_,j=b-f,T=e.left,F=e.right}const te=J(s.ticks.maxTicksLimit,h),A=Math.max(1,Math.ceil(h/te));for(g=0;g<h;g+=A){const B=this.getContext(g),W=i.setContext(B),C=o.setContext(B),O=W.lineWidth,P=W.color,D=C.dash||[],ee=C.dashOffset,Oe=W.tickWidth,Re=W.tickColor,rt=W.tickBorderDash||[],ke=W.tickBorderDashOffset;x=S2(this,g,l),x!==void 0&&(k=rr(r,x,O),c?b=j=T=F=k:E=N=L=K=k,m.push({tx1:b,ty1:E,tx2:j,ty2:N,x1:T,y1:L,x2:F,y2:K,width:O,color:P,borderDash:D,borderDashOffset:ee,tickWidth:Oe,tickColor:Re,tickBorderDash:rt,tickBorderDashOffset:ke}))}return this._ticksLength=h,this._borderValue=y,m}_computeLabelItems(e){const n=this.axis,r=this.options,{position:s,ticks:i}=r,a=this.isHorizontal(),o=this.ticks,{align:l,crossAlign:c,padding:u,mirror:h}=i,f=Hs(r.grid),m=f+u,p=h?-u:m,v=-gr(this.labelRotation),_=[];let w,y,g,x,k,b,E,j,N,T,L,F,K="middle";if(s==="top")b=this.bottom-p,E=this._getXAxisLabelAlignment();else if(s==="bottom")b=this.top+p,E=this._getXAxisLabelAlignment();else if(s==="left"){const A=this._getYAxisLabelAlignment(f);E=A.textAlign,k=A.x}else if(s==="right"){const A=this._getYAxisLabelAlignment(f);E=A.textAlign,k=A.x}else if(n==="x"){if(s==="center")b=(e.top+e.bottom)/2+m;else if(G(s)){const A=Object.keys(s)[0],B=s[A];b=this.chart.scales[A].getPixelForValue(B)+m}E=this._getXAxisLabelAlignment()}else if(n==="y"){if(s==="center")k=(e.left+e.right)/2-m;else if(G(s)){const A=Object.keys(s)[0],B=s[A];k=this.chart.scales[A].getPixelForValue(B)}E=this._getYAxisLabelAlignment(f).textAlign}n==="y"&&(l==="start"?K="top":l==="end"&&(K="bottom"));const te=this._getLabelSizes();for(w=0,y=o.length;w<y;++w){g=o[w],x=g.label;const A=i.setContext(this.getContext(w));j=this.getPixelForTick(w)+i.labelOffset,N=this._resolveTickFontOptions(w),T=N.lineHeight,L=Ie(x)?x.length:1;const B=L/2,W=A.color,C=A.textStrokeColor,O=A.textStrokeWidth;let P=E;a?(k=j,E==="inner"&&(w===y-1?P=this.options.reverse?"left":"right":w===0?P=this.options.reverse?"right":"left":P="center"),s==="top"?c==="near"||v!==0?F=-L*T+T/2:c==="center"?F=-te.highest.height/2-B*T+T:F=-te.highest.height+T/2:c==="near"||v!==0?F=T/2:c==="center"?F=te.highest.height/2-B*T:F=te.highest.height-L*T,h&&(F*=-1),v!==0&&!A.showLabelBackdrop&&(k+=T/2*Math.sin(v))):(b=j,F=(1-L)*T/2);let D;if(A.showLabelBackdrop){const ee=Dt(A.backdropPadding),Oe=te.heights[w],Re=te.widths[w];let rt=F-ee.top,ke=0-ee.left;switch(K){case"middle":rt-=Oe/2;break;case"bottom":rt-=Oe;break}switch(E){case"center":ke-=Re/2;break;case"right":ke-=Re;break;case"inner":w===y-1?ke-=Re:w>0&&(ke-=Re/2);break}D={left:ke,top:rt,width:Re+ee.width,height:Oe+ee.height,color:A.backdropColor}}_.push({label:x,font:N,textOffset:F,options:{rotation:v,color:W,strokeColor:C,strokeWidth:O,textAlign:P,textBaseline:K,translation:[k,b],backdrop:D}})}return _}_getXAxisLabelAlignment(){const{position:e,ticks:n}=this.options;if(-gr(this.labelRotation))return e==="top"?"left":"right";let s="center";return n.align==="start"?s="left":n.align==="end"?s="right":n.align==="inner"&&(s="inner"),s}_getYAxisLabelAlignment(e){const{position:n,ticks:{crossAlign:r,mirror:s,padding:i}}=this.options,a=this._getLabelSizes(),o=e+i,l=a.widest.width;let c,u;return n==="left"?s?(u=this.right+i,r==="near"?c="left":r==="center"?(c="center",u+=l/2):(c="right",u+=l)):(u=this.right-o,r==="near"?c="right":r==="center"?(c="center",u-=l/2):(c="left",u=this.left)):n==="right"?s?(u=this.left+i,r==="near"?c="right":r==="center"?(c="center",u-=l/2):(c="left",u-=l)):(u=this.left+o,r==="near"?c="left":r==="center"?(c="center",u+=l/2):(c="right",u=this.right)):c="right",{textAlign:c,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:n},left:r,top:s,width:i,height:a}=this;n&&(e.save(),e.fillStyle=n,e.fillRect(r,s,i,a),e.restore())}getLineWidthForValue(e){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const s=this.ticks.findIndex(i=>i.value===e);return s>=0?n.setContext(this.getContext(s)).lineWidth:0}drawGrid(e){const n=this.options.grid,r=this.ctx,s=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let i,a;const o=(l,c,u)=>{!u.width||!u.color||(r.save(),r.lineWidth=u.width,r.strokeStyle=u.color,r.setLineDash(u.borderDash||[]),r.lineDashOffset=u.borderDashOffset,r.beginPath(),r.moveTo(l.x,l.y),r.lineTo(c.x,c.y),r.stroke(),r.restore())};if(n.display)for(i=0,a=s.length;i<a;++i){const l=s[i];n.drawOnChartArea&&o({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),n.drawTicks&&o({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:n,options:{border:r,grid:s}}=this,i=r.setContext(this.getContext()),a=r.display?i.width:0;if(!a)return;const o=s.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let c,u,h,f;this.isHorizontal()?(c=rr(e,this.left,a)-a/2,u=rr(e,this.right,o)+o/2,h=f=l):(h=rr(e,this.top,a)-a/2,f=rr(e,this.bottom,o)+o/2,c=u=l),n.save(),n.lineWidth=i.width,n.strokeStyle=i.color,n.beginPath(),n.moveTo(c,h),n.lineTo(u,f),n.stroke(),n.restore()}drawLabels(e){if(!this.options.ticks.display)return;const r=this.ctx,s=this._computeLabelArea();s&&Gd(r,s);const i=this.getLabelItems(e);for(const a of i){const o=a.options,l=a.font,c=a.label,u=a.textOffset;Wo(r,c,0,u,l,o)}s&&Qd(r)}drawTitle(){const{ctx:e,options:{position:n,title:r,reverse:s}}=this;if(!r.display)return;const i=Ze(r.font),a=Dt(r.padding),o=r.align;let l=i.lineHeight/2;n==="bottom"||n==="center"||G(n)?(l+=a.bottom,Ie(r.text)&&(l+=i.lineHeight*(r.text.length-1))):l+=a.top;const{titleX:c,titleY:u,maxWidth:h,rotation:f}=T2(this,l,n,o);Wo(e,r.text,0,0,i,{color:r.color,maxWidth:h,rotation:f,textAlign:P2(o,n,s),textBaseline:"middle",translation:[c,u]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,n=e.ticks&&e.ticks.z||0,r=J(e.grid&&e.grid.z,-1),s=J(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==kl.prototype.draw?[{z:n,draw:i=>{this.draw(i)}}]:[{z:r,draw:i=>{this.drawBackground(),this.drawGrid(i),this.drawTitle()}},{z:s,draw:()=>{this.drawBorder()}},{z:n,draw:i=>{this.drawLabels(i)}}]}getMatchingVisibleMetas(e){const n=this.chart.getSortedVisibleDatasetMetas(),r=this.axis+"AxisID",s=[];let i,a;for(i=0,a=n.length;i<a;++i){const o=n[i];o[r]===this.id&&(!e||o.type===e)&&s.push(o)}return s}_resolveTickFontOptions(e){const n=this.options.ticks.setContext(this.getContext(e));return Ze(n.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class La{constructor(e,n,r){this.type=e,this.scope=n,this.override=r,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const n=Object.getPrototypeOf(e);let r;R2(n)&&(r=this.register(n));const s=this.items,i=e.id,a=this.scope+"."+i;if(!i)throw new Error("class does not have id: "+e);return i in s||(s[i]=e,N2(e,a,r),this.override&&we.override(e.id,e.overrides)),a}get(e){return this.items[e]}unregister(e){const n=this.items,r=e.id,s=this.scope;r in n&&delete n[r],s&&r in we[s]&&(delete we[s][r],this.override&&delete Cr[r])}}function N2(t,e,n){const r=Gi(Object.create(null),[n?we.get(n):{},we.get(e),t.defaults]);we.set(e,r),t.defaultRoutes&&O2(e,t.defaultRoutes),t.descriptors&&we.describe(e,t.descriptors)}function O2(t,e){Object.keys(e).forEach(n=>{const r=n.split("."),s=r.pop(),i=[t].concat(r).join("."),a=e[n].split("."),o=a.pop(),l=a.join(".");we.route(i,s,l,o)})}function R2(t){return"id"in t&&"defaults"in t}class A2{constructor(){this.controllers=new La(wi,"datasets",!0),this.elements=new La(Pr,"elements"),this.plugins=new La(Object,"plugins"),this.scales=new La(kl,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,n,r){[...n].forEach(s=>{const i=r||this._getRegistryForType(s);r||i.isForType(s)||i===this.plugins&&s.id?this._exec(e,i,s):X(s,a=>{const o=r||this._getRegistryForType(a);this._exec(e,o,a)})})}_exec(e,n,r){const s=Kd(e);ae(r["before"+s],[],r),n[e](r),ae(r["after"+s],[],r)}_getRegistryForType(e){for(let n=0;n<this._typedRegistries.length;n++){const r=this._typedRegistries[n];if(r.isForType(e))return r}return this.plugins}_get(e,n,r){const s=n.get(e);if(s===void 0)throw new Error('"'+e+'" is not a registered '+r+".");return s}}var Ft=new A2;class M2{constructor(){this._init=void 0}notify(e,n,r,s){if(n==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install")),this._init===void 0)return;const i=s?this._descriptors(e).filter(s):this._descriptors(e),a=this._notify(i,e,n,r);return n==="afterDestroy"&&(this._notify(i,e,"stop"),this._notify(this._init,e,"uninstall"),this._init=void 0),a}_notify(e,n,r,s){s=s||{};for(const i of e){const a=i.plugin,o=a[r],l=[n,s,i.options];if(ae(o,l,a)===!1&&s.cancelable)return!1}return!0}invalidate(){Be(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),n}_createDescriptors(e,n){const r=e&&e.config,s=J(r.options&&r.options.plugins,{}),i=D2(r);return s===!1&&!n?[]:L2(e,i,s,n)}_notifyStateChanges(e){const n=this._oldCache||[],r=this._cache,s=(i,a)=>i.filter(o=>!a.some(l=>o.plugin.id===l.plugin.id));this._notify(s(n,r),e,"stop"),this._notify(s(r,n),e,"start")}}function D2(t){const e={},n=[],r=Object.keys(Ft.plugins.items);for(let i=0;i<r.length;i++)n.push(Ft.getPlugin(r[i]));const s=t.plugins||[];for(let i=0;i<s.length;i++){const a=s[i];n.indexOf(a)===-1&&(n.push(a),e[a.id]=!0)}return{plugins:n,localIds:e}}function I2(t,e){return!e&&t===!1?null:t===!0?{}:t}function L2(t,{plugins:e,localIds:n},r,s){const i=[],a=t.getContext();for(const o of e){const l=o.id,c=I2(r[l],s);c!==null&&i.push({plugin:o,options:z2(t.config,{plugin:o,local:n[l]},c,a)})}return i}function z2(t,{plugin:e,local:n},r,s){const i=t.pluginScopeKeys(e),a=t.getOptionScopes(r,i);return n&&e.defaults&&a.push(e.defaults),t.createResolver(a,s,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Au(t,e){const n=we.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function $2(t,e){let n=t;return t==="_index_"?n=e:t==="_value_"&&(n=e==="x"?"y":"x"),n}function U2(t,e){return t===e?"_index_":"_value_"}function Lp(t){if(t==="x"||t==="y"||t==="r")return t}function F2(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function Mu(t,...e){if(Lp(t))return t;for(const n of e){const r=n.axis||F2(n.position)||t.length>1&&Lp(t[0].toLowerCase());if(r)return r}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function zp(t,e,n){if(n[e+"AxisID"]===t)return{axis:e}}function B2(t,e){if(e.data&&e.data.datasets){const n=e.data.datasets.filter(r=>r.xAxisID===t||r.yAxisID===t);if(n.length)return zp(t,"x",n[0])||zp(t,"y",n[0])}return{}}function W2(t,e){const n=Cr[t.type]||{scales:{}},r=e.scales||{},s=Au(t.type,e),i=Object.create(null);return Object.keys(r).forEach(a=>{const o=r[a];if(!G(o))return console.error(`Invalid scale configuration for scale: ${a}`);if(o._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${a}`);const l=Mu(a,o,B2(a,t),we.scales[o.type]),c=U2(l,s),u=n.scales||{};i[a]=mi(Object.create(null),[{axis:l},o,u[l],u[c]])}),t.data.datasets.forEach(a=>{const o=a.type||t.type,l=a.indexAxis||Au(o,e),u=(Cr[o]||{}).scales||{};Object.keys(u).forEach(h=>{const f=$2(h,l),m=a[f+"AxisID"]||f;i[m]=i[m]||Object.create(null),mi(i[m],[{axis:f},r[m],u[h]])})}),Object.keys(i).forEach(a=>{const o=i[a];mi(o,[we.scales[o.type],we.scale])}),i}function Yv(t){const e=t.options||(t.options={});e.plugins=J(e.plugins,{}),e.scales=W2(t,e)}function Gv(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function H2(t){return t=t||{},t.data=Gv(t.data),Yv(t),t}const $p=new Map,Qv=new Set;function za(t,e){let n=$p.get(t);return n||(n=e(),$p.set(t,n),Qv.add(n)),n}const Vs=(t,e,n)=>{const r=Qi(e,n);r!==void 0&&t.add(r)};class V2{constructor(e){this._config=H2(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=Gv(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),Yv(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return za(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,n){return za(`${e}.transition.${n}`,()=>[[`datasets.${e}.transitions.${n}`,`transitions.${n}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,n){return za(`${e}-${n}`,()=>[[`datasets.${e}.elements.${n}`,`datasets.${e}`,`elements.${n}`,""]])}pluginScopeKeys(e){const n=e.id,r=this.type;return za(`${r}-plugin-${n}`,()=>[[`plugins.${n}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,n){const r=this._scopeCache;let s=r.get(e);return(!s||n)&&(s=new Map,r.set(e,s)),s}getOptionScopes(e,n,r){const{options:s,type:i}=this,a=this._cachedScopes(e,r),o=a.get(n);if(o)return o;const l=new Set;n.forEach(u=>{e&&(l.add(e),u.forEach(h=>Vs(l,e,h))),u.forEach(h=>Vs(l,s,h)),u.forEach(h=>Vs(l,Cr[i]||{},h)),u.forEach(h=>Vs(l,we,h)),u.forEach(h=>Vs(l,Ou,h))});const c=Array.from(l);return c.length===0&&c.push(Object.create(null)),Qv.has(n)&&a.set(n,c),c}chartOptionScopes(){const{options:e,type:n}=this;return[e,Cr[n]||{},we.datasets[n]||{},{type:n},we,Ou]}resolveNamedOptions(e,n,r,s=[""]){const i={$shared:!0},{resolver:a,subPrefixes:o}=Up(this._resolverCache,e,s);let l=a;if(K2(a,n)){i.$shared=!1,r=Yn(r)?r():r;const c=this.createResolver(e,r,o);l=Es(a,r,c)}for(const c of n)i[c]=l[c];return i}createResolver(e,n,r=[""],s){const{resolver:i}=Up(this._resolverCache,e,r);return G(n)?Es(i,n,void 0,s):i}}function Up(t,e,n){let r=t.get(e);r||(r=new Map,t.set(e,r));const s=n.join();let i=r.get(s);return i||(i={resolver:Jd(e,n),subPrefixes:n.filter(o=>!o.toLowerCase().includes("hover"))},r.set(s,i)),i}const q2=t=>G(t)&&Object.getOwnPropertyNames(t).some(e=>Yn(t[e]));function K2(t,e){const{isScriptable:n,isIndexable:r}=Dv(t);for(const s of e){const i=n(s),a=r(s),o=(a||i)&&t[s];if(i&&(Yn(o)||q2(o))||a&&Ie(o))return!0}return!1}var Y2="4.5.1";const G2=["top","bottom","left","right","chartArea"];function Fp(t,e){return t==="top"||t==="bottom"||G2.indexOf(t)===-1&&e==="x"}function Bp(t,e){return function(n,r){return n[t]===r[t]?n[e]-r[e]:n[t]-r[t]}}function Wp(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),ae(n&&n.onComplete,[t],e)}function Q2(t){const e=t.chart,n=e.options.animation;ae(n&&n.onProgress,[t],e)}function Xv(t){return th()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const to={},Hp=t=>{const e=Xv(t);return Object.values(to).filter(n=>n.canvas===e).pop()};function X2(t,e,n){const r=Object.keys(t);for(const s of r){const i=+s;if(i>=e){const a=t[s];delete t[s],(n>0||i>e)&&(t[i+n]=a)}}}function J2(t,e,n,r){return!n||t.type==="mouseout"?null:r?e:t}var wn;let Sl=(wn=class{static register(...e){Ft.add(...e),Vp()}static unregister(...e){Ft.remove(...e),Vp()}constructor(e,n){const r=this.config=new V2(n),s=Xv(e),i=Hp(s);if(i)throw new Error("Canvas is already in use. Chart with ID '"+i.id+"' must be destroyed before the canvas with ID '"+i.canvas.id+"' can be reused.");const a=r.createResolver(r.chartOptionScopes(),this.getContext());this.platform=new(r.platform||g2(s)),this.platform.updateConfig(r);const o=this.platform.acquireContext(s,a.aspectRatio),l=o&&o.canvas,c=l&&l.height,u=l&&l.width;if(this.id=Sj(),this.ctx=o,this.canvas=l,this.width=u,this.height=c,this._options=a,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new M2,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=Fj(h=>this.update(h),a.resizeDelay||0),this._dataChanges=[],to[this.id]=this,!o||!l){console.error("Failed to create chart: can't acquire context from the given item");return}Qt.listen(this,"complete",Wp),Qt.listen(this,"progress",Q2),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:n},width:r,height:s,_aspectRatio:i}=this;return Be(e)?n&&i?i:s?r/s:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return Ft}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():wp(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return mp(this.canvas,this.ctx),this}stop(){return Qt.stop(this),this}resize(e,n){Qt.running(this)?this._resizeBeforeDraw={width:e,height:n}:this._resize(e,n)}_resize(e,n){const r=this.options,s=this.canvas,i=r.maintainAspectRatio&&this.aspectRatio,a=this.platform.getMaximumSize(s,e,n,i),o=r.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=a.width,this.height=a.height,this._aspectRatio=this.aspectRatio,wp(this,o,!0)&&(this.notifyPlugins("resize",{size:a}),ae(r.onResize,[this,a],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};X(n,(r,s)=>{r.id=s})}buildOrUpdateScales(){const e=this.options,n=e.scales,r=this.scales,s=Object.keys(r).reduce((a,o)=>(a[o]=!1,a),{});let i=[];n&&(i=i.concat(Object.keys(n).map(a=>{const o=n[a],l=Mu(a,o),c=l==="r",u=l==="x";return{options:o,dposition:c?"chartArea":u?"bottom":"left",dtype:c?"radialLinear":u?"category":"linear"}}))),X(i,a=>{const o=a.options,l=o.id,c=Mu(l,o),u=J(o.type,a.dtype);(o.position===void 0||Fp(o.position,c)!==Fp(a.dposition))&&(o.position=a.dposition),s[l]=!0;let h=null;if(l in r&&r[l].type===u)h=r[l];else{const f=Ft.getScale(u);h=new f({id:l,type:u,ctx:this.ctx,chart:this}),r[h.id]=h}h.init(o,e)}),X(s,(a,o)=>{a||delete r[o]}),X(r,a=>{On.configure(this,a,a.options),On.addBox(this,a)})}_updateMetasets(){const e=this._metasets,n=this.data.datasets.length,r=e.length;if(e.sort((s,i)=>s.index-i.index),r>n){for(let s=n;s<r;++s)this._destroyDatasetMeta(s);e.splice(n,r-n)}this._sortedMetasets=e.slice(0).sort(Bp("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:n}}=this;e.length>n.length&&delete this._stacks,e.forEach((r,s)=>{n.filter(i=>i===r._dataset).length===0&&this._destroyDatasetMeta(s)})}buildOrUpdateControllers(){const e=[],n=this.data.datasets;let r,s;for(this._removeUnreferencedMetasets(),r=0,s=n.length;r<s;r++){const i=n[r];let a=this.getDatasetMeta(r);const o=i.type||this.config.type;if(a.type&&a.type!==o&&(this._destroyDatasetMeta(r),a=this.getDatasetMeta(r)),a.type=o,a.indexAxis=i.indexAxis||Au(o,this.options),a.order=i.order||0,a.index=r,a.label=""+i.label,a.visible=this.isDatasetVisible(r),a.controller)a.controller.updateIndex(r),a.controller.linkScales();else{const l=Ft.getController(o),{datasetElementType:c,dataElementType:u}=we.datasets[o];Object.assign(l,{dataElementType:Ft.getElement(u),datasetElementType:c&&Ft.getElement(c)}),a.controller=new l(this,r),e.push(a.controller)}}return this._updateMetasets(),e}_resetElements(){X(this.data.datasets,(e,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const n=this.config;n.update();const r=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),s=this._animationsDisabled=!r.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const i=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let a=0;for(let c=0,u=this.data.datasets.length;c<u;c++){const{controller:h}=this.getDatasetMeta(c),f=!s&&i.indexOf(h)===-1;h.buildOrUpdateElements(f),a=Math.max(+h.getMaxOverflow(),a)}a=this._minPadding=r.layout.autoPadding?a:0,this._updateLayout(a),s||X(i,c=>{c.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(Bp("z","_idx"));const{_active:o,_lastEvent:l}=this;l?this._eventHandler(l,!0):o.length&&this._updateHoverStyles(o,o,!0),this.render()}_updateScales(){X(this.scales,e=>{On.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,n=new Set(Object.keys(this._listeners)),r=new Set(e.events);(!ap(n,r)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,n=this._getUniformDataChanges()||[];for(const{method:r,start:s,count:i}of n){const a=r==="_removeElements"?-i:i;X2(e,s,a)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const n=this.data.datasets.length,r=i=>new Set(e.filter(a=>a[0]===i).map((a,o)=>o+","+a.splice(1).join(","))),s=r(0);for(let i=1;i<n;i++)if(!ap(s,r(i)))return;return Array.from(s).map(i=>i.split(",")).map(i=>({method:i[1],start:+i[2],count:+i[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;On.update(this,this.width,this.height,e);const n=this.chartArea,r=n.width<=0||n.height<=0;this._layers=[],X(this.boxes,s=>{r&&s.position==="chartArea"||(s.configure&&s.configure(),this._layers.push(...s._layers()))},this),this._layers.forEach((s,i)=>{s._idx=i}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let n=0,r=this.data.datasets.length;n<r;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,r=this.data.datasets.length;n<r;++n)this._updateDataset(n,Yn(e)?e({datasetIndex:n}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,n){const r=this.getDatasetMeta(e),s={meta:r,index:e,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",s)!==!1&&(r.controller._update(n),s.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",s))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Qt.has(this)?this.attached&&!Qt.running(this)&&Qt.start(this):(this.draw(),Wp({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:r,height:s}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(r,s)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(e=0;e<n.length&&n[e].z<=0;++e)n[e].draw(this.chartArea);for(this._drawDatasets();e<n.length;++e)n[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const n=this._sortedMetasets,r=[];let s,i;for(s=0,i=n.length;s<i;++s){const a=n[s];(!e||a.visible)&&r.push(a)}return r}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let n=e.length-1;n>=0;--n)this._drawDataset(e[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const n=this.ctx,r={meta:e,index:e.index,cancelable:!0},s=PC(this,e);this.notifyPlugins("beforeDatasetDraw",r)!==!1&&(s&&Gd(n,s),e.controller.draw(),s&&Qd(n),r.cancelable=!1,this.notifyPlugins("afterDatasetDraw",r))}isPointInArea(e){return Mv(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,n,r,s){const i=GC.modes[n];return typeof i=="function"?i(this,e,r,s):[]}getDatasetMeta(e){const n=this.data.datasets[e],r=this._metasets;let s=r.filter(i=>i&&i._dataset===n).pop();return s||(s={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:e,_dataset:n,_parsed:[],_sorted:!1},r.push(s)),s}getContext(){return this.$context||(this.$context=Os(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const n=this.data.datasets[e];if(!n)return!1;const r=this.getDatasetMeta(e);return typeof r.hidden=="boolean"?!r.hidden:!n.hidden}setDatasetVisibility(e,n){const r=this.getDatasetMeta(e);r.hidden=!n}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,n,r){const s=r?"show":"hide",i=this.getDatasetMeta(e),a=i.controller._resolveAnimations(void 0,s);$o(n)?(i.data[n].hidden=!r,this.update()):(this.setDatasetVisibility(e,r),a.update(i,{visible:r}),this.update(o=>o.datasetIndex===e?s:void 0))}hide(e,n){this._updateVisibility(e,n,!1)}show(e,n){this._updateVisibility(e,n,!0)}_destroyDatasetMeta(e){const n=this._metasets[e];n&&n.controller&&n.controller._destroy(),delete this._metasets[e]}_stop(){let e,n;for(this.stop(),Qt.remove(this),e=0,n=this.data.datasets.length;e<n;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:n}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),mp(e,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete to[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,n=this.platform,r=(i,a)=>{n.addEventListener(this,i,a),e[i]=a},s=(i,a,o)=>{i.offsetX=a,i.offsetY=o,this._eventHandler(i)};X(this.options.events,i=>r(i,s))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,n=this.platform,r=(l,c)=>{n.addEventListener(this,l,c),e[l]=c},s=(l,c)=>{e[l]&&(n.removeEventListener(this,l,c),delete e[l])},i=(l,c)=>{this.canvas&&this.resize(l,c)};let a;const o=()=>{s("attach",o),this.attached=!0,this.resize(),r("resize",i),r("detach",a)};a=()=>{this.attached=!1,s("resize",i),this._stop(),this._resize(0,0),r("attach",o)},n.isAttached(this.canvas)?o():a()}unbindEvents(){X(this._listeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._listeners={},X(this._responsiveListeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,n,r){const s=r?"set":"remove";let i,a,o,l;for(n==="dataset"&&(i=this.getDatasetMeta(e[0].datasetIndex),i.controller["_"+s+"DatasetHoverStyle"]()),o=0,l=e.length;o<l;++o){a=e[o];const c=a&&this.getDatasetMeta(a.datasetIndex).controller;c&&c[s+"HoverStyle"](a.element,a.datasetIndex,a.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const n=this._active||[],r=e.map(({datasetIndex:i,index:a})=>{const o=this.getDatasetMeta(i);if(!o)throw new Error("No dataset found at index "+i);return{datasetIndex:i,element:o.data[a],index:a}});!Lo(r,n)&&(this._active=r,this._lastEvent=null,this._updateHoverStyles(r,n))}notifyPlugins(e,n,r){return this._plugins.notify(this,e,n,r)}isPluginEnabled(e){return this._plugins._cache.filter(n=>n.plugin.id===e).length===1}_updateHoverStyles(e,n,r){const s=this.options.hover,i=(l,c)=>l.filter(u=>!c.some(h=>u.datasetIndex===h.datasetIndex&&u.index===h.index)),a=i(n,e),o=r?e:i(e,n);a.length&&this.updateHoverStyle(a,s.mode,!1),o.length&&s.mode&&this.updateHoverStyle(o,s.mode,!0)}_eventHandler(e,n){const r={event:e,replay:n,cancelable:!0,inChartArea:this.isPointInArea(e)},s=a=>(a.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",r,s)===!1)return;const i=this._handleEvent(e,n,r.inChartArea);return r.cancelable=!1,this.notifyPlugins("afterEvent",r,s),(i||r.changed)&&this.render(),this}_handleEvent(e,n,r){const{_active:s=[],options:i}=this,a=n,o=this._getActiveElements(e,s,r,a),l=Nj(e),c=J2(e,this._lastEvent,r,l);r&&(this._lastEvent=null,ae(i.onHover,[e,o,this],this),l&&ae(i.onClick,[e,o,this],this));const u=!Lo(o,s);return(u||n)&&(this._active=o,this._updateHoverStyles(o,s,n)),this._lastEvent=c,u}_getActiveElements(e,n,r,s){if(e.type==="mouseout")return[];if(!r)return n;const i=this.options.hover;return this.getElementsAtEventForMode(e,i.mode,i,s)}},V(wn,"defaults",we),V(wn,"instances",to),V(wn,"overrides",Cr),V(wn,"registry",Ft),V(wn,"version",Y2),V(wn,"getChart",Hp),wn);function Vp(){return X(Sl.instances,t=>t._plugins.invalidate())}function Z2(t,e,n){const{startAngle:r,x:s,y:i,outerRadius:a,innerRadius:o,options:l}=e,{borderWidth:c,borderJoinStyle:u}=l,h=Math.min(c/a,Bt(r-n));if(t.beginPath(),t.arc(s,i,a-c/2,r+h/2,n-h/2),o>0){const f=Math.min(c/o,Bt(r-n));t.arc(s,i,o+c/2,n-f/2,r+f/2,!0)}else{const f=Math.min(c/2,a*Bt(r-n));if(u==="round")t.arc(s,i,f,n-le/2,r+le/2,!0);else if(u==="bevel"){const m=2*f*f,p=-m*Math.cos(n+le/2)+s,v=-m*Math.sin(n+le/2)+i,_=m*Math.cos(r+le/2)+s,w=m*Math.sin(r+le/2)+i;t.lineTo(p,v),t.lineTo(_,w)}}t.closePath(),t.moveTo(0,0),t.rect(0,0,t.canvas.width,t.canvas.height),t.clip("evenodd")}function eP(t,e,n){const{startAngle:r,pixelMargin:s,x:i,y:a,outerRadius:o,innerRadius:l}=e;let c=s/o;t.beginPath(),t.arc(i,a,o,r-c,n+c),l>s?(c=s/l,t.arc(i,a,l,n+c,r-c,!0)):t.arc(i,a,s,n+Ce,r-Ce),t.closePath(),t.clip()}function tP(t){return Xd(t,["outerStart","outerEnd","innerStart","innerEnd"])}function nP(t,e,n,r){const s=tP(t.options.borderRadius),i=(n-e)/2,a=Math.min(i,r*e/2),o=l=>{const c=(n-Math.min(i,l))*r/2;return vt(l,0,Math.min(i,c))};return{outerStart:o(s.outerStart),outerEnd:o(s.outerEnd),innerStart:vt(s.innerStart,0,a),innerEnd:vt(s.innerEnd,0,a)}}function Br(t,e,n,r){return{x:n+t*Math.cos(e),y:r+t*Math.sin(e)}}function qo(t,e,n,r,s,i){const{x:a,y:o,startAngle:l,pixelMargin:c,innerRadius:u}=e,h=Math.max(e.outerRadius+r+n-c,0),f=u>0?u+r+n+c:0;let m=0;const p=s-l;if(r){const A=u>0?u-r:0,B=h>0?h-r:0,W=(A+B)/2,C=W!==0?p*W/(W+r):p;m=(p-C)/2}const v=Math.max(.001,p*h-n/le)/h,_=(p-v)/2,w=l+_+m,y=s-_-m,{outerStart:g,outerEnd:x,innerStart:k,innerEnd:b}=nP(e,f,h,y-w),E=h-g,j=h-x,N=w+g/E,T=y-x/j,L=f+k,F=f+b,K=w+k/L,te=y-b/F;if(t.beginPath(),i){const A=(N+T)/2;if(t.arc(a,o,h,N,A),t.arc(a,o,h,A,T),x>0){const O=Br(j,T,a,o);t.arc(O.x,O.y,x,T,y+Ce)}const B=Br(F,y,a,o);if(t.lineTo(B.x,B.y),b>0){const O=Br(F,te,a,o);t.arc(O.x,O.y,b,y+Ce,te+Math.PI)}const W=(y-b/f+(w+k/f))/2;if(t.arc(a,o,f,y-b/f,W,!0),t.arc(a,o,f,W,w+k/f,!0),k>0){const O=Br(L,K,a,o);t.arc(O.x,O.y,k,K+Math.PI,w-Ce)}const C=Br(E,w,a,o);if(t.lineTo(C.x,C.y),g>0){const O=Br(E,N,a,o);t.arc(O.x,O.y,g,w-Ce,N)}}else{t.moveTo(a,o);const A=Math.cos(N)*h+a,B=Math.sin(N)*h+o;t.lineTo(A,B);const W=Math.cos(T)*h+a,C=Math.sin(T)*h+o;t.lineTo(W,C)}t.closePath()}function rP(t,e,n,r,s){const{fullCircles:i,startAngle:a,circumference:o}=e;let l=e.endAngle;if(i){qo(t,e,n,r,l,s);for(let c=0;c<i;++c)t.fill();isNaN(o)||(l=a+(o%be||be))}return qo(t,e,n,r,l,s),t.fill(),l}function sP(t,e,n,r,s){const{fullCircles:i,startAngle:a,circumference:o,options:l}=e,{borderWidth:c,borderJoinStyle:u,borderDash:h,borderDashOffset:f,borderRadius:m}=l,p=l.borderAlign==="inner";if(!c)return;t.setLineDash(h||[]),t.lineDashOffset=f,p?(t.lineWidth=c*2,t.lineJoin=u||"round"):(t.lineWidth=c,t.lineJoin=u||"bevel");let v=e.endAngle;if(i){qo(t,e,n,r,v,s);for(let _=0;_<i;++_)t.stroke();isNaN(o)||(v=a+(o%be||be))}p&&eP(t,e,v),l.selfJoin&&v-a>=le&&m===0&&u!=="miter"&&Z2(t,e,v),i||(qo(t,e,n,r,v,s),t.stroke())}class ti extends Pr{constructor(n){super();V(this,"circumference");V(this,"endAngle");V(this,"fullCircles");V(this,"innerRadius");V(this,"outerRadius");V(this,"pixelMargin");V(this,"startAngle");this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,n&&Object.assign(this,n)}inRange(n,r,s){const i=this.getProps(["x","y"],s),{angle:a,distance:o}=Cv(i,{x:n,y:r}),{startAngle:l,endAngle:c,innerRadius:u,outerRadius:h,circumference:f}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],s),m=(this.options.spacing+this.options.borderWidth)/2,p=J(f,c-l),v=Bo(a,l,c)&&l!==c,_=p>=be||v,w=Js(o,u+m,h+m);return _&&w}getCenterPoint(n){const{x:r,y:s,startAngle:i,endAngle:a,innerRadius:o,outerRadius:l}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],n),{offset:c,spacing:u}=this.options,h=(i+a)/2,f=(o+l+u+c)/2;return{x:r+Math.cos(h)*f,y:s+Math.sin(h)*f}}tooltipPosition(n){return this.getCenterPoint(n)}draw(n){const{options:r,circumference:s}=this,i=(r.offset||0)/4,a=(r.spacing||0)/2,o=r.circular;if(this.pixelMargin=r.borderAlign==="inner"?.33:0,this.fullCircles=s>be?Math.floor(s/be):0,s===0||this.innerRadius<0||this.outerRadius<0)return;n.save();const l=(this.startAngle+this.endAngle)/2;n.translate(Math.cos(l)*i,Math.sin(l)*i);const c=1-Math.sin(Math.min(le,s||0)),u=i*c;n.fillStyle=r.backgroundColor,n.strokeStyle=r.borderColor,rP(n,this,u,a,o),sP(n,this,u,a,o),n.restore()}}V(ti,"id","arc"),V(ti,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1}),V(ti,"defaultRoutes",{backgroundColor:"backgroundColor"}),V(ti,"descriptors",{_scriptable:!0,_indexable:n=>n!=="borderDash"});const qp=(t,e)=>{let{boxHeight:n=e,boxWidth:r=e}=t;return t.usePointStyle&&(n=Math.min(n,e),r=t.pointStyleWidth||Math.min(r,e)),{boxWidth:r,boxHeight:n,itemHeight:Math.max(e,n)}},iP=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class Kp extends Pr{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n,r){this.maxWidth=e,this.maxHeight=n,this._margins=r,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let n=ae(e.generateLabels,[this.chart],this)||[];e.filter&&(n=n.filter(r=>e.filter(r,this.chart.data))),e.sort&&(n=n.sort((r,s)=>e.sort(r,s,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:e,ctx:n}=this;if(!e.display){this.width=this.height=0;return}const r=e.labels,s=Ze(r.font),i=s.size,a=this._computeTitleHeight(),{boxWidth:o,itemHeight:l}=qp(r,i);let c,u;n.font=s.string,this.isHorizontal()?(c=this.maxWidth,u=this._fitRows(a,i,o,l)+10):(u=this.maxHeight,c=this._fitCols(a,s,o,l)+10),this.width=Math.min(c,e.maxWidth||this.maxWidth),this.height=Math.min(u,e.maxHeight||this.maxHeight)}_fitRows(e,n,r,s){const{ctx:i,maxWidth:a,options:{labels:{padding:o}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],u=s+o;let h=e;i.textAlign="left",i.textBaseline="middle";let f=-1,m=-u;return this.legendItems.forEach((p,v)=>{const _=r+n/2+i.measureText(p.text).width;(v===0||c[c.length-1]+_+2*o>a)&&(h+=u,c[c.length-(v>0?0:1)]=0,m+=u,f++),l[v]={left:0,top:m,row:f,width:_,height:s},c[c.length-1]+=_+o}),h}_fitCols(e,n,r,s){const{ctx:i,maxHeight:a,options:{labels:{padding:o}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],u=a-e;let h=o,f=0,m=0,p=0,v=0;return this.legendItems.forEach((_,w)=>{const{itemWidth:y,itemHeight:g}=aP(r,n,i,_,s);w>0&&m+g+2*o>u&&(h+=f+o,c.push({width:f,height:m}),p+=f+o,v++,f=m=0),l[w]={left:p,top:m,col:v,width:y,height:g},f=Math.max(f,y),m+=g+o}),h+=f,c.push({width:f,height:m}),h}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:r,labels:{padding:s},rtl:i}}=this,a=ps(i,this.left,this.width);if(this.isHorizontal()){let o=0,l=it(r,this.left+s,this.right-this.lineWidths[o]);for(const c of n)o!==c.row&&(o=c.row,l=it(r,this.left+s,this.right-this.lineWidths[o])),c.top+=this.top+e+s,c.left=a.leftForLtr(a.x(l),c.width),l+=c.width+s}else{let o=0,l=it(r,this.top+e+s,this.bottom-this.columnSizes[o].height);for(const c of n)c.col!==o&&(o=c.col,l=it(r,this.top+e+s,this.bottom-this.columnSizes[o].height)),c.top=l,c.left+=this.left+s,c.left=a.leftForLtr(a.x(c.left),c.width),l+=c.height+s}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;Gd(e,this),this._draw(),Qd(e)}}_draw(){const{options:e,columnSizes:n,lineWidths:r,ctx:s}=this,{align:i,labels:a}=e,o=we.color,l=ps(e.rtl,this.left,this.width),c=Ze(a.font),{padding:u}=a,h=c.size,f=h/2;let m;this.drawTitle(),s.textAlign=l.textAlign("left"),s.textBaseline="middle",s.lineWidth=.5,s.font=c.string;const{boxWidth:p,boxHeight:v,itemHeight:_}=qp(a,h),w=function(b,E,j){if(isNaN(p)||p<=0||isNaN(v)||v<0)return;s.save();const N=J(j.lineWidth,1);if(s.fillStyle=J(j.fillStyle,o),s.lineCap=J(j.lineCap,"butt"),s.lineDashOffset=J(j.lineDashOffset,0),s.lineJoin=J(j.lineJoin,"miter"),s.lineWidth=N,s.strokeStyle=J(j.strokeStyle,o),s.setLineDash(J(j.lineDash,[])),a.usePointStyle){const T={radius:v*Math.SQRT2/2,pointStyle:j.pointStyle,rotation:j.rotation,borderWidth:N},L=l.xPlus(b,p/2),F=E+f;Av(s,T,L,F,a.pointStyleWidth&&p)}else{const T=E+Math.max((h-v)/2,0),L=l.leftForLtr(b,p),F=vi(j.borderRadius);s.beginPath(),Object.values(F).some(K=>K!==0)?Ru(s,{x:L,y:T,w:p,h:v,radius:F}):s.rect(L,T,p,v),s.fill(),N!==0&&s.stroke()}s.restore()},y=function(b,E,j){Wo(s,j.text,b,E+_/2,c,{strikethrough:j.hidden,textAlign:l.textAlign(j.textAlign)})},g=this.isHorizontal(),x=this._computeTitleHeight();g?m={x:it(i,this.left+u,this.right-r[0]),y:this.top+u+x,line:0}:m={x:this.left+u,y:it(i,this.top+x+u,this.bottom-n[0].height),line:0},$v(this.ctx,e.textDirection);const k=_+u;this.legendItems.forEach((b,E)=>{s.strokeStyle=b.fontColor,s.fillStyle=b.fontColor;const j=s.measureText(b.text).width,N=l.textAlign(b.textAlign||(b.textAlign=a.textAlign)),T=p+f+j;let L=m.x,F=m.y;l.setWidth(this.width),g?E>0&&L+T+u>this.right&&(F=m.y+=k,m.line++,L=m.x=it(i,this.left+u,this.right-r[m.line])):E>0&&F+k>this.bottom&&(L=m.x=L+n[m.line].width+u,m.line++,F=m.y=it(i,this.top+x+u,this.bottom-n[m.line].height));const K=l.x(L);if(w(K,F,b),L=Bj(N,L+p+f,g?L+T:this.right,e.rtl),y(l.x(L),F,b),g)m.x+=T+u;else if(typeof b.text!="string"){const te=c.lineHeight;m.y+=Jv(b,te)+u}else m.y+=k}),Uv(this.ctx,e.textDirection)}drawTitle(){const e=this.options,n=e.title,r=Ze(n.font),s=Dt(n.padding);if(!n.display)return;const i=ps(e.rtl,this.left,this.width),a=this.ctx,o=n.position,l=r.size/2,c=s.top+l;let u,h=this.left,f=this.width;if(this.isHorizontal())f=Math.max(...this.lineWidths),u=this.top+c,h=it(e.align,h,this.right-f);else{const p=this.columnSizes.reduce((v,_)=>Math.max(v,_.height),0);u=c+it(e.align,this.top,this.bottom-p-e.labels.padding-this._computeTitleHeight())}const m=it(o,h,h+f);a.textAlign=i.textAlign(Ov(o)),a.textBaseline="middle",a.strokeStyle=n.color,a.fillStyle=n.color,a.font=r.string,Wo(a,n.text,m,u,r)}_computeTitleHeight(){const e=this.options.title,n=Ze(e.font),r=Dt(e.padding);return e.display?n.lineHeight+r.height:0}_getLegendItemAt(e,n){let r,s,i;if(Js(e,this.left,this.right)&&Js(n,this.top,this.bottom)){for(i=this.legendHitBoxes,r=0;r<i.length;++r)if(s=i[r],Js(e,s.left,s.left+s.width)&&Js(n,s.top,s.top+s.height))return this.legendItems[r]}return null}handleEvent(e){const n=this.options;if(!cP(e.type,n))return;const r=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const s=this._hoveredItem,i=iP(s,r);s&&!i&&ae(n.onLeave,[e,s,this],this),this._hoveredItem=r,r&&!i&&ae(n.onHover,[e,r,this],this)}else r&&ae(n.onClick,[e,r,this],this)}}function aP(t,e,n,r,s){const i=oP(r,t,e,n),a=lP(s,r,e.lineHeight);return{itemWidth:i,itemHeight:a}}function oP(t,e,n,r){let s=t.text;return s&&typeof s!="string"&&(s=s.reduce((i,a)=>i.length>a.length?i:a)),e+n.size/2+r.measureText(s).width}function lP(t,e,n){let r=t;return typeof e.text!="string"&&(r=Jv(e,n)),r}function Jv(t,e){const n=t.text?t.text.length:0;return e*n}function cP(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var uP={id:"legend",_element:Kp,start(t,e,n){const r=t.legend=new Kp({ctx:t.ctx,options:n,chart:t});On.configure(t,r,n),On.addBox(t,r)},stop(t){On.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){const r=t.legend;On.configure(t,r,n),r.options=n},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){const r=e.datasetIndex,s=n.chart;s.isDatasetVisible(r)?(s.hide(r),e.hidden=!0):(s.show(r),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:r,textAlign:s,color:i,useBorderRadius:a,borderRadius:o}}=t.legend.options;return t._getSortedDatasetMetas().map(l=>{const c=l.controller.getStyle(n?0:void 0),u=Dt(c.borderWidth);return{text:e[l.index].label,fillStyle:c.backgroundColor,fontColor:i,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:c.borderColor,pointStyle:r||c.pointStyle,rotation:c.rotation,textAlign:s||c.textAlign,borderRadius:a&&(o||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};const ni={average(t){if(!t.length)return!1;let e,n,r=new Set,s=0,i=0;for(e=0,n=t.length;e<n;++e){const o=t[e].element;if(o&&o.hasValue()){const l=o.tooltipPosition();r.add(l.x),s+=l.y,++i}}return i===0||r.size===0?!1:{x:[...r].reduce((o,l)=>o+l)/r.size,y:s/i}},nearest(t,e){if(!t.length)return!1;let n=e.x,r=e.y,s=Number.POSITIVE_INFINITY,i,a,o;for(i=0,a=t.length;i<a;++i){const l=t[i].element;if(l&&l.hasValue()){const c=l.getCenterPoint(),u=Dj(e,c);u<s&&(s=u,o=l)}}if(o){const l=o.tooltipPosition();n=l.x,r=l.y}return{x:n,y:r}}};function $t(t,e){return e&&(Ie(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function Xt(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function dP(t,e){const{element:n,datasetIndex:r,index:s}=e,i=t.getDatasetMeta(r).controller,{label:a,value:o}=i.getLabelAndValue(s);return{chart:t,label:a,parsed:i.getParsed(s),raw:t.data.datasets[r].data[s],formattedValue:o,dataset:i.getDataset(),dataIndex:s,datasetIndex:r,element:n}}function Yp(t,e){const n=t.chart.ctx,{body:r,footer:s,title:i}=t,{boxWidth:a,boxHeight:o}=e,l=Ze(e.bodyFont),c=Ze(e.titleFont),u=Ze(e.footerFont),h=i.length,f=s.length,m=r.length,p=Dt(e.padding);let v=p.height,_=0,w=r.reduce((x,k)=>x+k.before.length+k.lines.length+k.after.length,0);if(w+=t.beforeBody.length+t.afterBody.length,h&&(v+=h*c.lineHeight+(h-1)*e.titleSpacing+e.titleMarginBottom),w){const x=e.displayColors?Math.max(o,l.lineHeight):l.lineHeight;v+=m*x+(w-m)*l.lineHeight+(w-1)*e.bodySpacing}f&&(v+=e.footerMarginTop+f*u.lineHeight+(f-1)*e.footerSpacing);let y=0;const g=function(x){_=Math.max(_,n.measureText(x).width+y)};return n.save(),n.font=c.string,X(t.title,g),n.font=l.string,X(t.beforeBody.concat(t.afterBody),g),y=e.displayColors?a+2+e.boxPadding:0,X(r,x=>{X(x.before,g),X(x.lines,g),X(x.after,g)}),y=0,n.font=u.string,X(t.footer,g),n.restore(),_+=p.width,{width:_,height:v}}function hP(t,e){const{y:n,height:r}=e;return n<r/2?"top":n>t.height-r/2?"bottom":"center"}function fP(t,e,n,r){const{x:s,width:i}=r,a=n.caretSize+n.caretPadding;if(t==="left"&&s+i+a>e.width||t==="right"&&s-i-a<0)return!0}function pP(t,e,n,r){const{x:s,width:i}=n,{width:a,chartArea:{left:o,right:l}}=t;let c="center";return r==="center"?c=s<=(o+l)/2?"left":"right":s<=i/2?c="left":s>=a-i/2&&(c="right"),fP(c,t,e,n)&&(c="center"),c}function Gp(t,e,n){const r=n.yAlign||e.yAlign||hP(t,n);return{xAlign:n.xAlign||e.xAlign||pP(t,e,n,r),yAlign:r}}function mP(t,e){let{x:n,width:r}=t;return e==="right"?n-=r:e==="center"&&(n-=r/2),n}function gP(t,e,n){let{y:r,height:s}=t;return e==="top"?r+=n:e==="bottom"?r-=s+n:r-=s/2,r}function Qp(t,e,n,r){const{caretSize:s,caretPadding:i,cornerRadius:a}=t,{xAlign:o,yAlign:l}=n,c=s+i,{topLeft:u,topRight:h,bottomLeft:f,bottomRight:m}=vi(a);let p=mP(e,o);const v=gP(e,l,c);return l==="center"?o==="left"?p+=c:o==="right"&&(p-=c):o==="left"?p-=Math.max(u,f)+s:o==="right"&&(p+=Math.max(h,m)+s),{x:vt(p,0,r.width-e.width),y:vt(v,0,r.height-e.height)}}function $a(t,e,n){const r=Dt(n.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-r.right:t.x+r.left}function Xp(t){return $t([],Xt(t))}function yP(t,e,n){return Os(t,{tooltip:e,tooltipItems:n,type:"tooltip"})}function Jp(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}const Zv={beforeTitle:Gt,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,r=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(r>0&&e.dataIndex<r)return n[e.dataIndex]}return""},afterTitle:Gt,beforeBody:Gt,beforeLabel:Gt,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return Be(n)||(e+=n),e},labelColor(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:Gt,afterBody:Gt,beforeFooter:Gt,footer:Gt,afterFooter:Gt};function Ye(t,e,n,r){const s=t[e].call(n,r);return typeof s>"u"?Zv[e].call(n,r):s}class Du extends Pr{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const n=this.chart,r=this.options.setContext(this.getContext()),s=r.enabled&&n.options.animation&&r.animations,i=new Fv(this.chart,s);return s._cacheable&&(this._cachedAnimations=Object.freeze(i)),i}getContext(){return this.$context||(this.$context=yP(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,n){const{callbacks:r}=n,s=Ye(r,"beforeTitle",this,e),i=Ye(r,"title",this,e),a=Ye(r,"afterTitle",this,e);let o=[];return o=$t(o,Xt(s)),o=$t(o,Xt(i)),o=$t(o,Xt(a)),o}getBeforeBody(e,n){return Xp(Ye(n.callbacks,"beforeBody",this,e))}getBody(e,n){const{callbacks:r}=n,s=[];return X(e,i=>{const a={before:[],lines:[],after:[]},o=Jp(r,i);$t(a.before,Xt(Ye(o,"beforeLabel",this,i))),$t(a.lines,Ye(o,"label",this,i)),$t(a.after,Xt(Ye(o,"afterLabel",this,i))),s.push(a)}),s}getAfterBody(e,n){return Xp(Ye(n.callbacks,"afterBody",this,e))}getFooter(e,n){const{callbacks:r}=n,s=Ye(r,"beforeFooter",this,e),i=Ye(r,"footer",this,e),a=Ye(r,"afterFooter",this,e);let o=[];return o=$t(o,Xt(s)),o=$t(o,Xt(i)),o=$t(o,Xt(a)),o}_createItems(e){const n=this._active,r=this.chart.data,s=[],i=[],a=[];let o=[],l,c;for(l=0,c=n.length;l<c;++l)o.push(dP(this.chart,n[l]));return e.filter&&(o=o.filter((u,h,f)=>e.filter(u,h,f,r))),e.itemSort&&(o=o.sort((u,h)=>e.itemSort(u,h,r))),X(o,u=>{const h=Jp(e.callbacks,u);s.push(Ye(h,"labelColor",this,u)),i.push(Ye(h,"labelPointStyle",this,u)),a.push(Ye(h,"labelTextColor",this,u))}),this.labelColors=s,this.labelPointStyles=i,this.labelTextColors=a,this.dataPoints=o,o}update(e,n){const r=this.options.setContext(this.getContext()),s=this._active;let i,a=[];if(!s.length)this.opacity!==0&&(i={opacity:0});else{const o=ni[r.position].call(this,s,this._eventPosition);a=this._createItems(r),this.title=this.getTitle(a,r),this.beforeBody=this.getBeforeBody(a,r),this.body=this.getBody(a,r),this.afterBody=this.getAfterBody(a,r),this.footer=this.getFooter(a,r);const l=this._size=Yp(this,r),c=Object.assign({},o,l),u=Gp(this.chart,r,c),h=Qp(r,c,u,this.chart);this.xAlign=u.xAlign,this.yAlign=u.yAlign,i={opacity:1,x:h.x,y:h.y,width:l.width,height:l.height,caretX:o.x,caretY:o.y}}this._tooltipItems=a,this.$context=void 0,i&&this._resolveAnimations().update(this,i),e&&r.external&&r.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(e,n,r,s){const i=this.getCaretPosition(e,r,s);n.lineTo(i.x1,i.y1),n.lineTo(i.x2,i.y2),n.lineTo(i.x3,i.y3)}getCaretPosition(e,n,r){const{xAlign:s,yAlign:i}=this,{caretSize:a,cornerRadius:o}=r,{topLeft:l,topRight:c,bottomLeft:u,bottomRight:h}=vi(o),{x:f,y:m}=e,{width:p,height:v}=n;let _,w,y,g,x,k;return i==="center"?(x=m+v/2,s==="left"?(_=f,w=_-a,g=x+a,k=x-a):(_=f+p,w=_+a,g=x-a,k=x+a),y=_):(s==="left"?w=f+Math.max(l,u)+a:s==="right"?w=f+p-Math.max(c,h)-a:w=this.caretX,i==="top"?(g=m,x=g-a,_=w-a,y=w+a):(g=m+v,x=g+a,_=w+a,y=w-a),k=g),{x1:_,x2:w,x3:y,y1:g,y2:x,y3:k}}drawTitle(e,n,r){const s=this.title,i=s.length;let a,o,l;if(i){const c=ps(r.rtl,this.x,this.width);for(e.x=$a(this,r.titleAlign,r),n.textAlign=c.textAlign(r.titleAlign),n.textBaseline="middle",a=Ze(r.titleFont),o=r.titleSpacing,n.fillStyle=r.titleColor,n.font=a.string,l=0;l<i;++l)n.fillText(s[l],c.x(e.x),e.y+a.lineHeight/2),e.y+=a.lineHeight+o,l+1===i&&(e.y+=r.titleMarginBottom-o)}}_drawColorBox(e,n,r,s,i){const a=this.labelColors[r],o=this.labelPointStyles[r],{boxHeight:l,boxWidth:c}=i,u=Ze(i.bodyFont),h=$a(this,"left",i),f=s.x(h),m=l<u.lineHeight?(u.lineHeight-l)/2:0,p=n.y+m;if(i.usePointStyle){const v={radius:Math.min(c,l)/2,pointStyle:o.pointStyle,rotation:o.rotation,borderWidth:1},_=s.leftForLtr(f,c)+c/2,w=p+l/2;e.strokeStyle=i.multiKeyBackground,e.fillStyle=i.multiKeyBackground,gp(e,v,_,w),e.strokeStyle=a.borderColor,e.fillStyle=a.backgroundColor,gp(e,v,_,w)}else{e.lineWidth=G(a.borderWidth)?Math.max(...Object.values(a.borderWidth)):a.borderWidth||1,e.strokeStyle=a.borderColor,e.setLineDash(a.borderDash||[]),e.lineDashOffset=a.borderDashOffset||0;const v=s.leftForLtr(f,c),_=s.leftForLtr(s.xPlus(f,1),c-2),w=vi(a.borderRadius);Object.values(w).some(y=>y!==0)?(e.beginPath(),e.fillStyle=i.multiKeyBackground,Ru(e,{x:v,y:p,w:c,h:l,radius:w}),e.fill(),e.stroke(),e.fillStyle=a.backgroundColor,e.beginPath(),Ru(e,{x:_,y:p+1,w:c-2,h:l-2,radius:w}),e.fill()):(e.fillStyle=i.multiKeyBackground,e.fillRect(v,p,c,l),e.strokeRect(v,p,c,l),e.fillStyle=a.backgroundColor,e.fillRect(_,p+1,c-2,l-2))}e.fillStyle=this.labelTextColors[r]}drawBody(e,n,r){const{body:s}=this,{bodySpacing:i,bodyAlign:a,displayColors:o,boxHeight:l,boxWidth:c,boxPadding:u}=r,h=Ze(r.bodyFont);let f=h.lineHeight,m=0;const p=ps(r.rtl,this.x,this.width),v=function(j){n.fillText(j,p.x(e.x+m),e.y+f/2),e.y+=f+i},_=p.textAlign(a);let w,y,g,x,k,b,E;for(n.textAlign=a,n.textBaseline="middle",n.font=h.string,e.x=$a(this,_,r),n.fillStyle=r.bodyColor,X(this.beforeBody,v),m=o&&_!=="right"?a==="center"?c/2+u:c+2+u:0,x=0,b=s.length;x<b;++x){for(w=s[x],y=this.labelTextColors[x],n.fillStyle=y,X(w.before,v),g=w.lines,o&&g.length&&(this._drawColorBox(n,e,x,p,r),f=Math.max(h.lineHeight,l)),k=0,E=g.length;k<E;++k)v(g[k]),f=h.lineHeight;X(w.after,v)}m=0,f=h.lineHeight,X(this.afterBody,v),e.y-=i}drawFooter(e,n,r){const s=this.footer,i=s.length;let a,o;if(i){const l=ps(r.rtl,this.x,this.width);for(e.x=$a(this,r.footerAlign,r),e.y+=r.footerMarginTop,n.textAlign=l.textAlign(r.footerAlign),n.textBaseline="middle",a=Ze(r.footerFont),n.fillStyle=r.footerColor,n.font=a.string,o=0;o<i;++o)n.fillText(s[o],l.x(e.x),e.y+a.lineHeight/2),e.y+=a.lineHeight+r.footerSpacing}}drawBackground(e,n,r,s){const{xAlign:i,yAlign:a}=this,{x:o,y:l}=e,{width:c,height:u}=r,{topLeft:h,topRight:f,bottomLeft:m,bottomRight:p}=vi(s.cornerRadius);n.fillStyle=s.backgroundColor,n.strokeStyle=s.borderColor,n.lineWidth=s.borderWidth,n.beginPath(),n.moveTo(o+h,l),a==="top"&&this.drawCaret(e,n,r,s),n.lineTo(o+c-f,l),n.quadraticCurveTo(o+c,l,o+c,l+f),a==="center"&&i==="right"&&this.drawCaret(e,n,r,s),n.lineTo(o+c,l+u-p),n.quadraticCurveTo(o+c,l+u,o+c-p,l+u),a==="bottom"&&this.drawCaret(e,n,r,s),n.lineTo(o+m,l+u),n.quadraticCurveTo(o,l+u,o,l+u-m),a==="center"&&i==="left"&&this.drawCaret(e,n,r,s),n.lineTo(o,l+h),n.quadraticCurveTo(o,l,o+h,l),n.closePath(),n.fill(),s.borderWidth>0&&n.stroke()}_updateAnimationTarget(e){const n=this.chart,r=this.$animations,s=r&&r.x,i=r&&r.y;if(s||i){const a=ni[e.position].call(this,this._active,this._eventPosition);if(!a)return;const o=this._size=Yp(this,e),l=Object.assign({},a,this._size),c=Gp(n,e,l),u=Qp(e,l,c,n);(s._to!==u.x||i._to!==u.y)&&(this.xAlign=c.xAlign,this.yAlign=c.yAlign,this.width=o.width,this.height=o.height,this.caretX=a.x,this.caretY=a.y,this._resolveAnimations().update(this,u))}}_willRender(){return!!this.opacity}draw(e){const n=this.options.setContext(this.getContext());let r=this.opacity;if(!r)return;this._updateAnimationTarget(n);const s={width:this.width,height:this.height},i={x:this.x,y:this.y};r=Math.abs(r)<.001?0:r;const a=Dt(n.padding),o=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&o&&(e.save(),e.globalAlpha=r,this.drawBackground(i,e,s,n),$v(e,n.textDirection),i.y+=a.top,this.drawTitle(i,e,n),this.drawBody(i,e,n),this.drawFooter(i,e,n),Uv(e,n.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,n){const r=this._active,s=e.map(({datasetIndex:o,index:l})=>{const c=this.chart.getDatasetMeta(o);if(!c)throw new Error("Cannot find a dataset at index "+o);return{datasetIndex:o,element:c.data[l],index:l}}),i=!Lo(r,s),a=this._positionChanged(s,n);(i||a)&&(this._active=s,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,n,r=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const s=this.options,i=this._active||[],a=this._getActiveElements(e,i,n,r),o=this._positionChanged(a,e),l=n||!Lo(a,i)||o;return l&&(this._active=a,(s.enabled||s.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,n))),l}_getActiveElements(e,n,r,s){const i=this.options;if(e.type==="mouseout")return[];if(!s)return n.filter(o=>this.chart.data.datasets[o.datasetIndex]&&this.chart.getDatasetMeta(o.datasetIndex).controller.getParsed(o.index)!==void 0);const a=this.chart.getElementsAtEventForMode(e,i.mode,i,r);return i.reverse&&a.reverse(),a}_positionChanged(e,n){const{caretX:r,caretY:s,options:i}=this,a=ni[i.position].call(this,e,n);return a!==!1&&(r!==a.x||s!==a.y)}}V(Du,"positioners",ni);var vP={id:"tooltip",_element:Du,positioners:ni,afterInit(t,e,n){n&&(t.tooltip=new Du({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const n={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent(t,e){if(t.tooltip){const n=e.replay;t.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:Zv},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const El={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Xe=Object.keys(El);function Zp(t,e){return t-e}function em(t,e){if(Be(e))return null;const n=t._adapter,{parser:r,round:s,isoWeekday:i}=t._parseOpts;let a=e;return typeof r=="function"&&(a=r(a)),dn(a)||(a=typeof r=="string"?n.parse(a,r):n.parse(a)),a===null?null:(s&&(a=s==="week"&&(Fo(i)||i===!0)?n.startOf(a,"isoWeek",i):n.startOf(a,s)),+a)}function tm(t,e,n,r){const s=Xe.length;for(let i=Xe.indexOf(t);i<s-1;++i){const a=El[Xe[i]],o=a.steps?a.steps:Number.MAX_SAFE_INTEGER;if(a.common&&Math.ceil((n-e)/(o*a.size))<=r)return Xe[i]}return Xe[s-1]}function wP(t,e,n,r,s){for(let i=Xe.length-1;i>=Xe.indexOf(n);i--){const a=Xe[i];if(El[a].common&&t._adapter.diff(s,r,a)>=e-1)return a}return Xe[n?Xe.indexOf(n):0]}function _P(t){for(let e=Xe.indexOf(t)+1,n=Xe.length;e<n;++e)if(El[Xe[e]].common)return Xe[e]}function nm(t,e,n){if(!n)t[e]=!0;else if(n.length){const{lo:r,hi:s}=Yd(n,e),i=n[r]>=e?n[r]:n[s];t[i]=!0}}function xP(t,e,n,r){const s=t._adapter,i=+s.startOf(e[0].value,r),a=e[e.length-1].value;let o,l;for(o=i;o<=a;o=+s.add(o,1,r))l=n[o],l>=0&&(e[l].major=!0);return e}function rm(t,e,n){const r=[],s={},i=e.length;let a,o;for(a=0;a<i;++a)o=e[a],s[o]=a,r.push({value:o,major:!1});return i===0||!n?r:xP(t,r,s,n)}class Ko extends kl{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,n={}){const r=e.time||(e.time={}),s=this._adapter=new HC._date(e.adapters.date);s.init(n),mi(r.displayFormats,s.formats()),this._parseOpts={parser:r.parser,round:r.round,isoWeekday:r.isoWeekday},super.init(e),this._normalized=n.normalized}parse(e,n){return e===void 0?null:em(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,n=this._adapter,r=e.time.unit||"day";let{min:s,max:i,minDefined:a,maxDefined:o}=this.getUserBounds();function l(c){!a&&!isNaN(c.min)&&(s=Math.min(s,c.min)),!o&&!isNaN(c.max)&&(i=Math.max(i,c.max))}(!a||!o)&&(l(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&l(this.getMinMax(!1))),s=dn(s)&&!isNaN(s)?s:+n.startOf(Date.now(),r),i=dn(i)&&!isNaN(i)?i:+n.endOf(Date.now(),r)+1,this.min=Math.min(s,i-1),this.max=Math.max(s+1,i)}_getLabelBounds(){const e=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;return e.length&&(n=e[0],r=e[e.length-1]),{min:n,max:r}}buildTicks(){const e=this.options,n=e.time,r=e.ticks,s=r.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&s.length&&(this.min=this._userMin||s[0],this.max=this._userMax||s[s.length-1]);const i=this.min,a=this.max,o=zj(s,i,a);return this._unit=n.unit||(r.autoSkip?tm(n.minUnit,this.min,this.max,this._getLabelCapacity(i)):wP(this,o.length,n.minUnit,this.min,this.max)),this._majorUnit=!r.major.enabled||this._unit==="year"?void 0:_P(this._unit),this.initOffsets(s),e.reverse&&o.reverse(),rm(this,o,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let n=0,r=0,s,i;this.options.offset&&e.length&&(s=this.getDecimalForValue(e[0]),e.length===1?n=1-s:n=(this.getDecimalForValue(e[1])-s)/2,i=this.getDecimalForValue(e[e.length-1]),e.length===1?r=i:r=(i-this.getDecimalForValue(e[e.length-2]))/2);const a=e.length<3?.5:.25;n=vt(n,0,a),r=vt(r,0,a),this._offsets={start:n,end:r,factor:1/(n+1+r)}}_generate(){const e=this._adapter,n=this.min,r=this.max,s=this.options,i=s.time,a=i.unit||tm(i.minUnit,n,r,this._getLabelCapacity(n)),o=J(s.ticks.stepSize,1),l=a==="week"?i.isoWeekday:!1,c=Fo(l)||l===!0,u={};let h=n,f,m;if(c&&(h=+e.startOf(h,"isoWeek",l)),h=+e.startOf(h,c?"day":a),e.diff(r,n,a)>1e5*o)throw new Error(n+" and "+r+" are too far apart with stepSize of "+o+" "+a);const p=s.ticks.source==="data"&&this.getDataTimestamps();for(f=h,m=0;f<r;f=+e.add(f,o,a),m++)nm(u,f,p);return(f===r||s.bounds==="ticks"||m===1)&&nm(u,f,p),Object.keys(u).sort(Zp).map(v=>+v)}getLabelForValue(e){const n=this._adapter,r=this.options.time;return r.tooltipFormat?n.format(e,r.tooltipFormat):n.format(e,r.displayFormats.datetime)}format(e,n){const s=this.options.time.displayFormats,i=this._unit,a=n||s[i];return this._adapter.format(e,a)}_tickFormatFunction(e,n,r,s){const i=this.options,a=i.ticks.callback;if(a)return ae(a,[e,n,r],this);const o=i.time.displayFormats,l=this._unit,c=this._majorUnit,u=l&&o[l],h=c&&o[c],f=r[n],m=c&&h&&f&&f.major;return this._adapter.format(e,s||(m?h:u))}generateTickLabels(e){let n,r,s;for(n=0,r=e.length;n<r;++n)s=e[n],s.label=this._tickFormatFunction(s.value,n,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const n=this._offsets,r=this.getDecimalForValue(e);return this.getPixelForDecimal((n.start+r)*n.factor)}getValueForPixel(e){const n=this._offsets,r=this.getDecimalForPixel(e)/n.factor-n.end;return this.min+r*(this.max-this.min)}_getLabelSize(e){const n=this.options.ticks,r=this.ctx.measureText(e).width,s=gr(this.isHorizontal()?n.maxRotation:n.minRotation),i=Math.cos(s),a=Math.sin(s),o=this._resolveTickFontOptions(0).size;return{w:r*i+o*a,h:r*a+o*i}}_getLabelCapacity(e){const n=this.options.time,r=n.displayFormats,s=r[n.unit]||r.millisecond,i=this._tickFormatFunction(e,0,rm(this,[e],this._majorUnit),s),a=this._getLabelSize(i),o=Math.floor(this.isHorizontal()?this.width/a.w:this.height/a.h)-1;return o>0?o:1}getDataTimestamps(){let e=this._cache.data||[],n,r;if(e.length)return e;const s=this.getMatchingVisibleMetas();if(this._normalized&&s.length)return this._cache.data=s[0].controller.getAllParsedValues(this);for(n=0,r=s.length;n<r;++n)e=e.concat(s[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let n,r;if(e.length)return e;const s=this.getLabels();for(n=0,r=s.length;n<r;++n)e.push(em(this,s[n]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return Uj(e.sort(Zp))}}V(Ko,"id","time"),V(Ko,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function Ua(t,e,n){let r=0,s=t.length-1,i,a,o,l;n?(e>=t[r].pos&&e<=t[s].pos&&({lo:r,hi:s}=Nu(t,"pos",e)),{pos:i,time:o}=t[r],{pos:a,time:l}=t[s]):(e>=t[r].time&&e<=t[s].time&&({lo:r,hi:s}=Nu(t,"time",e)),{time:i,pos:o}=t[r],{time:a,pos:l}=t[s]);const c=a-i;return c?o+(l-o)*(e-i)/c:o}class sm extends Ko{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(e);this._minPos=Ua(n,this.min),this._tableRange=Ua(n,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:n,max:r}=this,s=[],i=[];let a,o,l,c,u;for(a=0,o=e.length;a<o;++a)c=e[a],c>=n&&c<=r&&s.push(c);if(s.length<2)return[{time:n,pos:0},{time:r,pos:1}];for(a=0,o=s.length;a<o;++a)u=s[a+1],l=s[a-1],c=s[a],Math.round((u+l)/2)!==c&&i.push({time:c,pos:a/(o-1)});return i}_generate(){const e=this.min,n=this.max;let r=super.getDataTimestamps();return(!r.includes(e)||!r.length)&&r.splice(0,0,e),(!r.includes(n)||r.length===1)&&r.push(n),r.sort((s,i)=>s-i)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const n=this.getDataTimestamps(),r=this.getLabelTimestamps();return n.length&&r.length?e=this.normalize(n.concat(r)):e=n.length?n:r,e=this._cache.all=e,e}getDecimalForValue(e){return(Ua(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const n=this._offsets,r=this.getDecimalForPixel(e)/n.factor-n.end;return Ua(this._table,r*this._tableRange+this._minPos,!0)}}V(sm,"id","timeseries"),V(sm,"defaults",Ko.defaults);const e0="label";function im(t,e){typeof t=="function"?t(e):t&&(t.current=e)}function bP(t,e){const n=t.options;n&&e&&Object.assign(n,e)}function t0(t,e){t.labels=e}function n0(t,e,n=e0){const r=[];t.datasets=e.map(s=>{const i=t.datasets.find(a=>a[n]===s[n]);return!i||!s.data||r.includes(i)?{...s}:(r.push(i),Object.assign(i,s),i)})}function kP(t,e=e0){const n={labels:[],datasets:[]};return t0(n,t.labels),n0(n,t.datasets,e),n}function SP(t,e){const{height:n=150,width:r=300,redraw:s=!1,datasetIdKey:i,type:a,data:o,options:l,plugins:c=[],fallbackContent:u,updateMode:h,...f}=t,m=S.useRef(null),p=S.useRef(null),v=()=>{m.current&&(p.current=new Sl(m.current,{type:a,data:kP(o,i),options:l&&{...l},plugins:c}),im(e,p.current))},_=()=>{im(e,null),p.current&&(p.current.destroy(),p.current=null)};return S.useEffect(()=>{!s&&p.current&&l&&bP(p.current,l)},[s,l]),S.useEffect(()=>{!s&&p.current&&t0(p.current.config.data,o.labels)},[s,o.labels]),S.useEffect(()=>{!s&&p.current&&o.datasets&&n0(p.current.config.data,o.datasets,i)},[s,o.datasets]),S.useEffect(()=>{p.current&&(s?(_(),setTimeout(v)):p.current.update(h))},[s,l,o.labels,o.datasets,h]),S.useEffect(()=>{p.current&&(_(),setTimeout(v))},[a]),S.useEffect(()=>(v(),()=>_()),[]),d.jsx("canvas",{ref:m,role:"img",height:n,width:r,...f,children:u})}const EP=S.forwardRef(SP);function jP(t,e){return Sl.register(e),S.forwardRef((n,r)=>d.jsx(EP,{...n,ref:r,type:t}))}const CP=jP("doughnut",Zs);Sl.register(ti,vP,uP);const PP=()=>{const[t,e]=S.useState({totalPatients:0,activeFiles:0,todayActivity:0,missingFiles:0}),[n,r]=S.useState([]),[s,i]=S.useState([]),[a,o]=S.useState(!0);S.useEffect(()=>{l();const p=z.channel("dashboard-realtime").on("postgres_changes",{event:"*",schema:"public",table:"activity_logs"},()=>{h()}).on("postgres_changes",{event:"*",schema:"public",table:"tracer"},()=>{u()}).subscribe();return()=>{z.removeChannel(p)}},[]);const l=async()=>{o(!0),await Promise.all([c(),u(),h()]),o(!1)},c=async()=>{try{const{count:p}=await z.from("patients").select("*",{count:"exact",head:!0}),{data:v}=await z.from("tracer").select("patient_id, status_lokasi").order("updated_at",{ascending:!1}),_={};v==null||v.forEach(k=>{_[k.patient_id]||(_[k.patient_id]=k.status_lokasi)});const w=Object.values(_).filter(k=>k!=="hilang").length,y=Object.values(_).filter(k=>k==="hilang").length,g=new Date;g.setHours(0,0,0,0);const{count:x}=await z.from("activity_logs").select("*",{count:"exact",head:!0}).gte("created_at",g.toISOString());e({totalPatients:p||0,activeFiles:w,todayActivity:x||0,missingFiles:y})}catch(p){console.error("Error fetching stats:",p)}},u=async()=>{try{const{data:p}=await z.from("tracer").select("patient_id, status_lokasi").order("updated_at",{ascending:!1}),v={};p==null||p.forEach(w=>{v[w.patient_id]||(v[w.patient_id]=w.status_lokasi)});const _=oe.map(w=>({...w,count:Object.values(v).filter(y=>y===w.value).length}));r(_)}catch(p){console.error("Error fetching status counts:",p)}},h=async()=>{try{const{data:p}=await z.from("activity_logs").select(`
          *,
          profiles:user_id (nama)
        `).order("created_at",{ascending:!1}).limit(10);i(p||[])}catch(p){console.error("Error fetching recent activity:",p)}},f={labels:n.map(p=>p.label),datasets:[{data:n.map(p=>p.count),backgroundColor:n.map(p=>p.color),borderWidth:0,hoverOffset:4}]},m={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom",labels:{padding:20,usePointStyle:!0,pointStyle:"circle"}}},cutout:"60%"};return a?d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"page-header",children:[d.jsx("h1",{className:"page-title",children:"Dashboard"}),d.jsx("p",{className:"page-subtitle",children:"Monitoring sistem rekam medis"})]}),d.jsx("div",{className:"page-content",children:d.jsx("div",{className:"grid grid-cols-4 gap-md",children:[1,2,3,4].map(p=>d.jsx("div",{className:"skeleton skeleton-card"},p))})})]}):d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"page-header",children:[d.jsx("h1",{className:"page-title",children:"Dashboard"}),d.jsx("p",{className:"page-subtitle",children:"Monitoring sistem rekam medis"})]}),d.jsxs("div",{className:"page-content",children:[d.jsxs("div",{className:"grid grid-cols-4 gap-md mb-lg",children:[d.jsxs("div",{className:"stat-card",children:[d.jsx("div",{className:"stat-value",children:t.totalPatients}),d.jsx("div",{className:"stat-label",children:"Total Pasien"}),d.jsx(Ao,{className:"stat-icon",size:48})]}),d.jsxs("div",{className:"stat-card success",children:[d.jsx("div",{className:"stat-value",children:t.activeFiles}),d.jsx("div",{className:"stat-label",children:"Berkas Aktif"}),d.jsx(Vn,{className:"stat-icon",size:48})]}),d.jsxs("div",{className:"stat-card purple",children:[d.jsx("div",{className:"stat-value",children:t.todayActivity}),d.jsx("div",{className:"stat-label",children:"Aktivitas Hari Ini"}),d.jsx(cv,{className:"stat-icon",size:48})]}),d.jsxs("div",{className:"stat-card error",children:[d.jsx("div",{className:"stat-value",children:t.missingFiles}),d.jsx("div",{className:"stat-label",children:"Berkas Hilang"}),d.jsx($d,{className:"stat-icon",size:48})]})]}),d.jsxs("div",{className:"grid grid-cols-2 gap-lg",children:[d.jsxs("div",{className:"card",children:[d.jsx("div",{className:"card-header",children:d.jsx("h2",{style:{fontSize:"1.125rem",fontWeight:600},children:"Status Lokasi Berkas"})}),d.jsx("div",{className:"card-body",children:d.jsx("div",{className:"chart-container",style:{height:"280px"},children:n.some(p=>p.count>0)?d.jsx(CP,{data:f,options:m}):d.jsxs("div",{className:"empty-state",children:[d.jsx(ks,{className:"empty-state-icon"}),d.jsx("p",{children:"Belum ada data status lokasi"})]})})})]}),d.jsxs("div",{className:"card",children:[d.jsxs("div",{className:"card-header flex justify-between items-center",children:[d.jsx("h2",{style:{fontSize:"1.125rem",fontWeight:600},children:"Aktivitas Terbaru"}),d.jsx("span",{className:"badge badge-primary",children:"Realtime"})]}),d.jsx("div",{className:"card-body",style:{padding:0},children:s.length>0?d.jsx("div",{className:"recent-list",style:{padding:"var(--spacing-md)"},children:s.map(p=>{var v,_;return d.jsxs("div",{className:"recent-item",style:{cursor:"default"},children:[d.jsx(Ro,{size:16,style:{color:"var(--primary-500)",flexShrink:0}}),d.jsxs("div",{className:"recent-item-content",children:[d.jsxs("div",{className:"recent-item-title",children:[p.aksi,p.no_rm&&` - ${p.no_rm}`]}),d.jsxs("div",{className:"recent-item-subtitle",children:[((v=p.profiles)==null?void 0:v.nama)||"System",((_=p.details)==null?void 0:_.status_lokasi)&&d.jsxs(d.Fragment,{children:["  ",Mt(p.details.status_lokasi,oe)]})]})]}),d.jsx("div",{className:"recent-item-time",children:xv(p.created_at)})]},p.id)})}):d.jsxs("div",{className:"empty-state",children:[d.jsx(Ro,{className:"empty-state-icon"}),d.jsx("p",{children:"Belum ada aktivitas"})]})})]})]})]})]})};var TP=Object.defineProperty,Yo=Object.getOwnPropertySymbols,r0=Object.prototype.hasOwnProperty,s0=Object.prototype.propertyIsEnumerable,am=(t,e,n)=>e in t?TP(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Iu=(t,e)=>{for(var n in e||(e={}))r0.call(e,n)&&am(t,n,e[n]);if(Yo)for(var n of Yo(e))s0.call(e,n)&&am(t,n,e[n]);return t},i0=(t,e)=>{var n={};for(var r in t)r0.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&Yo)for(var r of Yo(t))e.indexOf(r)<0&&s0.call(t,r)&&(n[r]=t[r]);return n};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var Tr;(t=>{const e=class{constructor(l,c,u,h){if(this.version=l,this.errorCorrectionLevel=c,this.modules=[],this.isFunction=[],l<e.MIN_VERSION||l>e.MAX_VERSION)throw new RangeError("Version value out of range");if(h<-1||h>7)throw new RangeError("Mask value out of range");this.size=l*4+17;let f=[];for(let p=0;p<this.size;p++)f.push(!1);for(let p=0;p<this.size;p++)this.modules.push(f.slice()),this.isFunction.push(f.slice());this.drawFunctionPatterns();const m=this.addEccAndInterleave(u);if(this.drawCodewords(m),h==-1){let p=1e9;for(let v=0;v<8;v++){this.applyMask(v),this.drawFormatBits(v);const _=this.getPenaltyScore();_<p&&(h=v,p=_),this.applyMask(v)}}i(0<=h&&h<=7),this.mask=h,this.applyMask(h),this.drawFormatBits(h),this.isFunction=[]}static encodeText(l,c){const u=t.QrSegment.makeSegments(l);return e.encodeSegments(u,c)}static encodeBinary(l,c){const u=t.QrSegment.makeBytes(l);return e.encodeSegments([u],c)}static encodeSegments(l,c,u=1,h=40,f=-1,m=!0){if(!(e.MIN_VERSION<=u&&u<=h&&h<=e.MAX_VERSION)||f<-1||f>7)throw new RangeError("Invalid value");let p,v;for(p=u;;p++){const g=e.getNumDataCodewords(p,c)*8,x=o.getTotalBits(l,p);if(x<=g){v=x;break}if(p>=h)throw new RangeError("Data too long")}for(const g of[e.Ecc.MEDIUM,e.Ecc.QUARTILE,e.Ecc.HIGH])m&&v<=e.getNumDataCodewords(p,g)*8&&(c=g);let _=[];for(const g of l){r(g.mode.modeBits,4,_),r(g.numChars,g.mode.numCharCountBits(p),_);for(const x of g.getData())_.push(x)}i(_.length==v);const w=e.getNumDataCodewords(p,c)*8;i(_.length<=w),r(0,Math.min(4,w-_.length),_),r(0,(8-_.length%8)%8,_),i(_.length%8==0);for(let g=236;_.length<w;g^=253)r(g,8,_);let y=[];for(;y.length*8<_.length;)y.push(0);return _.forEach((g,x)=>y[x>>>3]|=g<<7-(x&7)),new e(p,c,y,f)}getModule(l,c){return 0<=l&&l<this.size&&0<=c&&c<this.size&&this.modules[c][l]}getModules(){return this.modules}drawFunctionPatterns(){for(let u=0;u<this.size;u++)this.setFunctionModule(6,u,u%2==0),this.setFunctionModule(u,6,u%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const l=this.getAlignmentPatternPositions(),c=l.length;for(let u=0;u<c;u++)for(let h=0;h<c;h++)u==0&&h==0||u==0&&h==c-1||u==c-1&&h==0||this.drawAlignmentPattern(l[u],l[h]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(l){const c=this.errorCorrectionLevel.formatBits<<3|l;let u=c;for(let f=0;f<10;f++)u=u<<1^(u>>>9)*1335;const h=(c<<10|u)^21522;i(h>>>15==0);for(let f=0;f<=5;f++)this.setFunctionModule(8,f,s(h,f));this.setFunctionModule(8,7,s(h,6)),this.setFunctionModule(8,8,s(h,7)),this.setFunctionModule(7,8,s(h,8));for(let f=9;f<15;f++)this.setFunctionModule(14-f,8,s(h,f));for(let f=0;f<8;f++)this.setFunctionModule(this.size-1-f,8,s(h,f));for(let f=8;f<15;f++)this.setFunctionModule(8,this.size-15+f,s(h,f));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let l=this.version;for(let u=0;u<12;u++)l=l<<1^(l>>>11)*7973;const c=this.version<<12|l;i(c>>>18==0);for(let u=0;u<18;u++){const h=s(c,u),f=this.size-11+u%3,m=Math.floor(u/3);this.setFunctionModule(f,m,h),this.setFunctionModule(m,f,h)}}drawFinderPattern(l,c){for(let u=-4;u<=4;u++)for(let h=-4;h<=4;h++){const f=Math.max(Math.abs(h),Math.abs(u)),m=l+h,p=c+u;0<=m&&m<this.size&&0<=p&&p<this.size&&this.setFunctionModule(m,p,f!=2&&f!=4)}}drawAlignmentPattern(l,c){for(let u=-2;u<=2;u++)for(let h=-2;h<=2;h++)this.setFunctionModule(l+h,c+u,Math.max(Math.abs(h),Math.abs(u))!=1)}setFunctionModule(l,c,u){this.modules[c][l]=u,this.isFunction[c][l]=!0}addEccAndInterleave(l){const c=this.version,u=this.errorCorrectionLevel;if(l.length!=e.getNumDataCodewords(c,u))throw new RangeError("Invalid argument");const h=e.NUM_ERROR_CORRECTION_BLOCKS[u.ordinal][c],f=e.ECC_CODEWORDS_PER_BLOCK[u.ordinal][c],m=Math.floor(e.getNumRawDataModules(c)/8),p=h-m%h,v=Math.floor(m/h);let _=[];const w=e.reedSolomonComputeDivisor(f);for(let g=0,x=0;g<h;g++){let k=l.slice(x,x+v-f+(g<p?0:1));x+=k.length;const b=e.reedSolomonComputeRemainder(k,w);g<p&&k.push(0),_.push(k.concat(b))}let y=[];for(let g=0;g<_[0].length;g++)_.forEach((x,k)=>{(g!=v-f||k>=p)&&y.push(x[g])});return i(y.length==m),y}drawCodewords(l){if(l.length!=Math.floor(e.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let c=0;for(let u=this.size-1;u>=1;u-=2){u==6&&(u=5);for(let h=0;h<this.size;h++)for(let f=0;f<2;f++){const m=u-f,v=(u+1&2)==0?this.size-1-h:h;!this.isFunction[v][m]&&c<l.length*8&&(this.modules[v][m]=s(l[c>>>3],7-(c&7)),c++)}}i(c==l.length*8)}applyMask(l){if(l<0||l>7)throw new RangeError("Mask value out of range");for(let c=0;c<this.size;c++)for(let u=0;u<this.size;u++){let h;switch(l){case 0:h=(u+c)%2==0;break;case 1:h=c%2==0;break;case 2:h=u%3==0;break;case 3:h=(u+c)%3==0;break;case 4:h=(Math.floor(u/3)+Math.floor(c/2))%2==0;break;case 5:h=u*c%2+u*c%3==0;break;case 6:h=(u*c%2+u*c%3)%2==0;break;case 7:h=((u+c)%2+u*c%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[c][u]&&h&&(this.modules[c][u]=!this.modules[c][u])}}getPenaltyScore(){let l=0;for(let f=0;f<this.size;f++){let m=!1,p=0,v=[0,0,0,0,0,0,0];for(let _=0;_<this.size;_++)this.modules[f][_]==m?(p++,p==5?l+=e.PENALTY_N1:p>5&&l++):(this.finderPenaltyAddHistory(p,v),m||(l+=this.finderPenaltyCountPatterns(v)*e.PENALTY_N3),m=this.modules[f][_],p=1);l+=this.finderPenaltyTerminateAndCount(m,p,v)*e.PENALTY_N3}for(let f=0;f<this.size;f++){let m=!1,p=0,v=[0,0,0,0,0,0,0];for(let _=0;_<this.size;_++)this.modules[_][f]==m?(p++,p==5?l+=e.PENALTY_N1:p>5&&l++):(this.finderPenaltyAddHistory(p,v),m||(l+=this.finderPenaltyCountPatterns(v)*e.PENALTY_N3),m=this.modules[_][f],p=1);l+=this.finderPenaltyTerminateAndCount(m,p,v)*e.PENALTY_N3}for(let f=0;f<this.size-1;f++)for(let m=0;m<this.size-1;m++){const p=this.modules[f][m];p==this.modules[f][m+1]&&p==this.modules[f+1][m]&&p==this.modules[f+1][m+1]&&(l+=e.PENALTY_N2)}let c=0;for(const f of this.modules)c=f.reduce((m,p)=>m+(p?1:0),c);const u=this.size*this.size,h=Math.ceil(Math.abs(c*20-u*10)/u)-1;return i(0<=h&&h<=9),l+=h*e.PENALTY_N4,i(0<=l&&l<=2568888),l}getAlignmentPatternPositions(){if(this.version==1)return[];{const l=Math.floor(this.version/7)+2,c=this.version==32?26:Math.ceil((this.version*4+4)/(l*2-2))*2;let u=[6];for(let h=this.size-7;u.length<l;h-=c)u.splice(1,0,h);return u}}static getNumRawDataModules(l){if(l<e.MIN_VERSION||l>e.MAX_VERSION)throw new RangeError("Version number out of range");let c=(16*l+128)*l+64;if(l>=2){const u=Math.floor(l/7)+2;c-=(25*u-10)*u-55,l>=7&&(c-=36)}return i(208<=c&&c<=29648),c}static getNumDataCodewords(l,c){return Math.floor(e.getNumRawDataModules(l)/8)-e.ECC_CODEWORDS_PER_BLOCK[c.ordinal][l]*e.NUM_ERROR_CORRECTION_BLOCKS[c.ordinal][l]}static reedSolomonComputeDivisor(l){if(l<1||l>255)throw new RangeError("Degree out of range");let c=[];for(let h=0;h<l-1;h++)c.push(0);c.push(1);let u=1;for(let h=0;h<l;h++){for(let f=0;f<c.length;f++)c[f]=e.reedSolomonMultiply(c[f],u),f+1<c.length&&(c[f]^=c[f+1]);u=e.reedSolomonMultiply(u,2)}return c}static reedSolomonComputeRemainder(l,c){let u=c.map(h=>0);for(const h of l){const f=h^u.shift();u.push(0),c.forEach((m,p)=>u[p]^=e.reedSolomonMultiply(m,f))}return u}static reedSolomonMultiply(l,c){if(l>>>8||c>>>8)throw new RangeError("Byte out of range");let u=0;for(let h=7;h>=0;h--)u=u<<1^(u>>>7)*285,u^=(c>>>h&1)*l;return i(u>>>8==0),u}finderPenaltyCountPatterns(l){const c=l[1];i(c<=this.size*3);const u=c>0&&l[2]==c&&l[3]==c*3&&l[4]==c&&l[5]==c;return(u&&l[0]>=c*4&&l[6]>=c?1:0)+(u&&l[6]>=c*4&&l[0]>=c?1:0)}finderPenaltyTerminateAndCount(l,c,u){return l&&(this.finderPenaltyAddHistory(c,u),c=0),c+=this.size,this.finderPenaltyAddHistory(c,u),this.finderPenaltyCountPatterns(u)}finderPenaltyAddHistory(l,c){c[0]==0&&(l+=this.size),c.pop(),c.unshift(l)}};let n=e;n.MIN_VERSION=1,n.MAX_VERSION=40,n.PENALTY_N1=3,n.PENALTY_N2=3,n.PENALTY_N3=40,n.PENALTY_N4=10,n.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],n.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],t.QrCode=n;function r(l,c,u){if(c<0||c>31||l>>>c)throw new RangeError("Value out of range");for(let h=c-1;h>=0;h--)u.push(l>>>h&1)}function s(l,c){return(l>>>c&1)!=0}function i(l){if(!l)throw new Error("Assertion error")}const a=class{constructor(l,c,u){if(this.mode=l,this.numChars=c,this.bitData=u,c<0)throw new RangeError("Invalid argument");this.bitData=u.slice()}static makeBytes(l){let c=[];for(const u of l)r(u,8,c);return new a(a.Mode.BYTE,l.length,c)}static makeNumeric(l){if(!a.isNumeric(l))throw new RangeError("String contains non-numeric characters");let c=[];for(let u=0;u<l.length;){const h=Math.min(l.length-u,3);r(parseInt(l.substr(u,h),10),h*3+1,c),u+=h}return new a(a.Mode.NUMERIC,l.length,c)}static makeAlphanumeric(l){if(!a.isAlphanumeric(l))throw new RangeError("String contains unencodable characters in alphanumeric mode");let c=[],u;for(u=0;u+2<=l.length;u+=2){let h=a.ALPHANUMERIC_CHARSET.indexOf(l.charAt(u))*45;h+=a.ALPHANUMERIC_CHARSET.indexOf(l.charAt(u+1)),r(h,11,c)}return u<l.length&&r(a.ALPHANUMERIC_CHARSET.indexOf(l.charAt(u)),6,c),new a(a.Mode.ALPHANUMERIC,l.length,c)}static makeSegments(l){return l==""?[]:a.isNumeric(l)?[a.makeNumeric(l)]:a.isAlphanumeric(l)?[a.makeAlphanumeric(l)]:[a.makeBytes(a.toUtf8ByteArray(l))]}static makeEci(l){let c=[];if(l<0)throw new RangeError("ECI assignment value out of range");if(l<128)r(l,8,c);else if(l<16384)r(2,2,c),r(l,14,c);else if(l<1e6)r(6,3,c),r(l,21,c);else throw new RangeError("ECI assignment value out of range");return new a(a.Mode.ECI,0,c)}static isNumeric(l){return a.NUMERIC_REGEX.test(l)}static isAlphanumeric(l){return a.ALPHANUMERIC_REGEX.test(l)}getData(){return this.bitData.slice()}static getTotalBits(l,c){let u=0;for(const h of l){const f=h.mode.numCharCountBits(c);if(h.numChars>=1<<f)return 1/0;u+=4+f+h.bitData.length}return u}static toUtf8ByteArray(l){l=encodeURI(l);let c=[];for(let u=0;u<l.length;u++)l.charAt(u)!="%"?c.push(l.charCodeAt(u)):(c.push(parseInt(l.substr(u+1,2),16)),u+=2);return c}};let o=a;o.NUMERIC_REGEX=/^[0-9]*$/,o.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,o.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",t.QrSegment=o})(Tr||(Tr={}));(t=>{(e=>{const n=class{constructor(s,i){this.ordinal=s,this.formatBits=i}};let r=n;r.LOW=new n(0,1),r.MEDIUM=new n(1,0),r.QUARTILE=new n(2,3),r.HIGH=new n(3,2),e.Ecc=r})(t.QrCode||(t.QrCode={}))})(Tr||(Tr={}));(t=>{(e=>{const n=class{constructor(s,i){this.modeBits=s,this.numBitsCharCount=i}numCharCountBits(s){return this.numBitsCharCount[Math.floor((s+7)/17)]}};let r=n;r.NUMERIC=new n(1,[10,12,14]),r.ALPHANUMERIC=new n(2,[9,11,13]),r.BYTE=new n(4,[8,16,16]),r.KANJI=new n(8,[8,10,12]),r.ECI=new n(7,[0,0,0]),e.Mode=r})(t.QrSegment||(t.QrSegment={}))})(Tr||(Tr={}));var is=Tr;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var a0={L:is.QrCode.Ecc.LOW,M:is.QrCode.Ecc.MEDIUM,Q:is.QrCode.Ecc.QUARTILE,H:is.QrCode.Ecc.HIGH},o0=128,l0="L",c0="#FFFFFF",u0="#000000",d0=!1,sh=4,NP=.1;function h0(t,e=0){const n=[];return t.forEach(function(r,s){let i=null;r.forEach(function(a,o){if(!a&&i!==null){n.push(`M${i+e} ${s+e}h${o-i}v1H${i+e}z`),i=null;return}if(o===r.length-1){if(!a)return;i===null?n.push(`M${o+e},${s+e} h1v1H${o+e}z`):n.push(`M${i+e},${s+e} h${o+1-i}v1H${i+e}z`);return}a&&i===null&&(i=o)})}),n.join("")}function f0(t,e){return t.slice().map((n,r)=>r<e.y||r>=e.y+e.h?n:n.map((s,i)=>i<e.x||i>=e.x+e.w?s:!1))}function p0(t,e,n,r){if(r==null)return null;const s=n?sh:0,i=t.length+s*2,a=Math.floor(e*NP),o=i/e,l=(r.width||a)*o,c=(r.height||a)*o,u=r.x==null?t.length/2-l/2:r.x*o,h=r.y==null?t.length/2-c/2:r.y*o;let f=null;if(r.excavate){let m=Math.floor(u),p=Math.floor(h),v=Math.ceil(l+u-m),_=Math.ceil(c+h-p);f={x:m,y:p,w:v,h:_}}return{x:u,y:h,h:c,w:l,excavation:f}}var OP=function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0}();function RP(t){const e=t,{value:n,size:r=o0,level:s=l0,bgColor:i=c0,fgColor:a=u0,includeMargin:o=d0,style:l,imageSettings:c}=e,u=i0(e,["value","size","level","bgColor","fgColor","includeMargin","style","imageSettings"]),h=c==null?void 0:c.src,f=Ge.useRef(null),m=Ge.useRef(null),[p,v]=Ge.useState(!1);Ge.useEffect(()=>{if(f.current!=null){const y=f.current,g=y.getContext("2d");if(!g)return;let x=is.QrCode.encodeText(n,a0[s]).getModules();const k=o?sh:0,b=x.length+k*2,E=p0(x,r,o,c),j=m.current,N=E!=null&&j!==null&&j.complete&&j.naturalHeight!==0&&j.naturalWidth!==0;N&&E.excavation!=null&&(x=f0(x,E.excavation));const T=window.devicePixelRatio||1;y.height=y.width=r*T;const L=r/b*T;g.scale(L,L),g.fillStyle=i,g.fillRect(0,0,b,b),g.fillStyle=a,OP?g.fill(new Path2D(h0(x,k))):x.forEach(function(F,K){F.forEach(function(te,A){te&&g.fillRect(A+k,K+k,1,1)})}),N&&g.drawImage(j,E.x+k,E.y+k,E.w,E.h)}}),Ge.useEffect(()=>{v(!1)},[h]);const _=Iu({height:r,width:r},l);let w=null;return h!=null&&(w=Ge.createElement("img",{src:h,key:h,style:{display:"none"},onLoad:()=>{v(!0)},ref:m})),Ge.createElement(Ge.Fragment,null,Ge.createElement("canvas",Iu({style:_,height:r,width:r,ref:f},u)),w)}function m0(t){const e=t,{value:n,size:r=o0,level:s=l0,bgColor:i=c0,fgColor:a=u0,includeMargin:o=d0,imageSettings:l}=e,c=i0(e,["value","size","level","bgColor","fgColor","includeMargin","imageSettings"]);let u=is.QrCode.encodeText(n,a0[s]).getModules();const h=o?sh:0,f=u.length+h*2,m=p0(u,r,o,l);let p=null;l!=null&&m!=null&&(m.excavation!=null&&(u=f0(u,m.excavation)),p=Ge.createElement("image",{xlinkHref:l.src,height:m.h,width:m.w,x:m.x+h,y:m.y+h,preserveAspectRatio:"none"}));const v=h0(u,h);return Ge.createElement("svg",Iu({height:r,width:r,viewBox:`0 0 ${f} ${f}`},c),Ge.createElement("path",{fill:i,d:`M0,0 h${f}v${f}H0z`,shapeRendering:"crispEdges"}),Ge.createElement("path",{fill:a,d:v,shapeRendering:"crispEdges"}),p)}const AP=()=>{const[t,e]=S.useState([]),[n,r]=S.useState(!0),[s,i]=S.useState(""),[a,o]=S.useState(1),[l,c]=S.useState(0),[u,h]=S.useState(!1),[f,m]=S.useState(null),[p,v]=S.useState({no_rm:"",nama:"",tanggal_lahir:""}),[_,w]=S.useState(!1),[y,g]=S.useState(!1),[x,k]=S.useState(null),[b,E]=S.useState([]),{success:j,error:N}=mn();S.useEffect(()=>{T()},[a,s]);const T=async()=>{r(!0);try{let P=z.from("patients").select("*",{count:"exact"}).order("created_at",{ascending:!1}).range((a-1)*Tt,a*Tt-1);s&&(P=P.or(`no_rm.ilike.%${s}%,nama.ilike.%${s}%`));const{data:D,count:ee,error:Oe}=await P;if(Oe)throw Oe;const Re=D.map(gn=>gn.id),{data:rt}=await z.from("tracer").select("patient_id, status_lokasi, updated_at").in("patient_id",Re).order("updated_at",{ascending:!1}),ke={};rt==null||rt.forEach(gn=>{ke[gn.patient_id]||(ke[gn.patient_id]=gn.status_lokasi)});const Rr=D.map(gn=>({...gn,current_status:ke[gn.id]||null}));e(Rr),c(ee||0)}catch(P){N("Gagal memuat data pasien"),console.error(P)}r(!1)},L=wl(P=>{i(P),o(1)},300),F=()=>{m(null),v({no_rm:ej(),nama:"",tanggal_lahir:""}),h(!0)},K=P=>{m(P),v({no_rm:P.no_rm,nama:P.nama,tanggal_lahir:P.tanggal_lahir||""}),h(!0)},te=async P=>{if(P.preventDefault(),!p.no_rm||!p.nama){N("No RM dan Nama harus diisi");return}w(!0);try{if(f){const{error:D}=await z.from("patients").update({no_rm:p.no_rm,nama:p.nama,tanggal_lahir:p.tanggal_lahir||null,qr_code:pi(p.no_rm)}).eq("id",f.id);if(D)throw D;await z.rpc("log_activity",{p_aksi:"UPDATE_PATIENT",p_no_rm:p.no_rm,p_details:{nama:p.nama}}),j("Data pasien berhasil diperbarui")}else{const{error:D}=await z.from("patients").insert({no_rm:p.no_rm,nama:p.nama,tanggal_lahir:p.tanggal_lahir||null,qr_code:pi(p.no_rm)});if(D){if(D.code==="23505"){N("Nomor RM sudah terdaftar"),w(!1);return}throw D}await z.rpc("log_activity",{p_aksi:"CREATE_PATIENT",p_no_rm:p.no_rm,p_details:{nama:p.nama}}),j("Pasien baru berhasil ditambahkan")}h(!1),T()}catch(D){N("Gagal menyimpan data pasien"),console.error(D)}w(!1)},A=async P=>{if(confirm(`Hapus pasien ${P.nama} (${P.no_rm})?`))try{const{error:D}=await z.from("patients").delete().eq("id",P.id);if(D)throw D;await z.rpc("log_activity",{p_aksi:"DELETE_PATIENT",p_no_rm:P.no_rm,p_details:{nama:P.nama}}),j("Pasien berhasil dihapus"),T()}catch(D){N("Gagal menghapus pasien"),console.error(D)}},B=P=>{k(P),g(!0)},W=P=>{E(D=>D.find(Oe=>Oe.id===P.id)?D.filter(Oe=>Oe.id!==P.id):[...D,P])},C=()=>{b.length===t.length?E([]):E([...t])},O=Math.ceil(l/Tt);return d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"page-header",children:d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsxs("div",{children:[d.jsx("h1",{className:"page-title",children:"Manajemen Pasien"}),d.jsx("p",{className:"page-subtitle",children:"Kelola data pasien dan berkas rekam medis"})]}),d.jsxs("div",{className:"flex gap-sm",children:[b.length>0&&d.jsxs(nn,{to:"/admin/patients/print",state:{patients:b},className:"btn btn-secondary",children:[d.jsx(Cu,{size:18}),"Print QR (",b.length,")"]}),d.jsxs("button",{className:"btn btn-primary",onClick:F,children:[d.jsx(av,{size:18}),"Tambah Pasien"]})]})]})}),d.jsxs("div",{className:"page-content",children:[d.jsx("div",{className:"card mb-lg",children:d.jsx("div",{className:"card-body",children:d.jsxs("div",{className:"search-box",children:[d.jsx(Fn,{className:"search-box-icon",size:18}),d.jsx("input",{type:"text",className:"form-input",placeholder:"Cari berdasarkan No RM atau Nama...",onChange:P=>L(P.target.value)})]})})}),d.jsxs("div",{className:"card",children:[d.jsx("div",{className:"table-container",children:d.jsxs("table",{className:"table",children:[d.jsx("thead",{children:d.jsxs("tr",{children:[d.jsx("th",{style:{width:40},children:d.jsx("input",{type:"checkbox",checked:b.length===t.length&&t.length>0,onChange:C,className:"form-check-input"})}),d.jsx("th",{children:"No. RM"}),d.jsx("th",{children:"Nama Pasien"}),d.jsx("th",{children:"Tanggal Lahir"}),d.jsx("th",{children:"Usia"}),d.jsx("th",{children:"Status Lokasi"}),d.jsx("th",{style:{width:150},children:"Aksi"})]})}),d.jsx("tbody",{children:n?[...Array(5)].map((P,D)=>d.jsx("tr",{children:d.jsx("td",{colSpan:7,children:d.jsx("div",{className:"skeleton skeleton-text"})})},D)):t.length===0?d.jsx("tr",{children:d.jsx("td",{colSpan:7,children:d.jsxs("div",{className:"empty-state",children:[d.jsx(Vn,{className:"empty-state-icon"}),d.jsx("p",{className:"empty-state-title",children:"Tidak ada data"}),d.jsx("p",{className:"empty-state-description",children:s?"Tidak ditemukan pasien dengan kata kunci tersebut":"Belum ada data pasien"})]})})}):t.map(P=>d.jsxs("tr",{children:[d.jsx("td",{children:d.jsx("input",{type:"checkbox",checked:b.some(D=>D.id===P.id),onChange:()=>W(P),className:"form-check-input"})}),d.jsx("td",{children:d.jsx("span",{className:"font-semibold",style:{color:"var(--primary-600)"},children:P.no_rm})}),d.jsx("td",{children:P.nama}),d.jsx("td",{children:Kn(P.tanggal_lahir)}),d.jsx("td",{children:_l(P.tanggal_lahir)}),d.jsx("td",{children:P.current_status?d.jsx("span",{className:"badge",style:{backgroundColor:`${Rt(P.current_status,oe)}20`,color:Rt(P.current_status,oe)},children:Mt(P.current_status,oe)}):d.jsx("span",{className:"badge badge-gray",children:"Belum ada"})}),d.jsx("td",{children:d.jsxs("div",{className:"table-actions",children:[d.jsx(nn,{to:`/admin/patients/${P.id}`,className:"btn btn-icon btn-ghost btn-sm",title:"Lihat Detail",children:d.jsx(tv,{size:16})}),d.jsx("button",{className:"btn btn-icon btn-ghost btn-sm",title:"Lihat QR",onClick:()=>B(P),children:d.jsx(Ss,{size:16})}),d.jsx("button",{className:"btn btn-icon btn-ghost btn-sm",title:"Edit",onClick:()=>K(P),children:d.jsx(iv,{size:16})}),d.jsx("button",{className:"btn btn-icon btn-ghost btn-sm",title:"Hapus",onClick:()=>A(P),style:{color:"var(--error)"},children:d.jsx(lv,{size:16})})]})})]},P.id))})]})}),O>1&&d.jsx("div",{className:"card-footer",children:d.jsxs("div",{className:"pagination",children:[d.jsx("button",{className:"pagination-btn",disabled:a===1,onClick:()=>o(P=>P-1),children:d.jsx(Fd,{size:16})}),[...Array(O)].map((P,D)=>d.jsx("button",{className:`pagination-btn ${a===D+1?"active":""}`,onClick:()=>o(D+1),children:D+1},D)),d.jsx("button",{className:"pagination-btn",disabled:a===O,onClick:()=>o(P=>P+1),children:d.jsx(yl,{size:16})})]})})]})]}),u&&d.jsx("div",{className:"modal-overlay",onClick:()=>h(!1),children:d.jsxs("div",{className:"modal",onClick:P=>P.stopPropagation(),children:[d.jsxs("div",{className:"modal-header",children:[d.jsx("h3",{className:"modal-title",children:f?"Edit Pasien":"Tambah Pasien Baru"}),d.jsx("button",{className:"modal-close",onClick:()=>h(!1),children:d.jsx(jr,{size:20})})]}),d.jsxs("form",{onSubmit:te,children:[d.jsxs("div",{className:"modal-body",children:[d.jsxs("div",{className:"form-group",children:[d.jsx("label",{className:"form-label",children:"Nomor Rekam Medis"}),d.jsx("input",{type:"text",className:"form-input",value:p.no_rm,onChange:P=>v({...p,no_rm:P.target.value}),placeholder:"RM-XXXXXX",required:!0}),!f&&d.jsx("p",{className:"form-hint",children:"Nomor RM digenerate otomatis, bisa diubah manual"})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{className:"form-label",children:"Nama Pasien"}),d.jsx("input",{type:"text",className:"form-input",value:p.nama,onChange:P=>v({...p,nama:P.target.value}),placeholder:"Masukkan nama lengkap",required:!0})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{className:"form-label",children:"Tanggal Lahir"}),d.jsx("input",{type:"date",className:"form-input",value:p.tanggal_lahir,onChange:P=>v({...p,tanggal_lahir:P.target.value})})]})]}),d.jsxs("div",{className:"modal-footer",children:[d.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>h(!1),children:"Batal"}),d.jsx("button",{type:"submit",className:"btn btn-primary",disabled:_,children:_?"Menyimpan...":"Simpan"})]})]})]})}),y&&x&&d.jsx("div",{className:"modal-overlay",onClick:()=>g(!1),children:d.jsxs("div",{className:"modal",onClick:P=>P.stopPropagation(),style:{maxWidth:360},children:[d.jsxs("div",{className:"modal-header",children:[d.jsx("h3",{className:"modal-title",children:"QR Code"}),d.jsx("button",{className:"modal-close",onClick:()=>g(!1),children:d.jsx(jr,{size:20})})]}),d.jsxs("div",{className:"modal-body text-center",children:[d.jsx("div",{className:"qr-code-display",children:d.jsx(m0,{value:pi(x.no_rm),size:200,level:"H"})}),d.jsxs("div",{className:"qr-code-info",children:[d.jsx("div",{className:"qr-code-no-rm",children:x.no_rm}),d.jsx("div",{className:"text-secondary",children:x.nama})]})]}),d.jsx("div",{className:"modal-footer",children:d.jsxs("button",{className:"btn btn-primary btn-block",onClick:()=>{E([x]),g(!1)},children:[d.jsx(Cu,{size:18}),"Cetak QR Code"]})})]})})]})},MP=()=>{const{id:t}=kx(),e=Zn(),{profile:n}=It(),{success:r,error:s}=mn(),[i,a]=S.useState(null),[o,l]=S.useState([]),[c,u]=S.useState(!0),[h,f]=S.useState(!1),[m,p]=S.useState(null),[v,_]=S.useState("");S.useEffect(()=>{w()},[t]);const w=async()=>{u(!0);try{const{data:k,error:b}=await z.from("patients").select("*").eq("id",t).single();if(b)throw b;a(k),y()}catch(k){console.error("Error fetching data:",k),s("Gagal memuat data pasien")}u(!1)},y=async()=>{const{data:k,error:b}=await z.from("tracer").select(`
                *,
                profiles:petugas_id (nama)
            `).eq("patient_id",t).order("created_at",{ascending:!1});if(b){console.error("Error fetching history:",b);return}l(k||[])},g=async()=>{if(m){f(!0);try{const{data:k,error:b}=await z.from("tracer").insert({patient_id:t,status_lokasi:m,keterangan:v||null,petugas_id:n.id}).select().single();if(b)throw b;await z.rpc("log_activity",{p_aksi:"UPDATE_STATUS_ADMIN",p_no_rm:i.no_rm,p_details:{status_lokasi:m,keterangan:v||null}}),r("Status lokasi berhasil diperbarui"),p(null),_(""),y()}catch(k){console.error("Error updating status:",k),s("Gagal memperbarui status")}f(!1)}};if(c)return d.jsxs("div",{className:"page-content",children:[d.jsx("div",{className:"skeleton",style:{height:200,marginBottom:20}}),d.jsx("div",{className:"skeleton",style:{height:400}})]});if(!i)return d.jsxs("div",{className:"page-content text-center",children:[d.jsx("h3",{children:"Pasien tidak ditemukan"}),d.jsx("button",{className:"btn btn-primary mt-md",onClick:()=>e("/admin/patients"),children:"Kembali"})]});const x=o.length>0?o[0].status_lokasi:null;return d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"page-header",children:d.jsx("div",{className:"flex justify-between items-center",children:d.jsxs("div",{children:[d.jsxs("div",{className:"flex items-center gap-sm mb-xs",children:[d.jsx("button",{className:"btn btn-icon btn-ghost btn-sm",onClick:()=>e("/admin/patients"),children:d.jsx(ju,{size:20})}),d.jsx("h1",{className:"page-title",children:"Detail Pasien"})]}),d.jsx("p",{className:"page-subtitle ml-xl",children:"Informasi dan riwayat rekam medis"})]})})}),d.jsx("div",{className:"page-content",children:d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-lg",children:[d.jsxs("div",{className:"md:col-span-1 flex flex-col gap-lg",children:[d.jsx("div",{className:"card",children:d.jsxs("div",{className:"card-body",children:[d.jsx("div",{className:"mb-md",children:d.jsx("span",{className:"badge badge-primary font-mono text-lg",children:i.no_rm})}),d.jsx("h2",{className:"text-xl font-bold mb-sm",children:i.nama}),d.jsxs("div",{className:"text-secondary flex flex-col gap-xs text-sm",children:[d.jsxs("div",{className:"flex items-center gap-sm",children:[d.jsx(Zy,{size:16}),d.jsxs("span",{children:["Lahir: ",Kn(i.tanggal_lahir)]})]}),d.jsxs("div",{className:"flex items-center gap-sm",children:[d.jsx(qi,{size:16}),d.jsxs("span",{children:["Usia: ",_l(i.tanggal_lahir)]})]})]}),d.jsxs("div",{className:"mt-lg pt-md border-t border-gray-200",children:[d.jsx("p",{className:"text-sm font-medium text-secondary mb-xs",children:"Lokasi Terakhir"}),x?d.jsxs("div",{className:"flex items-center gap-sm",children:[d.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:Rt(x,oe)}}),d.jsx("span",{className:"font-semibold text-lg",children:Mt(x,oe)})]}):d.jsx("span",{className:"badge badge-gray",children:"Belum ada riwayat"})]})]})}),d.jsxs("div",{className:"card",children:[d.jsx("div",{className:"card-header",children:d.jsxs("h3",{className:"card-title text-lg font-semibold flex items-center gap-sm",children:[d.jsx(ks,{size:20}),"Update Lokasi"]})}),d.jsxs("div",{className:"card-body",children:[d.jsx("div",{className:"flex flex-col gap-sm",children:oe.map(k=>d.jsxs("button",{className:`btn justify-between ${m===k.value?"active":""}`,onClick:()=>p(k.value),style:{background:m===k.value?`${k.color}10`:"white",borderColor:m===k.value?k.color:"var(--border)",borderWidth:"1px",borderStyle:"solid",color:"var(--text-primary)"},children:[d.jsxs("div",{className:"flex items-center gap-sm",children:[d.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:k.color}}),k.label]}),m===k.value&&d.jsx(Ud,{size:16,style:{color:k.color}})]},k.value))}),d.jsxs("div",{className:"mt-md",children:[d.jsx("label",{className:"form-label",children:"Keterangan"}),d.jsx("textarea",{className:"form-input",rows:2,placeholder:"Catatan tambahan...",value:v,onChange:k=>_(k.target.value)})]}),d.jsx("button",{className:"btn btn-primary btn-block mt-md",disabled:!m||h,onClick:g,children:h?"Menyimpan...":"Simpan Perubahan"})]})]})]}),d.jsx("div",{className:"md:col-span-2",children:d.jsxs("div",{className:"card h-full",children:[d.jsxs("div",{className:"card-header flex justify-between items-center",children:[d.jsxs("h3",{className:"card-title text-lg font-semibold flex items-center gap-sm",children:[d.jsx(I1,{size:20}),"Riwayat Perpindahan"]}),d.jsxs("span",{className:"text-sm text-secondary",children:["Total: ",o.length," aktivitas"]})]}),d.jsx("div",{className:"card-body",children:o.length===0?d.jsx("div",{className:"empty-state",children:d.jsx("p",{children:"Belum ada riwayat perpindahan berkas."})}):d.jsx("div",{className:"relative pl-4 border-l-2 border-gray-100 space-y-8",children:o.map((k,b)=>{var E;return d.jsxs("div",{className:"relative",children:[d.jsx("div",{className:"absolute -left-[21px] top-1 w-3 h-3 rounded-full border-2 border-white box-content",style:{backgroundColor:Rt(k.status_lokasi,oe)}}),d.jsxs("div",{className:"flex flex-col gap-xs",children:[d.jsxs("div",{className:"flex items-baseline justify-between",children:[d.jsx("span",{className:"font-semibold",style:{color:Rt(k.status_lokasi,oe)},children:Mt(k.status_lokasi,oe)}),d.jsxs("span",{className:"text-xs text-secondary flex items-center gap-xs",children:[d.jsx(Vi,{size:12}),Io(k.created_at)]})]}),k.keterangan&&d.jsxs("div",{className:"bg-gray-50 p-sm rounded text-sm text-secondary max-w-full break-words",children:['"',k.keterangan,'"']}),d.jsxs("div",{className:"text-xs text-muted flex items-center gap-xs mt-xs",children:[d.jsx(qi,{size:12}),d.jsxs("span",{children:["Petugas: ",((E=k.profiles)==null?void 0:E.nama)||"Unknown"]})]})]})]},k.id)})})})]})})]})})]})},DP=()=>{const[t,e]=S.useState([]),[n,r]=S.useState(!0),[s,i]=S.useState(""),[a,o]=S.useState(1),[l,c]=S.useState(0),[u,h]=S.useState(!1),[f,m]=S.useState(!1),[p,v]=S.useState(null),[_,w]=S.useState(null),[y,g]=S.useState(""),[x,k]=S.useState({email:"",password:"",nama:"",role:"petugas"}),[b,E]=S.useState(!1),{success:j,error:N}=mn();S.useEffect(()=>{T()},[a,s]);const T=async()=>{r(!0);try{let C=z.from("profiles").select("*",{count:"exact"}).order("created_at",{ascending:!1}).range((a-1)*Tt,a*Tt-1);s&&(C=C.or(`nama.ilike.%${s}%,email.ilike.%${s}%`));const{data:O,count:P,error:D}=await C;if(D)throw D;e(O||[]),c(P||0)}catch(C){N("Gagal memuat data user"),console.error(C)}r(!1)},L=wl(C=>{i(C),o(1)},300),F=()=>{v(null),k({email:"",password:"",nama:"",role:"petugas"}),h(!0)},K=C=>{v(C),k({email:C.email,password:"",nama:C.nama,role:C.role}),h(!0)},te=async C=>{if(C.preventDefault(),!x.nama||!x.email){N("Nama dan Email harus diisi");return}if(!p&&!x.password){N("Password harus diisi untuk user baru");return}E(!0);try{if(p){const{error:O}=await z.from("profiles").update({nama:x.nama,role:x.role}).eq("id",p.id);if(O)throw O;await z.rpc("log_activity",{p_aksi:"UPDATE_USER",p_details:{email:x.email,role:x.role}}),j("User berhasil diperbarui")}else{const{data:O,error:P}=await z.auth.signUp({email:x.email,password:x.password,options:{data:{nama:x.nama,role:x.role}}});if(P)throw P;await z.rpc("log_activity",{p_aksi:"CREATE_USER",p_details:{email:x.email,role:x.role}}),j("User baru berhasil ditambahkan")}h(!1),T()}catch(O){N(O.message||"Gagal menyimpan user"),console.error(O)}E(!1)},A=async C=>{try{const{error:O}=await z.from("profiles").update({is_active:!C.is_active}).eq("id",C.id);if(O)throw O;j(C.is_active?"User dinonaktifkan":"User diaktifkan"),T()}catch(O){N("Gagal mengubah status user"),console.error(O)}},B=async C=>{confirm(`Hapus user ${C.nama} (${C.email})?`)&&N("Penghapusan user harus dilakukan melalui Supabase Dashboard")},W=Math.ceil(l/Tt);return d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"page-header",children:d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsxs("div",{children:[d.jsx("h1",{className:"page-title",children:"Manajemen User"}),d.jsx("p",{className:"page-subtitle",children:"Kelola akun pengguna dan hak akses"})]}),d.jsxs("button",{className:"btn btn-primary",onClick:F,children:[d.jsx(av,{size:18}),"Tambah User"]})]})}),d.jsxs("div",{className:"page-content",children:[d.jsx("div",{className:"card mb-lg",children:d.jsx("div",{className:"card-body",children:d.jsxs("div",{className:"search-box",children:[d.jsx(Fn,{className:"search-box-icon",size:18}),d.jsx("input",{type:"text",className:"form-input",placeholder:"Cari berdasarkan nama atau email...",onChange:C=>L(C.target.value)})]})})}),d.jsxs("div",{className:"card",children:[d.jsx("div",{className:"table-container",children:d.jsxs("table",{className:"table",children:[d.jsx("thead",{children:d.jsxs("tr",{children:[d.jsx("th",{children:"Nama"}),d.jsx("th",{children:"Email"}),d.jsx("th",{children:"Role"}),d.jsx("th",{children:"Status"}),d.jsx("th",{children:"Dibuat"}),d.jsx("th",{style:{width:150},children:"Aksi"})]})}),d.jsx("tbody",{children:n?[...Array(5)].map((C,O)=>d.jsx("tr",{children:d.jsx("td",{colSpan:6,children:d.jsx("div",{className:"skeleton skeleton-text"})})},O)):t.length===0?d.jsx("tr",{children:d.jsx("td",{colSpan:6,children:d.jsxs("div",{className:"empty-state",children:[d.jsx(Ao,{className:"empty-state-icon"}),d.jsx("p",{className:"empty-state-title",children:"Tidak ada data"}),d.jsx("p",{className:"empty-state-description",children:s?"Tidak ditemukan user dengan kata kunci tersebut":"Belum ada data user"})]})})}):t.map(C=>{var O;return d.jsxs("tr",{children:[d.jsx("td",{children:d.jsxs("div",{className:"flex items-center gap-md",children:[d.jsx("div",{className:"user-avatar",style:{background:C.role==="admin"?"linear-gradient(135deg, var(--primary-500), var(--primary-700))":"var(--gray-300)",color:C.role==="admin"?"white":"var(--gray-700)"},children:((O=C.nama)==null?void 0:O.charAt(0).toUpperCase())||"U"}),d.jsx("span",{className:"font-medium",children:C.nama})]})}),d.jsx("td",{children:C.email}),d.jsx("td",{children:d.jsx("span",{className:`badge ${C.role==="admin"?"badge-primary":"badge-gray"}`,children:C.role==="admin"?d.jsxs(d.Fragment,{children:[d.jsx(W1,{size:12})," Admin"]}):d.jsxs(d.Fragment,{children:[d.jsx(ov,{size:12})," Petugas"]})})}),d.jsx("td",{children:d.jsx("span",{className:`badge ${C.is_active?"badge-success":"badge-error"}`,children:C.is_active?"Aktif":"Nonaktif"})}),d.jsx("td",{children:Kn(C.created_at)}),d.jsx("td",{children:d.jsxs("div",{className:"table-actions",children:[d.jsx("button",{className:"btn btn-icon btn-ghost btn-sm",title:C.is_active?"Nonaktifkan":"Aktifkan",onClick:()=>A(C),children:C.is_active?d.jsx(V1,{size:16}):d.jsx(H1,{size:16})}),d.jsx("button",{className:"btn btn-icon btn-ghost btn-sm",title:"Edit",onClick:()=>K(C),children:d.jsx(iv,{size:16})}),d.jsx("button",{className:"btn btn-icon btn-ghost btn-sm",title:"Reset Password",onClick:()=>{w(C),g(""),m(!0)},style:{color:"var(--warning)"},children:d.jsx(nv,{size:16})}),d.jsx("button",{className:"btn btn-icon btn-ghost btn-sm",title:"Hapus",onClick:()=>B(C),style:{color:"var(--error)"},children:d.jsx(lv,{size:16})})]})})]},C.id)})})]})}),W>1&&d.jsx("div",{className:"card-footer",children:d.jsxs("div",{className:"pagination",children:[d.jsx("button",{className:"pagination-btn",disabled:a===1,onClick:()=>o(C=>C-1),children:d.jsx(Fd,{size:16})}),[...Array(W)].map((C,O)=>d.jsx("button",{className:`pagination-btn ${a===O+1?"active":""}`,onClick:()=>o(O+1),children:O+1},O)),d.jsx("button",{className:"pagination-btn",disabled:a===W,onClick:()=>o(C=>C+1),children:d.jsx(yl,{size:16})})]})})]})]}),u&&d.jsx("div",{className:"modal-overlay",onClick:()=>h(!1),children:d.jsxs("div",{className:"modal",onClick:C=>C.stopPropagation(),children:[d.jsxs("div",{className:"modal-header",children:[d.jsx("h3",{className:"modal-title",children:p?"Edit User":"Tambah User Baru"}),d.jsx("button",{className:"modal-close",onClick:()=>h(!1),children:d.jsx(jr,{size:20})})]}),d.jsxs("form",{onSubmit:te,children:[d.jsxs("div",{className:"modal-body",children:[d.jsxs("div",{className:"form-group",children:[d.jsx("label",{className:"form-label",children:"Nama Lengkap"}),d.jsx("input",{type:"text",className:"form-input",value:x.nama,onChange:C=>k({...x,nama:C.target.value}),placeholder:"Masukkan nama lengkap",required:!0})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{className:"form-label",children:"Email"}),d.jsx("input",{type:"email",className:"form-input",value:x.email,onChange:C=>k({...x,email:C.target.value}),placeholder:"nama@rumahsakit.com",disabled:!!p,required:!0}),p&&d.jsx("p",{className:"form-hint",children:"Email tidak dapat diubah"})]}),!p&&d.jsxs("div",{className:"form-group",children:[d.jsx("label",{className:"form-label",children:"Password"}),d.jsx("input",{type:"password",className:"form-input",value:x.password,onChange:C=>k({...x,password:C.target.value}),placeholder:"Minimal 6 karakter",minLength:6,required:!0})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{className:"form-label",children:"Role"}),d.jsxs("select",{className:"form-input form-select",value:x.role,onChange:C=>k({...x,role:C.target.value}),children:[d.jsx("option",{value:"petugas",children:"Petugas"}),d.jsx("option",{value:"admin",children:"Admin"})]})]})]}),d.jsxs("div",{className:"modal-footer",children:[d.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>h(!1),children:"Batal"}),d.jsx("button",{type:"submit",className:"btn btn-primary",disabled:b,children:b?"Menyimpan...":"Simpan"})]})]})]})}),f&&d.jsx("div",{className:"modal-overlay",onClick:()=>m(!1),children:d.jsxs("div",{className:"modal",onClick:C=>C.stopPropagation(),children:[d.jsxs("div",{className:"modal-header",children:[d.jsxs("h3",{className:"modal-title flex items-center gap-sm",children:[d.jsx(Bd,{size:20}),"Reset Password User"]}),d.jsx("button",{className:"modal-close",onClick:()=>m(!1),children:d.jsx(jr,{size:20})})]}),d.jsxs("form",{onSubmit:async C=>{if(C.preventDefault(),y.length<6){N("Password minimal 6 karakter");return}E(!0);try{const{error:O}=await z.rpc("reset_user_password",{target_user_id:_.id,new_password:y});if(O)throw O;j(`Password untuk ${_.nama} berhasil direset`),m(!1)}catch(O){N(O.message||"Gagal mereset password"),console.error(O)}E(!1)},children:[d.jsxs("div",{className:"modal-body",children:[d.jsx("div",{className:"alert alert-warning mb-md",children:d.jsxs("p",{className:"text-sm",children:["Anda akan mengubah password untuk user ",d.jsx("strong",{children:_==null?void 0:_.nama})," (",_==null?void 0:_.email,")."]})}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{className:"form-label",children:"Password Baru"}),d.jsx("input",{type:"password",className:"form-input",value:y,onChange:C=>g(C.target.value),placeholder:"Minimal 6 karakter",minLength:6,required:!0})]})]}),d.jsxs("div",{className:"modal-footer",children:[d.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>m(!1),children:"Batal"}),d.jsx("button",{type:"submit",className:"btn btn-primary",disabled:b,children:b?"Mereset...":"Reset Password"})]})]})]})})]})},IP=()=>{const[t,e]=S.useState([]),[n,r]=S.useState(!0),[s,i]=S.useState(1),[a,o]=S.useState(0),[l,c]=S.useState({search:"",user_id:"",status:"",date_from:"",date_to:""}),[u,h]=S.useState([]),{success:f,error:m}=mn();S.useEffect(()=>{p()},[]),S.useEffect(()=>{v()},[s,l]),S.useEffect(()=>{const b=z.channel("activity-logs-realtime").on("postgres_changes",{event:"INSERT",schema:"public",table:"activity_logs"},E=>{v()}).subscribe();return()=>{z.removeChannel(b)}},[]);const p=async()=>{const{data:b}=await z.from("profiles").select("id, nama").order("nama");h(b||[])},v=async()=>{r(!0);try{let b=z.from("activity_logs").select(`
          *,
          profiles:user_id (nama, email)
        `,{count:"exact"}).order("created_at",{ascending:!1}).range((s-1)*Tt,s*Tt-1);if(l.search&&(b=b.ilike("no_rm",`%${l.search}%`)),l.user_id&&(b=b.eq("user_id",l.user_id)),l.date_from&&(b=b.gte("created_at",l.date_from)),l.date_to){const T=new Date(l.date_to);T.setDate(T.getDate()+1),b=b.lt("created_at",T.toISOString())}const{data:E,count:j,error:N}=await b;if(N)throw N;e(E||[]),o(j||0)}catch(b){m("Gagal memuat log aktivitas"),console.error(b)}r(!1)},_=wl(b=>{c(E=>({...E,search:b})),i(1)},300),w=(b,E)=>{c(j=>({...j,[b]:E})),i(1)},y=()=>{c({search:"",user_id:"",status:"",date_from:"",date_to:""}),i(1)},g=async()=>{try{let b=z.from("activity_logs").select(`
          *,
          profiles:user_id (nama, email)
        `).order("created_at",{ascending:!1}).limit(1e3);if(l.search&&(b=b.ilike("no_rm",`%${l.search}%`)),l.user_id&&(b=b.eq("user_id",l.user_id)),l.date_from&&(b=b.gte("created_at",l.date_from)),l.date_to){const T=new Date(l.date_to);T.setDate(T.getDate()+1),b=b.lt("created_at",T.toISOString())}const{data:E,error:j}=await b;if(j)throw j;const N=E.map(T=>{var L,F,K,te;return{Tanggal:Io(T.created_at),User:((L=T.profiles)==null?void 0:L.nama)||"-",Email:((F=T.profiles)==null?void 0:F.email)||"-",Aksi:T.aksi,"No RM":T.no_rm||"-","Status Lokasi":(K=T.details)!=null&&K.status_lokasi?Mt(T.details.status_lokasi,oe):"-",Keterangan:((te=T.details)==null?void 0:te.keterangan)||"-"}});tj(N,`log-aktivitas-${new Date().toISOString().split("T")[0]}`),f("Data berhasil diexport")}catch(b){m("Gagal export data"),console.error(b)}},x=b=>b.includes("DELETE")?"badge-error":b.includes("CREATE")?"badge-success":b.includes("UPDATE")?"badge-warning":b==="LOGIN"||b==="LOGOUT"?"badge-primary":"badge-gray",k=Math.ceil(a/Tt);return d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"page-header",children:d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsxs("div",{children:[d.jsx("h1",{className:"page-title",children:"Log Aktivitas"}),d.jsx("p",{className:"page-subtitle",children:"Monitoring semua aktivitas sistem"})]}),d.jsxs("div",{className:"flex gap-sm",children:[d.jsxs("span",{className:"badge badge-primary",children:[d.jsx(F1,{size:12})," Realtime"]}),d.jsxs("button",{className:"btn btn-secondary",onClick:g,disabled:t.length===0,children:[d.jsx(ev,{size:18}),"Export CSV"]})]})]})}),d.jsxs("div",{className:"page-content",children:[d.jsxs("div",{className:"filter-bar",children:[d.jsx("div",{className:"filter-item",style:{flex:2},children:d.jsxs("div",{className:"search-box",children:[d.jsx(Fn,{className:"search-box-icon",size:18}),d.jsx("input",{type:"text",className:"form-input",placeholder:"Cari No RM...",onChange:b=>_(b.target.value)})]})}),d.jsx("div",{className:"filter-item",children:d.jsxs("select",{className:"form-input form-select",value:l.user_id,onChange:b=>w("user_id",b.target.value),children:[d.jsx("option",{value:"",children:"Semua User"}),u.map(b=>d.jsx("option",{value:b.id,children:b.nama},b.id))]})}),d.jsx("div",{className:"filter-item",children:d.jsx("input",{type:"date",className:"form-input",value:l.date_from,onChange:b=>w("date_from",b.target.value),placeholder:"Dari tanggal"})}),d.jsx("div",{className:"filter-item",children:d.jsx("input",{type:"date",className:"form-input",value:l.date_to,onChange:b=>w("date_to",b.target.value),placeholder:"Sampai tanggal"})}),(l.search||l.user_id||l.date_from||l.date_to)&&d.jsx("button",{className:"btn btn-ghost btn-sm",onClick:y,children:"Reset"})]}),d.jsxs("div",{className:"card",children:[d.jsx("div",{className:"table-container",children:d.jsxs("table",{className:"table",children:[d.jsx("thead",{children:d.jsxs("tr",{children:[d.jsx("th",{children:"Waktu"}),d.jsx("th",{children:"User"}),d.jsx("th",{children:"Aksi"}),d.jsx("th",{children:"No. RM"}),d.jsx("th",{children:"Detail"})]})}),d.jsx("tbody",{children:n?[...Array(10)].map((b,E)=>d.jsx("tr",{children:d.jsx("td",{colSpan:5,children:d.jsx("div",{className:"skeleton skeleton-text"})})},E)):t.length===0?d.jsx("tr",{children:d.jsx("td",{colSpan:5,children:d.jsxs("div",{className:"empty-state",children:[d.jsx(Ro,{className:"empty-state-icon"}),d.jsx("p",{className:"empty-state-title",children:"Tidak ada log"}),d.jsx("p",{className:"empty-state-description",children:"Belum ada aktivitas yang tercatat"})]})})}):t.map(b=>{var E,j,N;return d.jsxs("tr",{children:[d.jsx("td",{children:d.jsx("div",{className:"text-sm",children:Io(b.created_at)})}),d.jsx("td",{children:d.jsxs("div",{className:"flex items-center gap-sm",children:[d.jsx("div",{className:"user-avatar",style:{width:32,height:32,fontSize:"0.75rem",background:"var(--gray-200)",color:"var(--gray-700)"},children:((j=(E=b.profiles)==null?void 0:E.nama)==null?void 0:j.charAt(0).toUpperCase())||"S"}),d.jsx("span",{children:((N=b.profiles)==null?void 0:N.nama)||"System"})]})}),d.jsx("td",{children:d.jsx("span",{className:`badge ${x(b.aksi)}`,children:b.aksi})}),d.jsx("td",{children:b.no_rm?d.jsx("span",{className:"font-medium",style:{color:"var(--primary-600)"},children:b.no_rm}):d.jsx("span",{className:"text-muted",children:"-"})}),d.jsx("td",{children:b.details?d.jsxs("div",{className:"text-sm text-secondary",children:[b.details.status_lokasi&&d.jsxs("div",{children:["Lokasi: ",Mt(b.details.status_lokasi,oe)]}),b.details.keterangan&&d.jsxs("div",{children:["Note: ",b.details.keterangan]}),b.details.nama&&d.jsxs("div",{children:["Pasien: ",b.details.nama]}),b.details.email&&d.jsxs("div",{children:["Email: ",b.details.email]})]}):d.jsx("span",{className:"text-muted",children:"-"})})]},b.id)})})]})}),k>1&&d.jsx("div",{className:"card-footer",children:d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsxs("div",{className:"text-sm text-secondary",children:["Menampilkan ",(s-1)*Tt+1," - ",Math.min(s*Tt,a)," dari ",a]}),d.jsxs("div",{className:"pagination",children:[d.jsx("button",{className:"pagination-btn",disabled:s===1,onClick:()=>i(b=>b-1),children:d.jsx(Fd,{size:16})}),[...Array(Math.min(k,5))].map((b,E)=>{const j=E+1;return d.jsx("button",{className:`pagination-btn ${s===j?"active":""}`,onClick:()=>i(j),children:j},j)}),k>5&&d.jsx("span",{className:"px-md",children:"..."}),d.jsx("button",{className:"pagination-btn",disabled:s===k,onClick:()=>i(b=>b+1),children:d.jsx(yl,{size:16})})]})]})})]})]})]})},LP=()=>{var a;const t=Jn(),e=Zn(),n=((a=t.state)==null?void 0:a.patients)||[],r=S.useRef(null),s=()=>{const o=document.createElement("canvas"),l=o.getContext("2d"),c=5,u=120,h=15,f=35,m=u+h*2,p=u+f+h*2,v=Math.ceil(n.length/c);o.width=c*m,o.height=v*p,l.fillStyle="#ffffff",l.fillRect(0,0,o.width,o.height);const _=n.map((w,y)=>new Promise(g=>{const x=y%c,k=Math.floor(y/c),b=x*m+h,E=k*p+h,j=document.getElementById(`qr-canvas-${w.id}`);j&&l.drawImage(j,b+10,E,u,u),l.strokeStyle="#cbd5e1",l.setLineDash([4,4]),l.lineWidth=1,l.strokeRect(b,E-5,m-h,p-h+5),l.setLineDash([]),l.fillStyle="#1e293b",l.font="bold 11px Arial, sans-serif",l.textAlign="center",l.fillText(w.no_rm,b+m/2-h/2,E+u+15),l.fillStyle="#64748b",l.font="9px Arial, sans-serif";const N=w.nama.length>18?w.nama.substring(0,18)+"...":w.nama;l.fillText(N,b+m/2-h/2,E+u+28),g()}));Promise.all(_).then(()=>{setTimeout(()=>{const w=document.createElement("a");w.download=`label-qr-${new Date().toISOString().split("T")[0]}.png`,w.href=o.toDataURL("image/png",1),document.body.appendChild(w),w.click(),document.body.removeChild(w)},100)})},i=()=>{window.print()};return n.length===0?d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"page-header no-print",children:d.jsx("h1",{className:"page-title",children:"Print QR Code"})}),d.jsx("div",{className:"page-content",children:d.jsx("div",{className:"card",children:d.jsx("div",{className:"card-body",children:d.jsxs("div",{className:"empty-state",children:[d.jsx("p",{children:"Tidak ada pasien yang dipilih"}),d.jsxs("button",{className:"btn btn-primary mt-md",onClick:()=>e("/admin/patients"),children:[d.jsx(ju,{size:18}),"Kembali ke Daftar Pasien"]})]})})})})]}):d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"page-header no-print",children:d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsxs("div",{children:[d.jsx("h1",{className:"page-title",children:"Print QR Code"}),d.jsxs("p",{className:"page-subtitle",children:[n.length," label QR dipilih"]})]}),d.jsxs("div",{className:"flex gap-sm",children:[d.jsxs("button",{className:"btn btn-secondary",onClick:()=>e("/admin/patients"),children:[d.jsx(ju,{size:18}),"Kembali"]}),d.jsxs("button",{className:"btn btn-success",onClick:s,children:[d.jsx(ev,{size:18}),"Download Gambar"]}),d.jsxs("button",{className:"btn btn-primary",onClick:i,children:[d.jsx(Cu,{size:18}),"Preview Print"]})]})]})}),d.jsxs("div",{className:"page-content",children:[d.jsx("div",{className:"card no-print mb-md",children:d.jsxs("div",{className:"card-body",children:[d.jsxs("div",{className:"flex items-center gap-md",children:[d.jsx(Vn,{size:24,style:{color:"var(--primary-500)"}}),d.jsxs("div",{children:[d.jsx("h3",{style:{fontSize:"1rem",fontWeight:600},children:"Label QR Code untuk Berkas"}),d.jsx("p",{className:"text-sm text-secondary",children:"Ukuran kecil untuk ditempel pada berkas rekam medis"})]})]}),d.jsxs("div",{className:"mt-md",style:{padding:"12px",background:"var(--gray-100)",borderRadius:"var(--radius-md)"},children:[d.jsxs("p",{className:"text-sm",children:[d.jsx("strong",{children:"Download Gambar:"})," Simpan sebagai file PNG untuk dicetak nanti"]}),d.jsxs("p",{className:"text-sm mt-xs",children:[d.jsx("strong",{children:"Preview Print:"})," Buka dialog print browser untuk langsung cetak"]})]})]})}),d.jsxs("div",{className:"print-area",ref:r,children:[d.jsx("style",{children:`
              @media print {
                @page {
                  size: A4;
                  margin: 8mm;
                }
                
                body {
                  print-color-adjust: exact;
                  -webkit-print-color-adjust: exact;
                }
                
                .print-area {
                  display: block !important;
                }
                
                .print-qr-grid {
                  display: grid !important;
                  grid-template-columns: repeat(5, 1fr) !important;
                  gap: 4mm !important;
                  padding: 0 !important;
                }
                
                .print-qr-item {
                  page-break-inside: avoid;
                  border: 1px dashed #999 !important;
                  padding: 2mm !important;
                }
                
                .no-print {
                  display: none !important;
                }

                .page-header, .card.no-print {
                  display: none !important;
                }
              }
            `}),d.jsx("div",{className:"print-qr-grid",style:{display:"grid",gridTemplateColumns:"repeat(5, 1fr)",gap:"10px",padding:"16px",background:"white",borderRadius:"var(--radius-lg)"},children:n.map(o=>d.jsxs("div",{className:"print-qr-item",style:{textAlign:"center",padding:"10px",border:"1px dashed #e2e8f0",borderRadius:"4px",background:"white"},children:[d.jsx("div",{style:{position:"absolute",left:"-9999px",top:"-9999px"},children:d.jsx(RP,{id:`qr-canvas-${o.id}`,value:pi(o.no_rm),size:100,level:"H"})}),d.jsx(m0,{value:pi(o.no_rm),size:80,level:"H",style:{margin:"0 auto"}}),d.jsx("div",{style:{marginTop:"6px",fontWeight:600,fontSize:"10px",lineHeight:1.2,color:"#1e293b"},children:o.no_rm}),d.jsx("div",{style:{fontSize:"8px",color:"#64748b",marginTop:"2px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%"},children:o.nama})]},o.id))})]})]})]})},zP=()=>{var w;const{profile:t,updateProfile:e,updatePassword:n}=It(),{success:r,error:s}=mn(),[i,a]=S.useState((t==null?void 0:t.nama)||""),[o,l]=S.useState(""),[c,u]=S.useState(""),[h,f]=S.useState(""),[m,p]=S.useState(!1),v=async y=>{if(y.preventDefault(),!i.trim()){s("Nama tidak boleh kosong");return}p(!0);try{const{error:g}=await e({nama:i});if(g)throw g;r("Profil berhasil diperbarui")}catch(g){s("Gagal memperbarui profil"),console.error(g)}p(!1)},_=async y=>{if(y.preventDefault(),c.length<6){s("Password baru minimal 6 karakter");return}if(c!==h){s("Konfirmasi password tidak cocok");return}p(!0);try{const{error:g}=await n(c);if(g)throw g;r("Password berhasil diperbarui"),u(""),f("")}catch(g){s(g.message||"Gagal memperbarui password"),console.error(g)}p(!1)};return d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"page-header",children:d.jsxs("div",{children:[d.jsx("h1",{className:"page-title",children:"Profil Saya"}),d.jsx("p",{className:"page-subtitle",children:"Kelola informasi akun dan keamanan"})]})}),d.jsx("div",{className:"page-content",children:d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-lg",children:[d.jsxs("div",{className:"card",children:[d.jsx("div",{className:"card-header",children:d.jsxs("h3",{className:"card-title flex items-center gap-sm",children:[d.jsx(qi,{size:20}),"Informasi Akun"]})}),d.jsx("div",{className:"card-body",children:d.jsxs("form",{onSubmit:v,children:[d.jsxs("div",{className:"form-group",children:[d.jsx("label",{className:"form-label",children:"Email"}),d.jsx("input",{type:"email",className:"form-input",value:(t==null?void 0:t.email)||"Loading...",disabled:!0,style:{backgroundColor:"var(--gray-50)",cursor:"not-allowed"}}),d.jsx("p",{className:"form-hint",children:"Email tidak dapat diubah"})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{className:"form-label",children:"Nama Lengkap"}),d.jsx("input",{type:"text",className:"form-input",value:i,onChange:y=>a(y.target.value),placeholder:"Nama lengkap Anda",required:!0})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{className:"form-label",children:"Role"}),d.jsx("span",{className:"badge badge-primary inline-flex",children:(w=t==null?void 0:t.role)==null?void 0:w.toUpperCase()})]}),d.jsxs("button",{type:"submit",className:"btn btn-primary w-full mt-md",disabled:m,children:[d.jsx(Pu,{size:18}),"Simpan Perubahan"]})]})})]}),d.jsxs("div",{className:"card",children:[d.jsx("div",{className:"card-header",children:d.jsxs("h3",{className:"card-title flex items-center gap-sm",children:[d.jsx(Bd,{size:20}),"Ganti Password"]})}),d.jsx("div",{className:"card-body",children:d.jsxs("form",{onSubmit:_,children:[d.jsxs("div",{className:"form-group",children:[d.jsx("label",{className:"form-label",children:"Password Baru"}),d.jsx("input",{type:"password",className:"form-input",value:c,onChange:y=>u(y.target.value),placeholder:"Minimal 6 karakter",minLength:6,required:!0})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{className:"form-label",children:"Konfirmasi Password Baru"}),d.jsx("input",{type:"password",className:"form-input",value:h,onChange:y=>f(y.target.value),placeholder:"Ulangi password baru",minLength:6,required:!0})]}),d.jsx("div",{className:"alert alert-info mt-md",children:d.jsx("p",{className:"text-sm",children:"Pastikan password baru Anda aman dan mudah diingat."})}),d.jsxs("button",{type:"submit",className:"btn btn-primary w-full mt-md",disabled:m,children:[d.jsx(Pu,{size:18}),"Update Password"]})]})})]})]})})]})},$P=()=>{const[t,e]=S.useState(!1),[n,r]=S.useState(null),[s,i]=S.useState(!1);S.useEffect(()=>{const l=c=>{c.preventDefault(),e(!0),r(c)};return window.matchMedia("(display-mode: standalone)").matches&&i(!0),window.addEventListener("beforeinstallprompt",l),()=>window.removeEventListener("beforeinstallprompt",l)},[]);const a=l=>{l.preventDefault(),n&&(n.prompt(),n.userChoice.then(c=>{c.outcome==="accepted"&&e(!1),r(null)}))},o=()=>{e(!1)};return!t||s?null:d.jsx("div",{className:"pwa-install-banner",children:d.jsxs("div",{className:"pwa-content",children:[d.jsxs("div",{className:"pwa-text",children:[d.jsx("strong",{children:"Install Aplikasi"}),d.jsx("p",{children:"Install aplikasi ini untuk pengalaman yang lebih baik dan akses lebih cepat."})]}),d.jsxs("div",{className:"pwa-actions",children:[d.jsx("button",{className:"btn btn-ghost btn-sm",onClick:o,children:"Nanti"}),d.jsx("button",{className:"btn btn-primary btn-sm",onClick:a,children:"Install"})]})]})})},UP=()=>{const{profile:t}=It(),e=[{path:"/petugas",icon:L1,label:"Home",end:!0},{path:"/petugas/scan",icon:Ss,label:"Scan"},{path:"/petugas/search",icon:Fn,label:"Cari"},{path:"/petugas/history",icon:Vi,label:"Riwayat"},{path:"/petugas/profile",icon:qi,label:"Profil"}];return d.jsxs("div",{className:"mobile-layout",children:[d.jsxs("header",{className:"mobile-header",children:[d.jsx("div",{className:"mobile-header-title",children:"RM Tracer"}),d.jsxs("div",{className:"mobile-header-subtitle",children:["Selamat datang, ",(t==null?void 0:t.nama)||"Petugas"]})]}),d.jsx("main",{className:"mobile-content",children:d.jsx(Ny,{})}),d.jsx("nav",{className:"bottom-nav",children:e.map(n=>d.jsxs(Ry,{to:n.path,end:n.end,className:({isActive:r})=>`bottom-nav-item ${r?"active":""}`,children:[d.jsx(n.icon,{className:"bottom-nav-icon",size:24}),d.jsx("span",{children:n.label})]},n.path))})]})},FP=()=>{const{profile:t}=It(),[e,n]=S.useState({todayScans:0,weekScans:0}),[r,s]=S.useState([]),[i,a]=S.useState(!0);S.useEffect(()=>{o()},[t]);const o=async()=>{if(t!=null&&t.id){a(!0);try{const l=new Date;l.setHours(0,0,0,0);const c=new Date;c.setDate(c.getDate()-7),c.setHours(0,0,0,0);const{count:u}=await z.from("activity_logs").select("*",{count:"exact",head:!0}).eq("user_id",t.id).eq("aksi","UPDATE_STATUS").gte("created_at",l.toISOString()),{count:h}=await z.from("activity_logs").select("*",{count:"exact",head:!0}).eq("user_id",t.id).eq("aksi","UPDATE_STATUS").gte("created_at",c.toISOString());n({todayScans:u||0,weekScans:h||0});const{data:f}=await z.from("activity_logs").select("*").eq("user_id",t.id).in("aksi",["UPDATE_STATUS","SCAN_QR"]).order("created_at",{ascending:!1}).limit(5);s(f||[])}catch(l){console.error("Error fetching data:",l)}a(!1)}};return d.jsxs("div",{className:"flex flex-col gap-lg",children:[d.jsxs("div",{className:"grid grid-cols-2 gap-md",children:[d.jsxs("div",{className:"stat-card",children:[d.jsx("div",{className:"stat-value",children:e.todayScans}),d.jsx("div",{className:"stat-label",children:"Scan Hari Ini"}),d.jsx(cv,{className:"stat-icon",size:40})]}),d.jsxs("div",{className:"stat-card success",children:[d.jsx("div",{className:"stat-value",children:e.weekScans}),d.jsx("div",{className:"stat-label",children:"Scan Minggu Ini"}),d.jsx(Vn,{className:"stat-icon",size:40})]})]}),d.jsxs(nn,{to:"/petugas/scan",className:"btn btn-action",children:[d.jsx(Ss,{size:32}),d.jsx("span",{children:"Scan QR Code"})]}),d.jsxs("div",{className:"card",children:[d.jsxs("div",{className:"card-header flex justify-between items-center",children:[d.jsx("h3",{style:{fontSize:"1rem",fontWeight:600},children:"Scan Terakhir"}),d.jsxs(nn,{to:"/petugas/history",className:"btn btn-ghost btn-sm",children:[d.jsx(Vi,{size:16}),"Lihat Semua"]})]}),d.jsx("div",{className:"card-body",style:{padding:0},children:i?d.jsx("div",{style:{padding:"var(--spacing-md)"},children:[1,2,3].map(l=>d.jsx("div",{className:"skeleton skeleton-text mb-sm"},l))}):r.length===0?d.jsxs("div",{className:"empty-state",style:{padding:"var(--spacing-xl)"},children:[d.jsx(Ss,{size:40,style:{opacity:.3}}),d.jsx("p",{className:"text-secondary mt-md",children:"Belum ada scan hari ini"}),d.jsx("p",{className:"text-sm text-muted",children:"Mulai scan untuk melacak berkas"})]}):d.jsx("div",{className:"recent-list",style:{padding:"var(--spacing-sm)"},children:r.map(l=>{var c,u;return d.jsxs(nn,{to:"/petugas/scan",state:{noRm:l.no_rm},className:"recent-item",children:[d.jsx("div",{className:"recent-item-dot",style:{backgroundColor:(c=l.details)!=null&&c.status_lokasi?Rt(l.details.status_lokasi,oe):"var(--gray-400)"}}),d.jsxs("div",{className:"recent-item-content",children:[d.jsx("div",{className:"recent-item-title",children:l.no_rm}),d.jsx("div",{className:"recent-item-subtitle",children:(u=l.details)!=null&&u.status_lokasi?Mt(l.details.status_lokasi,oe):l.aksi})]}),d.jsx("div",{className:"recent-item-time",children:xv(l.created_at)})]},l.id)})})})]}),d.jsxs("div",{className:"grid grid-cols-2 gap-md",children:[d.jsx(nn,{to:"/petugas/search",className:"card",style:{textDecoration:"none"},children:d.jsxs("div",{className:"card-body text-center",children:[d.jsx(Vn,{size:32,style:{color:"var(--primary-500)",marginBottom:8}}),d.jsx("div",{className:"font-medium",children:"Cari Manual"}),d.jsx("div",{className:"text-sm text-secondary",children:"Input No. RM"})]})}),d.jsx(nn,{to:"/petugas/history",className:"card",style:{textDecoration:"none"},children:d.jsxs("div",{className:"card-body text-center",children:[d.jsx(Vi,{size:32,style:{color:"var(--primary-500)",marginBottom:8}}),d.jsx("div",{className:"font-medium",children:"Riwayat"}),d.jsx("div",{className:"text-sm text-secondary",children:"Lihat aktivitas"})]})})]})]})},BP=()=>{const t=Jn(),{profile:e}=It(),{success:n,error:r,warning:s}=mn(),[i,a]=S.useState(!1),[o,l]=S.useState(null),[c,u]=S.useState(null),[h,f]=S.useState(null),[m,p]=S.useState(""),[v,_]=S.useState(!1),[w,y]=S.useState(null),[g,x]=S.useState(null),k=S.useRef(null),b=S.useRef(null),E=S.useRef(null);S.useEffect(()=>{var A;return(A=t.state)!=null&&A.noRm?L(t.state.noRm):j(),()=>{T(),g&&clearTimeout(g)}},[]);const j=async()=>{try{a(!0),l(null),f(null),p("");const A=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment",width:{ideal:1280},height:{ideal:720}}});b.current=A,k.current&&(k.current.srcObject=A,k.current.play(),N())}catch(A){console.error("Camera error:",A),r("Tidak dapat mengakses kamera. Pastikan izin kamera diaktifkan."),a(!1)}},N=()=>{if("BarcodeDetector"in window){const A=new BarcodeDetector({formats:["qr_code"]});E.current=setInterval(async()=>{if(k.current&&k.current.readyState===4)try{const B=await A.detect(k.current);if(B.length>0){const W=B[0].rawValue;T(),L(W)}}catch{}},200)}else s("QR Scanner tidak didukung browser ini. Gunakan pencarian manual.")},T=()=>{E.current&&(clearInterval(E.current),E.current=null),b.current&&(b.current.getTracks().forEach(A=>A.stop()),b.current=null),a(!1)},L=async A=>{const B=ZE(A);if(!B){r("QR Code tidak valid"),j();return}try{const{data:W,error:C}=await z.from("patients").select("*").eq("no_rm",B).single();if(C||!W){r(`Pasien dengan No RM ${B} tidak ditemukan`),j();return}const{data:O}=await z.from("tracer").select("*").eq("patient_id",W.id).order("updated_at",{ascending:!1}).limit(1).single();l(W),u((O==null?void 0:O.status_lokasi)||null),l(W),u((O==null?void 0:O.status_lokasi)||null)}catch(W){console.error("Error fetching patient:",W),r("Gagal memuat data pasien"),j()}},F=async A=>{if(!(!o||!e)){f(A),_(!0);try{const{data:B,error:W}=await z.from("tracer").insert({patient_id:o.id,status_lokasi:A,keterangan:m||null,petugas_id:e.id}).select().single();if(W)throw W;await z.rpc("log_activity",{p_aksi:"UPDATE_STATUS",p_no_rm:o.no_rm,p_details:{status_lokasi:A,keterangan:m||null,previous_status:c}}),y({id:B.id,patient:o,oldStatus:c,newStatus:A,keterangan:m}),u(A),n(`Status diperbarui ke ${Mt(A,oe)}`,{duration:Kf,onUndo:()=>K(B.id,c)});const C=setTimeout(()=>{y(null)},Kf);x(C),setTimeout(()=>{f(null),p("")},1e3)}catch(B){console.error("Error updating status:",B),r("Gagal memperbarui status"),f(null)}_(!1)}},K=async(A,B)=>{try{await z.from("tracer").delete().eq("id",A),u(B),y(null),g&&(clearTimeout(g),x(null)),n("Perubahan dibatalkan")}catch(W){console.error("Error undoing:",W),r("Gagal membatalkan perubahan")}},te=()=>{l(null),u(null),f(null),p(""),j()};return d.jsx("div",{className:"flex flex-col gap-md",children:i?d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"qr-scanner-container",children:[d.jsx("video",{ref:k,autoPlay:!0,playsInline:!0,muted:!0,style:{width:"100%",borderRadius:"var(--radius-xl)"}}),d.jsx("div",{className:"qr-scanner-overlay",children:d.jsx("div",{className:"qr-scanner-frame"})})]}),d.jsxs("div",{className:"text-center flex flex-col items-center gap-sm mt-md",children:[d.jsx("p",{className:"text-secondary",children:"Arahkan kamera ke QR Code"}),d.jsxs("div",{className:"flex gap-md",children:[d.jsxs("button",{className:"btn btn-ghost",onClick:T,children:[d.jsx(jr,{size:18}),"Batal"]}),d.jsxs("button",{className:"btn btn-outline-primary",onClick:()=>{T(),window.location.href="/petugas/search"},children:[d.jsx(Fn,{size:18}),"Cari Manual"]})]})]})]}):o?d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"patient-card",children:[d.jsxs("div",{className:"patient-card-header",children:[d.jsx("span",{className:"patient-no-rm",children:o.no_rm}),d.jsxs("button",{className:"btn btn-ghost btn-sm",onClick:te,children:[d.jsx(B1,{size:16}),"Scan Lagi"]})]}),d.jsx("h2",{className:"patient-name",children:o.nama}),d.jsxs("div",{className:"patient-info-row",children:[d.jsx(Zy,{size:16}),d.jsx("span",{children:Kn(o.tanggal_lahir)}),d.jsx("span",{children:""}),d.jsx("span",{children:_l(o.tanggal_lahir)})]}),c&&d.jsxs("div",{className:"patient-current-status",children:[d.jsx("div",{className:"patient-current-status-dot",style:{backgroundColor:Rt(c,oe)}}),d.jsxs("span",{className:"patient-current-status-label",children:["Lokasi saat ini: ",Mt(c,oe)]})]})]}),d.jsxs("div",{children:[d.jsxs("label",{className:"form-label mb-md",children:[d.jsx(ks,{size:16,style:{display:"inline",marginRight:4}}),"Pilih Lokasi Tujuan"]}),d.jsx("div",{className:"status-buttons",children:oe.map(A=>d.jsxs("button",{className:`status-btn ${h===A.value?"active":""}`,onClick:()=>F(A.value),disabled:v||h===A.value,style:{borderColor:h===A.value?A.color:void 0,background:h===A.value?`${A.color}10`:void 0},children:[d.jsx("div",{className:"status-btn-indicator",style:{backgroundColor:A.color}}),d.jsx("div",{children:d.jsx("div",{className:"status-btn-label",children:A.label})}),h===A.value&&d.jsx(Ud,{size:20,style:{color:A.color,marginLeft:"auto"}})]},A.value))})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{className:"form-label",children:"Keterangan (Opsional)"}),d.jsx("textarea",{className:"form-input form-textarea",value:m,onChange:A=>p(A.target.value),placeholder:"Tambahkan catatan jika diperlukan...",rows:2})]})]}):d.jsxs("div",{className:"text-center",style:{padding:"var(--spacing-2xl)"},children:[d.jsx(Yf,{size:64,style:{color:"var(--text-muted)",marginBottom:16}}),d.jsx("h3",{children:"Memuat Scanner..."}),d.jsx("p",{className:"text-secondary",children:"Izinkan akses kamera untuk memulai scan"}),d.jsxs("button",{className:"btn btn-primary mt-lg",onClick:j,children:[d.jsx(Yf,{size:18}),"Mulai Scan"]})]})})},WP=()=>{const t=Zn(),{error:e}=mn(),[n,r]=S.useState(""),[s,i]=S.useState([]),[a,o]=S.useState(!1),[l,c]=S.useState(!1),h=wl(async p=>{if(!p||p.length<2){i([]),c(!1);return}o(!0),c(!0);try{const{data:v,error:_}=await z.from("patients").select("*").or(`no_rm.ilike.%${p}%,nama.ilike.%${p}%`).order("created_at",{ascending:!1}).limit(20);if(_)throw _;const w=v.map(k=>k.id),{data:y}=await z.from("tracer").select("patient_id, status_lokasi").in("patient_id",w).order("updated_at",{ascending:!1}),g={};y==null||y.forEach(k=>{g[k.patient_id]||(g[k.patient_id]=k.status_lokasi)});const x=v.map(k=>({...k,current_status:g[k.id]||null}));i(x)}catch(v){console.error("Search error:",v),e("Gagal mencari pasien")}o(!1)},300),f=p=>{const v=p.target.value;r(v),h(v)},m=p=>{t("/petugas/scan",{state:{noRm:p.no_rm}})};return d.jsxs("div",{className:"flex flex-col gap-md",children:[d.jsxs("div",{className:"flex gap-sm",children:[d.jsxs("div",{className:"search-box flex-1",children:[d.jsx(Fn,{className:"search-box-icon",size:20}),d.jsx("input",{type:"text",className:"form-input",placeholder:"Cari No. RM atau nama pasien...",value:n,onChange:f,autoFocus:!0,style:{fontSize:"1rem",padding:"1rem 1rem 1rem 3rem"}})]}),d.jsxs("button",{className:"btn btn-primary",onClick:()=>t("/petugas/scan"),style:{aspectRatio:"1/1",padding:0,width:"48px"},title:"Scan QR Code",children:[d.jsx(Fn,{size:24,className:"hidden"})," ",d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[d.jsx("rect",{width:"5",height:"5",x:"3",y:"3"}),d.jsx("rect",{width:"5",height:"5",x:"16",y:"3"}),d.jsx("rect",{width:"5",height:"5",x:"3",y:"16"}),d.jsx("path",{d:"M21 16h-3a2 2 0 0 0-2 2v3"}),d.jsx("path",{d:"M21 21v.01"}),d.jsx("path",{d:"M12 7v3a2 2 0 0 1-2 2H7"}),d.jsx("path",{d:"M3 12h.01"}),d.jsx("path",{d:"M12 3h.01"}),d.jsx("path",{d:"M12 16v.01"}),d.jsx("path",{d:"M16 12h1"}),d.jsx("path",{d:"M21 12v.01"}),d.jsx("path",{d:"M12 21v-1"})]})]})]}),a?d.jsx("div",{className:"flex flex-col gap-sm",children:[1,2,3].map(p=>d.jsx("div",{className:"card",children:d.jsxs("div",{className:"card-body",children:[d.jsx("div",{className:"skeleton skeleton-text",style:{width:"40%"}}),d.jsx("div",{className:"skeleton skeleton-text mt-sm"})]})},p))}):s.length>0?d.jsx("div",{className:"flex flex-col gap-sm",children:s.map(p=>d.jsx("div",{className:"card",onClick:()=>m(p),style:{cursor:"pointer"},children:d.jsxs("div",{className:"card-body",children:[d.jsxs("div",{className:"flex justify-between items-start",children:[d.jsxs("div",{children:[d.jsx("span",{className:"badge badge-primary mb-xs",style:{fontSize:"0.75rem"},children:p.no_rm}),d.jsx("h3",{style:{fontSize:"1rem",fontWeight:600},children:p.nama}),d.jsxs("div",{className:"flex items-center gap-sm text-sm text-secondary mt-xs",children:[d.jsx("span",{children:Kn(p.tanggal_lahir)}),d.jsx("span",{children:""}),d.jsx("span",{children:_l(p.tanggal_lahir)})]})]}),p.current_status&&d.jsxs("div",{className:"badge",style:{backgroundColor:`${Rt(p.current_status,oe)}20`,color:Rt(p.current_status,oe)},children:[d.jsx(ks,{size:12}),Mt(p.current_status,oe)]})]}),d.jsx("div",{className:"mt-sm pt-sm border-t border-gray-100 flex justify-end",children:d.jsxs("button",{className:"btn btn-sm btn-outline-primary",onClick:v=>{v.stopPropagation(),m(p)},children:[d.jsx(ks,{size:14}),"Update Lokasi"]})})]})},p.id))}):l?d.jsxs("div",{className:"empty-state",children:[d.jsx(Vn,{size:48,style:{opacity:.3}}),d.jsx("p",{className:"empty-state-title mt-md",children:"Tidak ditemukan"}),d.jsxs("p",{className:"empty-state-description",children:['Tidak ada pasien dengan kata kunci "',n,'"']})]}):d.jsxs("div",{className:"empty-state",children:[d.jsx(Fn,{size:48,style:{opacity:.3}}),d.jsx("p",{className:"text-secondary mt-md",children:"Ketik minimal 2 karakter untuk mencari"})]})]})},HP=()=>{const{profile:t}=It(),[e,n]=S.useState([]),[r,s]=S.useState(!0),[i,a]=S.useState("today");S.useEffect(()=>{t!=null&&t.id&&o()},[t,i]);const o=async()=>{s(!0);try{let c=z.from("activity_logs").select("*").eq("user_id",t.id).in("aksi",["UPDATE_STATUS","SCAN_QR"]).order("created_at",{ascending:!1}).limit(50);const u=new Date;if(i==="today"){const p=new Date;p.setHours(0,0,0,0),c=c.gte("created_at",p.toISOString())}else if(i==="week"){const p=new Date;p.setDate(p.getDate()-7),c=c.gte("created_at",p.toISOString())}else if(i==="month"){const p=new Date;p.setMonth(p.getMonth()-1),c=c.gte("created_at",p.toISOString())}const{data:h,error:f}=await c;if(f)throw f;const m={};h==null||h.forEach(p=>{const v=Kn(p.created_at,"yyyy-MM-dd");m[v]||(m[v]=[]),m[v].push(p)}),n(Object.entries(m).map(([p,v])=>({date:p,dateLabel:Kn(p,"EEEE, dd MMMM yyyy"),items:v})))}catch(c){console.error("Error fetching history:",c)}s(!1)},l=[{value:"today",label:"Hari Ini"},{value:"week",label:"Minggu Ini"},{value:"month",label:"Bulan Ini"}];return d.jsxs("div",{className:"flex flex-col gap-md",children:[d.jsx("div",{className:"flex gap-sm",children:l.map(c=>d.jsx("button",{className:`btn btn-sm ${i===c.value?"btn-primary":"btn-secondary"}`,onClick:()=>a(c.value),children:c.label},c.value))}),r?d.jsx("div",{className:"flex flex-col gap-md",children:[1,2,3].map(c=>d.jsxs("div",{children:[d.jsx("div",{className:"skeleton skeleton-text mb-sm",style:{width:"50%"}}),d.jsx("div",{className:"card",children:d.jsxs("div",{className:"card-body",children:[d.jsx("div",{className:"skeleton skeleton-text"}),d.jsx("div",{className:"skeleton skeleton-text mt-sm",style:{width:"70%"}})]})})]},c))}):e.length===0?d.jsxs("div",{className:"empty-state",children:[d.jsx(Vi,{size:48,style:{opacity:.3}}),d.jsx("p",{className:"empty-state-title mt-md",children:"Belum ada riwayat"}),d.jsx("p",{className:"empty-state-description",children:"Aktivitas scan Anda akan muncul di sini"})]}):d.jsx("div",{className:"flex flex-col gap-lg",children:e.map(c=>d.jsxs("div",{children:[d.jsx("h3",{className:"text-sm font-semibold text-secondary mb-sm",style:{paddingLeft:4},children:c.dateLabel}),d.jsx("div",{className:"card",children:d.jsx("div",{style:{padding:0},children:c.items.map((u,h)=>{var f,m,p;return d.jsxs(nn,{to:"/petugas/scan",state:{noRm:u.no_rm},className:"flex items-center gap-md",style:{padding:"var(--spacing-md)",borderBottom:h<c.items.length-1?"1px solid var(--border)":"none",textDecoration:"none",color:"inherit"},children:[d.jsx("div",{style:{width:40,height:40,borderRadius:"var(--radius-lg)",background:(f=u.details)!=null&&f.status_lokasi?`${Rt(u.details.status_lokasi,oe)}20`:"var(--gray-100)",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:u.aksi==="UPDATE_STATUS"?d.jsx(ks,{size:18,style:{color:(m=u.details)!=null&&m.status_lokasi?Rt(u.details.status_lokasi,oe):"var(--gray-500)"}}):d.jsx(Vn,{size:18,style:{color:"var(--gray-500)"}})}),d.jsxs("div",{style:{flex:1,minWidth:0},children:[d.jsx("div",{className:"font-medium",children:u.no_rm}),d.jsx("div",{className:"text-sm text-secondary",children:u.aksi==="UPDATE_STATUS"&&((p=u.details)!=null&&p.status_lokasi)?Mt(u.details.status_lokasi,oe):"Scan QR"})]}),d.jsx("div",{className:"text-sm text-muted",style:{flexShrink:0},children:Io(u.created_at).split(", ")[1]}),d.jsx(yl,{size:16,style:{color:"var(--text-muted)",flexShrink:0}})]},u.id)})})})]},c.date))})]})},VP=()=>{const t=Zn(),{profile:e,signOut:n,updateProfile:r,updatePassword:s}=It(),{success:i,error:a}=mn(),[o,l]=S.useState(!1),[c,u]=S.useState(!1),[h,f]=S.useState(!1),[m,p]=S.useState(!1),[v,_]=S.useState({nama:(e==null?void 0:e.nama)||""}),[w,y]=S.useState({newPassword:"",confirmPassword:""}),g=async E=>{if(E.preventDefault(),!v.nama){a("Nama harus diisi");return}f(!0);const{error:j}=await r({nama:v.nama});j?a("Gagal memperbarui profil"):(i("Profil berhasil diperbarui"),l(!1)),f(!1)},x=async E=>{if(E.preventDefault(),w.newPassword.length<6){a("Password minimal 6 karakter");return}if(w.newPassword!==w.confirmPassword){a("Password tidak cocok");return}f(!0);const{error:j}=await s(w.newPassword);j?a("Gagal mengubah password"):(i("Password berhasil diubah"),u(!1),y({newPassword:"",confirmPassword:""})),f(!1)},k=async()=>{confirm("Apakah Anda yakin ingin keluar aplikasi?")&&(p(!0),await new Promise(E=>setTimeout(E,800)),await n(),t("/login"))},b=E=>E?E.split(" ").map(j=>j[0]).join("").toUpperCase().slice(0,2):"U";return d.jsxs("div",{className:"flex flex-col gap-lg",children:[m&&d.jsx(jl,{}),d.jsx("div",{className:"card",children:d.jsxs("div",{className:"card-body text-center",children:[d.jsx("div",{style:{width:80,height:80,borderRadius:"var(--radius-full)",background:"linear-gradient(135deg, var(--primary-500), var(--primary-700))",color:"white",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"2rem",fontWeight:600,margin:"0 auto var(--spacing-md)"},children:b(e==null?void 0:e.nama)}),d.jsx("h2",{style:{fontSize:"1.25rem",fontWeight:600},children:(e==null?void 0:e.nama)||"User"}),d.jsxs("div",{className:"flex items-center justify-center gap-sm text-secondary mt-xs",children:[d.jsx(sv,{size:14}),d.jsx("span",{children:e==null?void 0:e.email})]}),d.jsxs("div",{className:"badge badge-primary mt-md",style:{margin:"0 auto"},children:[d.jsx(ov,{size:12}),(e==null?void 0:e.role)==="admin"?"Administrator":"Petugas"]})]})}),d.jsxs("div",{className:"card",children:[d.jsxs("div",{className:"card-header flex justify-between items-center",children:[d.jsx("h3",{style:{fontSize:"1rem",fontWeight:600},children:"Informasi Profil"}),!o&&d.jsx("button",{className:"btn btn-ghost btn-sm",onClick:()=>l(!0),children:"Edit"})]}),d.jsx("div",{className:"card-body",children:o?d.jsxs("form",{onSubmit:g,children:[d.jsxs("div",{className:"form-group",children:[d.jsx("label",{className:"form-label",children:"Nama Lengkap"}),d.jsx("input",{type:"text",className:"form-input",value:v.nama,onChange:E=>_({...v,nama:E.target.value}),required:!0})]}),d.jsxs("div",{className:"flex gap-sm",children:[d.jsx("button",{type:"button",className:"btn btn-secondary flex-1",onClick:()=>{l(!1),_({nama:(e==null?void 0:e.nama)||""})},children:"Batal"}),d.jsxs("button",{type:"submit",className:"btn btn-primary flex-1",disabled:h,children:[d.jsx(Pu,{size:16}),h?"Menyimpan...":"Simpan"]})]})]}):d.jsxs("div",{className:"flex items-center gap-md",children:[d.jsx(qi,{size:20,style:{color:"var(--text-muted)"}}),d.jsxs("div",{children:[d.jsx("div",{className:"text-sm text-secondary",children:"Nama"}),d.jsx("div",{className:"font-medium",children:e==null?void 0:e.nama})]})]})})]}),d.jsxs("div",{className:"card",children:[d.jsxs("div",{className:"card-header flex justify-between items-center",children:[d.jsx("h3",{style:{fontSize:"1rem",fontWeight:600},children:"Keamanan"}),!c&&d.jsxs("button",{className:"btn btn-ghost btn-sm",onClick:()=>u(!0),children:[d.jsx(nv,{size:14}),"Ganti Password"]})]}),c&&d.jsx("div",{className:"card-body",children:d.jsxs("form",{onSubmit:x,children:[d.jsxs("div",{className:"form-group",children:[d.jsx("label",{className:"form-label",children:"Password Baru"}),d.jsx("input",{type:"password",className:"form-input",value:w.newPassword,onChange:E=>y({...w,newPassword:E.target.value}),placeholder:"Minimal 6 karakter",minLength:6,required:!0})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{className:"form-label",children:"Konfirmasi Password"}),d.jsx("input",{type:"password",className:"form-input",value:w.confirmPassword,onChange:E=>y({...w,confirmPassword:E.target.value}),placeholder:"Ulangi password baru",required:!0})]}),d.jsxs("div",{className:"flex gap-sm",children:[d.jsx("button",{type:"button",className:"btn btn-secondary flex-1",onClick:()=>{u(!1),y({newPassword:"",confirmPassword:""})},children:"Batal"}),d.jsx("button",{type:"submit",className:"btn btn-primary flex-1",disabled:h,children:h?"Menyimpan...":"Simpan Password"})]})]})})]}),d.jsxs("button",{className:"btn btn-danger btn-block",onClick:k,children:[d.jsx(rv,{size:18}),"Keluar dari Aplikasi"]})]})},jl=()=>d.jsxs("div",{className:"loading-overlay",children:[d.jsx("div",{className:"spinner spinner-lg"}),d.jsx("p",{className:"loading-text",children:"Memuat..."})]}),om=({children:t,allowedRoles:e=[]})=>{const{user:n,profile:r,loading:s,refreshProfile:i}=It();return s?d.jsx(jl,{}):n?n&&!r?d.jsx("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gray-50",children:d.jsxs("div",{className:"text-center p-8 bg-white rounded-lg shadow-md max-w-md w-full mx-4",children:[d.jsx("h2",{className:"text-xl font-bold text-red-600 mb-2",children:"Gagal Memuat Profil"}),d.jsx("p",{className:"text-gray-600 mb-6",children:"Terjadi kesalahan saat memuat data pengguna. Pastikan koneksi internet Anda stabil."}),d.jsxs("div",{className:"flex justify-center gap-3",children:[d.jsx("button",{onClick:i,className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors",children:"Coba Lagi"}),d.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-gray-200 text-gray-800 rounded hover:bg-gray-300 transition-colors",children:"Refresh Halaman"})]})]})}):e.length>0&&!e.includes(r==null?void 0:r.role)?(r==null?void 0:r.role)==="admin"?d.jsx(wr,{to:"/admin",replace:!0}):d.jsx(wr,{to:"/petugas",replace:!0}):t:d.jsx(wr,{to:"/login",replace:!0})},qP=({children:t})=>{const{user:e,profile:n,loading:r}=It();return r?d.jsx(jl,{}):e&&n?n.role==="admin"?d.jsx(wr,{to:"/admin",replace:!0}):d.jsx(wr,{to:"/petugas",replace:!0}):t};function KP(){return d.jsxs($x,{children:[d.jsx(Pe,{path:"/login",element:d.jsx(qP,{children:d.jsx(K1,{})})}),d.jsxs(Pe,{path:"/admin",element:d.jsx(om,{allowedRoles:["admin"],children:d.jsx(Y1,{})}),children:[d.jsx(Pe,{index:!0,element:d.jsx(PP,{})}),d.jsx(Pe,{path:"patients",element:d.jsx(AP,{})}),d.jsx(Pe,{path:"patients/print",element:d.jsx(LP,{})}),d.jsx(Pe,{path:"patients/:id",element:d.jsx(MP,{})}),d.jsx(Pe,{path:"users",element:d.jsx(DP,{})}),d.jsx(Pe,{path:"logs",element:d.jsx(IP,{})}),d.jsx(Pe,{path:"profile",element:d.jsx(zP,{})})]}),d.jsxs(Pe,{path:"/petugas",element:d.jsx(om,{allowedRoles:["petugas","admin"],children:d.jsx(UP,{})}),children:[d.jsx(Pe,{index:!0,element:d.jsx(FP,{})}),d.jsx(Pe,{path:"scan",element:d.jsx(BP,{})}),d.jsx(Pe,{path:"search",element:d.jsx(WP,{})}),d.jsx(Pe,{path:"history",element:d.jsx(HP,{})}),d.jsx(Pe,{path:"profile",element:d.jsx(VP,{})})]}),d.jsx(Pe,{path:"/",element:d.jsx(wr,{to:"/login",replace:!0})}),d.jsx(Pe,{path:"*",element:d.jsx(wr,{to:"/login",replace:!0})})]})}function YP(){return d.jsx(Kx,{children:d.jsx(O1,{children:d.jsxs(q1,{children:[d.jsx($P,{}),d.jsx(KP,{})]})})})}_y(document.getElementById("root")).render(d.jsx(S.StrictMode,{children:d.jsx(YP,{})}));
